(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{0:function(e,t){},"0D4p":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("Vjiq"),o=i("vDqi"),a=i.n(o),s=i("eC5B"),r=i.n(s),c=i("g6NE"),d=function(){var e=c.a.getters["config/configs"],t=e.hasOwnProperty("pusher")?e.pusher:null;!window.Echo&&t&&t.pusherAppKey&&(t.debugMode?r.a.logToConsole=!0:r.a.logToConsole=!1,window.Echo=new n.a({broadcaster:"pusher",cluster:t.pusherAppCluster,encrypted:!0,key:t.pusherAppKey,authorizer:function(e,t){return{authorize:function(t,i){a.a.post("/api/broadcasting/auth",{socket_id:t,channel_name:e.name}).then((function(e){e&&e.data?i(!1,e.data):console.error("Invalid Data!")})).catch((function(e){i(!0,e)}))}}}}),window.EchoOpts={subscriptions:{}})}},"1TzJ":function(e,t,i){"use strict";var n=i("p46w"),o=i.n(n),a=i("7Cbv");!function(){var e=1,t=2;function i(i){var n="";switch(i){case e:n=window.name;break;case t:null!=(n=decodeURIComponent(o.a.get("my-application-browser-tab")))&&"undefined"!=n||(n="")}return n}function n(i,n){switch(i){case e:window.name=n;break;case t:o.a.set("my-application-browser-tab",n||"")}}function s(){var o=i(e)||Object(a.a)();n(e,o);var s=i(t),r=(""==s?null:JSON.parse(s))||null;if(null===r||r.timestamp<(new Date).getTime()-5e3||r.guid===o){var c=function(){var e={guid:o,timestamp:(new Date).getTime()};n(t,JSON.stringify(e))};return c(),setInterval(c,500),!1}return!0}window.isDuplicate=function(){return s()},window.addEventListener("beforeunload",(function(){0==s()&&n(t,"")}))}()},"6OGV":function(e,t,i){"use strict";i("KtBA")},DoBY:function(e,t,i){"use strict";i.r(t);var n=i("L2JU"),o=i("adPT"),a=i("gFX4"),s=i.n(a),r=i("zWga"),c=i.n(r),d=(i("0D4p"),i("akQX")),l=(i("1TzJ"),i("kogc")),u=i("bdEB");function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){g(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.io=s.a;var f={extends:{components:{AnimatedNumber:o.a,RTCMultiConnection:c.a,AppLogo:u.a},data:function(){return{uuid:null,entity:null,isLoading:!1,prevRoute:null,channel:null,countdownInterval:null,getOnlineTimer:null,fullScreenItemId:null,meetingRoomId:null,initUrl:"meetings",fallBackRoute:"appMeetingList",newComments:!1,roomIdAlive:!1,showFlipClock:!0,duplicateTab:!1,fullScreenInOn:!1,membersLive:[],videoList:[],socketURL:"https://socket.scriptmint.com:9001/",rtcmConnection:null,localStream:null,localScreenStreamid:null,videoConstraints:{},pageConfigs:{isDark:!0,showAgenda:!0,showComments:!1,enableAudio:!0,enableVideo:!0,autoplay:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!0,showShareScreenBtn:!0},meetingRulesHost:{session:{audio:!1,video:!1,screen:!1,oneway:!1},mediaConstraints:{audio:!1,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},meetingRulesGuest:{session:{audio:!1,video:!1,screen:!1,oneway:!1},mediaConstraints:{audio:!1,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},snoozeOpts:[{uuid:5,name:5,type:"m"},{uuid:10,name:10,type:"m"},{uuid:15,name:15,type:"m"},{uuid:30,name:30,type:"m"},{uuid:60,name:1,type:"h"}]}},computed:h(h(h(h({},Object(n.c)("config",["vars","configs","uiConfigs"])),Object(n.c)("user",{userUuid:"uuid"})),Object(n.c)("user",["profile","username","hasPermission"])),{},{user:function(){return{uuid:this.userUuid,username:this.username,name:this.profile.name}},hasVideos:function(){return this.videoList&&this.videoList.length},liveMembersCount:function(){return this.membersLive.length-1},startDateTimeIsFuture:function(){var e=this.entity&&this.showFlipClock&&this.isStartDateTimeInFuture();return e?this.startCountDown():this.countdownInterval&&clearInterval(this.countdownInterval),e}}),watch:{liveMembersCount:function(e,t){window.isLiveMeetingDestroyed||e===t||this.meetingRoomCreated(this.entity)}},methods:h(h(h({},Object(n.b)("config",["SetUiConfig"])),Object(n.b)("common",["Init","Get","Custom","GetPreRequisite"])),{},{isStartDateTimeInFuture:function(){return this.entity&&this.entity.startDateTime&&moment(this.entity.startDateTime,this.vars.serverDateTimeFormat).isAfter(moment())},startCountDown:function(){var e=this;this.countdownInterval&&clearInterval(this.countdownInterval),this.countdownInterval=window.setInterval((function(){e.isStartDateTimeInFuture()?e.showFlipClock=!0:(e.showFlipClock&&!document.hasFocus()&&Object(d.b)(),e.showFlipClock=!1)}),1e3)},startGetOnlineTimer:function(){var e=this;if(this.getOnlineTimer&&clearTimeout(this.getOnlineTimer),!this.videoList.length){var t={title:$t("misc.refresh_confirm.title"),text:$t("misc.refresh_confirm.text"),showCancelButton:!0,confirmButtonText:$t("misc.refresh_confirm.confirm_btn"),cancelButtonText:$t("misc.refresh_confirm.cancel_btn")};this.getOnlineTimer=setTimeout((function(){swtAlert.fire(t).then((function(t){t.value?window.location.reload():e.startGetOnlineTimer()}))}),15e3)}},toggleAudio:function(){var e=this,t=this.$refs.videos.find((function(t){return t.id===e.localStream.id})),i=this.videoList.findIndex((function(t){return t.id===e.localStream.id}));if(t&&t.srcObject){var n=t.srcObject;n.getAudioTracks().forEach((function(t){e.pageConfigs.enableAudio?(e.pageConfigs.enableAudio=!1,t.enabled=!1,e.videoList[i].audioMuted=!0,e.rtcmConnection.socket.emit("remoteMutedUnmuted",{audioEnabled:!1,streamid:n.streamid})):(e.pageConfigs.enableAudio=!0,t.enabled=!0,e.videoList[i].audioMuted=!0,e.rtcmConnection.socket.emit("remoteMutedUnmuted",{audioEnabled:!0,streamid:n.streamid}))})),this.rtcmConnection.extra.audioMuted=!this.pageConfigs.enableAudio,this.rtcmConnection.updateExtraData()}else this.localStream=null},toggleVideo:function(){var e=this,t=this.$refs.videos.find((function(t){return t.id===e.localStream.id})),i=this.videoList.findIndex((function(t){return t.id===e.localStream.id}));if(t&&t.srcObject){var n=t.srcObject;n.getVideoTracks().forEach((function(t){e.pageConfigs.enableVideo?(e.pageConfigs.enableVideo=!1,t.enabled=!1,e.videoList[i].videoMuted=!0,e.rtcmConnection.socket.emit("remoteMutedUnmuted",{videoEnabled:!1,streamid:n.streamid})):(e.pageConfigs.enableVideo=!0,t.enabled=!0,e.videoList[i].videoMuted=!1,e.rtcmConnection.socket.emit("remoteMutedUnmuted",{videoEnabled:!0,streamid:n.streamid}))})),this.rtcmConnection.extra.videoMuted=!this.pageConfigs.enableVideo,this.rtcmConnection.updateExtraData()}else this.localStream=null},toggleRemoteAudio:function(e,t){e.muted?(this.videoList[t].muted=!1,this.$refs.videos[t].muted=!1):(this.videoList[t].muted=!0,this.$refs.videos[t].muted=!0)},toggleFullScreen:function(e,t){var i=this,n=this.$refs.videoListEle;this.fullScreenItemId=e.id,this.$fullscreen.toggle(n,{wrap:!1,callback:function(e){i.fullScreenInOn=e}})},toggleComments:function(){this.newComments=!1,this.pageConfigs.showComments=!this.pageConfigs.showComments,this.pageConfigs.showComments||this.hasVideos?this.pageConfigs.showAgenda=!1:this.pageConfigs.showAgenda=!0},toggleAgenda:function(){this.pageConfigs.showAgenda=!this.pageConfigs.showAgenda,this.pageConfigs.showAgenda||this.hasVideos?this.pageConfigs.showComments=!1:this.pageConfigs.showComments=!0},toggleDark:function(){this.pageConfigs.isDark=!this.pageConfigs.isDark},changeFocus:function(e){this.videoList.forEach((function(t){t.maximized=t.id===e.id}))},beforeUnload:function(e){this.localStream&&this.channel.whisper("RemovedStream",this.localStream)},afterJoiningChannel:function(e){this.membersLive=e},newMemberJoining:function(e){this.membersLive.push(e)},memberLeaving:function(e){this.membersLive=this.membersLive.filter((function(t){return t.uuid!==e.uuid}))},meetingStatusChanged:function(e){if(e.uuid===this.entity.uuid){if(this.entity.status===e.status)return;this.entity.status=e.status,this.entity.startDateTime=e.startDateTime;var t=e.status;"scheduled"===t&&e.delayed&&(t="delayed");this.$toasted.success(this.$t({live:"meeting.is_live_now",delayed:"meeting.meeting_delayed",cancelled:"meeting.meeting_cancelled",ended:"meeting.meeting_ended"}[t]),this.$toastConfig)}},gotNewComment:function(){this.pageConfigs.showComments&&!this.fullScreenInOn||(this.newComments=!0,Object(d.b)())},meetingRoomCreated:function(e){var t=this;this.entity.roomId=e.roomId,this.initMediaAndRtcmConnection(),this.rtcmConnection.checkPresence(this.entity.roomId,(function(e,i){t.roomIdAlive=!!e}))},streamRemoved:function(e){this.rtcmConnection.removeStream(e.id),this.rtcmOnStreamEnded(e)},meetingEnded:function(e){this.closeConnectionAndStream(),this.getInitialData()},joinChannel:function(){this.channel=window.Echo.join("Meeting.".concat(this.uuid)),this.channel.here(this.afterJoiningChannel).joining(this.newMemberJoining).leaving(this.memberLeaving).listen("MeetingStatusChanged",this.meetingStatusChanged).listen("NewComment",this.gotNewComment).listenForWhisper("MeetingRoomCreated",this.meetingRoomCreated).listenForWhisper("RemovedStream",this.streamRemoved).listenForWhisper("MeetingEnded",this.meetingEnded)},rtcmOnStream:function(e){var t=this;this.logEvent("On Stream: ",e);var i=this.videoList.find((function(t){return t.id===e.streamid})),n=e.stream.idInstance?JSON.parse(e.stream.idInstance):e.stream;n.isScreen&&"local"===e.type&&(this.localScreenStreamid=e.streamid,e.stream.getTracks().forEach((function(e){e.addEventListener("ended",t.stopSharingScreen)})));if(this.videoList.length>1&&this.recheckLiveParticipants(null),void 0===i){var o=h(h({id:e.streamid,streamUserId:e.userid,muted:"local"===e.type},e.extra),{},{maximized:"local"===e.type&&!n.isScreen,local:"local"===e.type,screen:this.localScreenStreamid===e.streamid,status:!0,hasAudio:n.isAudio||n.audio,hasVideo:n.isVideo||n.video||n.isScreen||n.screen});n.isScreen&&(o.videoMuted=!1),this.videoList.push(o),"local"===e.type&&this.localScreenStreamid!==e.streamid&&(this.localStream=o)}this.autoSetVideoMaximized(),setTimeout((function(){for(var i=0,n=t.$refs.videos.length;i<n;i++)if(t.$refs.videos[i].id===e.streamid){t.$refs.videos[i].srcObject=e.stream;break}}),500),this.isLoading=!1},rtcmOnStreamEnded:function(e){this.recheckLiveParticipants(e),this.autoSetVideoMaximized()},rtcmOnMediaError:function(e){this.isLoading=!1,this.getOnlineTimer&&clearTimeout(this.getOnlineTimer);var t=Object(d.e)(e);this.meetingAction("leave",{error:{name:e.name,title:t.title}},{alert:!1})},rtcmOnMute:function(e){var t=this.videoList.findIndex((function(t){return t.id===e.streamid})),i=this.$refs.videos.find((function(t){return t.id===e.streamid}));"video"===e.muteType?this.videoList[t].videoMuted=!0:"audio"===e.muteType?this.videoList[t].muted=!0:(this.videoList[t].videoMuted=!0,this.videoList[t].muted=!0,i.srcObject=null)},rtcmOnUnmute:function(e){var t=this.videoList.findIndex((function(t){return t.id===e.streamid})),i=this.$refs.videos.find((function(t){return t.id===e.streamid}));"video"===e.unmuteType?this.videoList[t].videoMuted=!1:"audio"===e.unmuteType?this.videoList[t].muted=!1:(this.videoList[t].videoMuted=!1,this.videoList[t].muted=!1,i.srcObject=e)},rtcmOnRemoteMuteUnmute:function(e){var t=this.videoList.findIndex((function(t){return t.id===e.streamid}));this.rtcmConnection.streamEvents[e.streamid].stream;e.hasOwnProperty("audioEnabled")?e.audioEnabled?this.videoList[t].audioMuted=!1:this.videoList[t].audioMuted=!0:e.hasOwnProperty("videoEnabled")&&(e.videoEnabled?this.videoList[t].videoMuted=!1:this.videoList[t].videoMuted=!0)},rtcmOnUserIdAlreadyTaken:function(e,t){this.rtcmConnection.userid=t},initMediaAndRtcmConnection:function(){this.rtcmConnection=new c.a,this.rtcmConnection.socketURL=this.socketURL,this.rtcmConnection.autoCreateMediaElement=!1,this.rtcmConnection.enableLogs=!0;this.videoConstraints={width:{ideal:1920},height:{ideal:1080},frameRate:30},this.rtcmConnection.session=h({},this.meetingRulesHost.session),this.rtcmConnection.sdpConstraints.mandatory=h({},this.meetingRulesHost.mandatory),this.rtcmConnection.mediaConstraints={video:!!this.meetingRulesHost.mediaConstraints.video&&this.videoConstraints,audio:this.meetingRulesHost.mediaConstraints.audio,screen:this.meetingRulesHost.mediaConstraints.screen};var e=this.rtcmConnection.CodecsHandler;this.rtcmConnection.processSdp=function(t){return"vp8".length&&(t=e.preferCodec(t,"vp8".toLowerCase())),t=e.setApplicationSpecificBandwidth(t,{audio:128,video:512,screen:512}),t=e.setVideoBitrates(t,{min:4194304,max:4194304})},this.rtcmConnection.iceServers=[],this.rtcmConnection.iceServers.push({urls:"stun:st.kodemint.in:5349"}),this.rtcmConnection.iceServers.push({urls:"turn:st.kodemint.in:5349",credential:"guest",username:"password"}),this.rtcmConnection.onstream=this.rtcmOnStream,this.rtcmConnection.onstreamended=this.rtcmOnStreamEnded,this.rtcmConnection.onmute=this.rtcmOnMute,this.rtcmConnection.onunmute=this.rtcmOnUnmute,this.rtcmConnection.onMediaError=this.rtcmOnMediaError,this.rtcmConnection.onUserIdAlreadyTaken=this.rtcmOnUserIdAlreadyTaken,this.rtcmConnection.setCustomSocketEvent("remoteMutedUnmuted")},closeConnectionAndStream:function(){var e=this;this.rtcmConnection&&(this.rtcmConnection.attachStreams.forEach((function(e){e.stop()})),this.rtcmConnection.removeStream(this.localStream.id),this.channel.whisper("RemovedStream",this.localStream),this.rtcmConnection.getAllParticipants().forEach((function(t){e.rtcmConnection.disconnectWith(t)})),this.rtcmConnection.leave(),this.rtcmConnection.closeSocket(),this.rtcmConnection=null),this.videoList=[]},recheckLiveParticipants:function(e){var t=this,i=[],n=this.rtcmConnection?this.rtcmConnection.getAllParticipants():[];this.videoList.forEach((function(t,o){var a=n.findIndex((function(e){return e===t.streamUserId}));(!e||e&&t.id!==e.streamid)&&(t.local||!t.local&&-1!==a)||(t.status=!1),i.push(t)})),this.videoList=i,setTimeout((function(){t.videoList=t.videoList.filter((function(e){return e.status})),t.autoSetVideoMaximized()}),3e3)},autoSetVideoMaximized:function(){if(this.videoList.length>1){if(-1===this.videoList.findIndex((function(e){return!e.local&&e.maximized&&e.status}))){var e=this.videoList.findIndex((function(e){return!e.local}));-1!==e&&(this.videoList=this.videoList.map((function(t,i){return t.maximized=!1,i===e&&(t.maximized=!0),t})))}}else this.videoList.length&&(this.videoList[0].maximized=!0)},openRoom:function(e){var t=this;this.rtcmConnection.session=h({},this.meetingRulesHost.session),this.rtcmConnection.mediaConstraints=h({},this.meetingRulesHost.mediaConstraints),this.rtcmConnection.sdpConstraints.mandatory=h({},this.meetingRulesHost.mandatory),this.rtcmConnection.open(e,(function(i,n,o){t.rtcmConnection.socket.on("remoteMutedUnmuted",t.rtcmOnRemoteMuteUnmute),t.logEvent("Room Opened: ",n),t.isLoading=!1,o?formUtil.handleErrors(o):!0===i&&(t.getOnlineTimer&&clearTimeout(t.getOnlineTimer),t.updatePageConfigs(!0),t.channel.whisper("MeetingRoomCreated",{roomId:e}),t.$toasted.success(t.$t("meeting.meeting_created"),t.$toastConfig))}))},joinRoom:function(e){var t=this;this.rtcmConnection.session=h({},this.meetingRulesGuest.session),this.rtcmConnection.mediaConstraints=h({},this.meetingRulesGuest.mediaConstraints),this.rtcmConnection.sdpConstraints.mandatory=h({},this.meetingRulesGuest.mandatory),this.rtcmConnection.join(e,(function(e,i,n){t.rtcmConnection.socket.on("remoteMutedUnmuted",t.rtcmOnRemoteMuteUnmute),t.logEvent("Room Joined: ",i),t.isLoading=!1,!1===e||n?formUtil.handleErrors(n):(t.getOnlineTimer&&clearTimeout(t.getOnlineTimer),t.updatePageConfigs(),t.$toasted.success(t.$t("meeting.meeting_joined"),t.$toastConfig))}))},shareScreen:function(){this.isLoading=!0,this.rtcmConnection.addStream({screen:!0})},stopSharingScreen:function(){var e=this;this.isLoading=!0;var t=this.$refs.videos.find((function(t){return t.id===e.localScreenStreamid}));t&&t.srcObject?(t.srcObject.getTracks().forEach((function(t){t.removeEventListener("ended",e.stopSharingScreen),t.enabled=!1,t.stop()})),this.rtcmConnection.removeStream(this.localScreenStreamid),this.channel.whisper("RemovedStream",t.srcObject),this.localScreenStreamid=null,this.isLoading=!1):(this.localScreenStreamid=null,this.isLoading=!1)},getOnline:function(){var e=this;this.isLoading=!0;this.entity.status;this.startGetOnlineTimer(),this.initMediaAndRtcmConnection(),this.Custom({url:"/".concat(this.initUrl,"/").concat(this.uuid,"/join"),method:"post"}).then((function(t){e.meetingRoomId=t.meeting.roomId,e.entity=t.meeting,e.rtcmConnection.extra={username:e.user.username,name:e.user.name,uuid:e.user.uuid,image:e.profile.image,audioMuted:!e.pageConfigs.enableAudio,videoMuted:!e.pageConfigs.enableVideo},e.rtcmConnection.checkPresence(e.meetingRoomId,(function(t,i){!0===t?e.joinRoom(e.meetingRoomId):e.entity.canModerate?e.openRoom(e.meetingRoomId):(e.isLoading=!1,e.getOnlineTimer&&clearTimeout(e.getOnlineTimer),e.$toasted.error(e.$t("meeting.room_not_found"),e.$toastConfig.error))}))})).catch((function(t){e.isLoading=!1,clearTimeout(e.getOnlineTimer),formUtil.handleErrors(t)}))},getOffline:function(){var e=this;this.isLoading=!0,this.meetingAction("leave",null,{alert:"confirm",callback:function(t){e.closeConnectionAndStream()}})},meetingAction:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{alert:"confirm"},o={alert:"confirm"};n=Object.assign({},o,n);var a=function(o){t.isLoading=!0,i=o||i,t.Custom({url:"/".concat(t.initUrl,"/").concat(t.uuid,"/").concat(e),method:"post",data:i}).then((function(e){t.entity=e.meeting,t.$toasted.success(e.message,t.$toastConfig),n.callback&&n.callback(e),t.isLoading=!1})).catch((function(e){t.isLoading=!1,formUtil.handleErrors(e)}))};e?"confirm"===n.alert||!0===n.alert?formUtil.confirmAction().then((function(e){e.value?a():(t.isLoading=!1,e.dismiss,l.c.DismissReason.cancel)})):"input"===n.alert?swtAlert.fire({title:n.title,input:"text",inputPlaceholder:n.inputPlaceholder,showCancelButton:!0,confirmButtonText:"Proceed!",cancelButtonText:"Go Back!"}).then((function(e){if(e.value){var i={};i[n.fieldName]=e.value,a(i)}else t.isLoading=!1,e.dismiss,l.c.DismissReason.cancel})):a():this.isLoading=!1},leaveMeeting:function(){this.meetingAction("leave")},endMeeting:function(){var e=this;this.isLoading=!0,this.meetingAction("end",null,{callback:function(t){e.closeConnectionAndStream(),e.channel.whisper("MeetingEnded",{status:t.meeting.status})}})},getInitialData:function(){var e=this;return this.isLoading=!0,this.Get({uuid:this.uuid}).then((function(t){return e.entity=t,Object(d.a)(),t.roomId&&setTimeout((function(){e.initMediaAndRtcmConnection(),e.rtcmConnection.checkPresence(t.roomId,(function(t,i){e.roomIdAlive=!!t}))}),1e3),e.joinChannel(),e.isLoading=!1,t})).catch((function(t){return e.isLoading=!1,formUtil.handleErrors(t),e.$router.push({name:e.fallBackRoute}),t}))},logEvent:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"log";this.rtcmConnection.enableLogs&&("log"===i?console.log(e,t):"error"===i?console.error(e,t):"debug"===i&&console.debug(e,t))},destroyPage:function(){this.countdownInterval&&clearInterval(this.countdownInterval),this.SetUiConfig({pageHeaderShow:!0,pageFooterShow:!0}),this.closeConnectionAndStream(),window.Echo&&(this.channel&&(this.channel.stopListening("MeetingStatusChanged"),this.channel.stopListening("NewComment")),window.Echo.leave("Meeting.".concat(this.uuid)))},doInit:function(){this.Init({url:this.initUrl}),window.isDuplicate()&&(this.duplicateTab=!0),this.getInitialData()}}),mounted:function(){this.$route.params.uuid&&(this.uuid=this.$route.params.uuid),this.doInit(),window.addEventListener("beforeunload",this.beforeUnload)},created:function(){this.SetUiConfig({pageHeaderShow:!1,pageFooterShow:!1}),navigator.connection&&"cellular"===navigator.connection.type&&navigator.connection.downlinkMax<=.115&&alert("2G is not supported. Please use a better internet service.")},beforeDestroy:function(){window.isPageDestroyed||(this.isLoading=!0,this.destroyPage(),this.entity&&"live"===this.entity.status&&this.Custom({url:"/".concat(this.initUrl,"/").concat(this.uuid,"/leave"),method:"post"}),window.isPageDestroyed=!0)},beforeRouteEnter:function(e,t,i){e.params.uuid?i((function(e){e.prevRoute=t})):i(t)},beforeRouteLeave:function(e,t,i){this.isLoading=!0,this.destroyPage(),window.removeEventListener("beforeunload",this.beforeUnload),this.entity&&"live"===this.entity.status?this.Custom({url:"/".concat(this.initUrl,"/").concat(this.uuid,"/leave"),method:"post"}).then((function(e){window.isPageDestroyed=!0,i()})).catch((function(e){window.isPageDestroyed=!0,i()})):(window.isPageDestroyed=!0,i())}},components:{}},p=(i("6OGV"),i("KHd+")),v=Object(p.a)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"call-page",attrs:{"data-page-background-color":e.uiConfigs.pageContainerBackgroundColor,"data-footer-background-color":e.uiConfigs.leftSidebarColor}},[e.duplicateTab?i("div",{staticClass:"duplicate-tab d-flex justify-content-center align-items-center min-height-90vh"},[i("h2",[e._v(e._s(e.$t("meeting.duplicate_tab")))])]):[i("div",{ref:"videoListEle",class:["video-list",{"has-no-video":!e.hasVideos},{"agenda-comments-visible":e.pageConfigs.showAgenda||e.pageConfigs.showComments}]},[e.hasVideos?e._l(e.videoList,(function(t,n){return i("div",{key:""+t.uuid+t.id,class:["video-item",{maximized:t.maximized},{local:t.local},{screen:t.screen},{"fullscreen-item":t.id===e.fullScreenItemId},{"audio-muted":t.audioMuted},{"video-muted":t.videoMuted||!t.hasVideo},{"no-stream":!t.status}],on:{dblclick:function(i){return e.changeFocus(t)}}},[i("div",{staticClass:"video-wrapper"},[i("video",{ref:"videos",refInFor:!0,class:[{"no-poster":t.status&&!t.videoMuted}],attrs:{autoplay:"",playsinline:"",id:t.id,poster:t.status?null:"/images/video/no-stream.jpg"},domProps:{muted:t.muted}})]),e._v(" "),i("div",{staticClass:"caption"},[t.status?i("h6",[e._m(0,!0),e._v(" "),t.local?[e._v("\n                                "+e._s(t.screen?e.$t("meeting.your_screen"):e.$t("meeting.you"))+"\n                            ")]:[e._v("\n                                "+e._s(t.screen?""+t.name+e.$t("meeting.screen"):t.name)+"\n                            ")]],2):i("h6",[e._m(1,!0),e._v("\n\n                            "+e._s(t.local?t.localScreen?e.$t("meeting.your_screen"):e.$t("meeting.you"):t.name)+"\n\n                            "),i("span",{staticClass:"bracketed text-danger"},[e._v(e._s(e.$t("meeting.left")))])]),e._v(" "),t.maximized?e._e():i("base-dropdown",{staticClass:"video-item-actions",attrs:{tag:"div",direction:"up","menu-classes":"animated faster menuFadeInUpSmall",position:"right",design:"gray-darker"}},[i("base-button",{attrs:{slot:"title",type:"button",design:"dark-primary",size:"sm","data-toggle":"dropdown",role:"button"},slot:"title"},[i("i",{staticClass:"fas fa-ellipsis-v"})]),e._v(" "),t.maximized?e._e():i("a",{staticClass:"dropdown-item",on:{click:function(i){return e.changeFocus(t)}}},[e._v("Focus this!")])],1)],1),e._v(" "),t.local?e._e():i("div",{staticClass:"custom-controls-wrapper"},[i("div",{staticClass:"custom-controls"},[t.audioMuted&&!t.videoMuted?i("div",{staticClass:"status-icon"},[i("i",{staticClass:"fas fa-microphone-slash disabled-text"})]):e._e(),e._v(" "),i("button",{on:{click:function(i){return e.toggleRemoteAudio(t,n)}}},[i("i",{class:["fas",{"fa-volume-up enabled-text":!t.muted},{"fa-volume-off disabled-text":t.muted}]})]),e._v(" "),i("button",{on:{click:function(i){return e.toggleFullScreen(t,n)}}},[i("i",{class:["fas",{"fa-expand":!e.fullScreenInOn},{"fa-compress":e.fullScreenInOn}]})])])])])})):e._e()],2),e._v(" "),i("div",{staticClass:"call-footer"},[i("div",{staticClass:"logo-wrapper"},[i("app-logo",{attrs:{place:e.pageConfigs.isDark?"dark":"light",size:"sm"}})],1),e._v(" "),i("div",{staticClass:"call-actions"},[e.entity&&e.entity.status&&e.videoList.length?[e.localVideo?[e.pageConfigs.showEnableVideoBtn?[e.pageConfigs.enableVideo?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action enabled-text",attrs:{type:"button",title:e.$t("meeting.mute_video")},on:{click:e.toggleVideo}},[i("i",{staticClass:"fas fa-video"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action disabled-text",attrs:{type:"button",title:e.$t("meeting.unmute_video")},on:{click:e.toggleVideo}},[i("i",{staticClass:"fas fa-video-slash"})])]:e._e(),e._v(" "),e.pageConfigs.showEnableAudioBtn?[e.pageConfigs.enableAudio?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action enabled-text",attrs:{type:"button",title:e.$t("meeting.mute_audio")},on:{click:e.toggleAudio}},[i("i",{staticClass:"fas fa-microphone"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action disabled-text",attrs:{type:"button",title:e.$t("meeting.unmute_audio")},on:{click:e.toggleAudio}},[i("i",{staticClass:"fas fa-microphone-slash"})])]:e._e()]:e._e(),e._v(" "),e.pageConfigs.showShareScreenBtn?[e.localScreenStreamid?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("meeting.stop_sharing_screen")},on:{click:e.stopSharingScreen}},[i("i",{staticClass:"fas fa-minus-square"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("meeting.share_screen")},on:{click:e.shareScreen}},[i("i",{staticClass:"fas fa-desktop"})])]:e._e(),e._v(" "),i("div",{staticClass:"separator"}),e._v(" "),e.entity.canModerate?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("meeting.end_meeting")},on:{click:e.endMeeting}},[i("i",{staticClass:"fas fa-calendar-times"})]):e._e(),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("meeting.leave_meeting")},on:{click:e.getOffline}},[i("i",{staticClass:"fas fa-sign-out-alt"})])]:e._e(),e._v(" "),e.entity&&e.entity.config&&e.entity.config.enableComments?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],class:["btn action",{pulse:e.newComments}],attrs:{type:"button",title:e.$t(e.pageConfigs.showComments?"global.hide":"global.show",{attribute:e.$t("comment.comments")})},on:{click:e.toggleComments}},[i("i",{class:[{"fas fa-comment-slash":e.pageConfigs.showComments},{"far fa-comment":!e.pageConfigs.showComments}]})]):e._e(),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t(e.pageConfigs.showAgenda?"global.hide":"global.show",{attribute:e.$t("general.agenda")})},on:{click:e.toggleAgenda}},[i("i",{staticClass:"fas fa-quote-left"})]),e._v(" "),i("div",{staticClass:"separator"}),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("global.switch",{attribute:e.pageConfigs.isDark?e.$t("config.ui.light"):e.$t("config.ui.dark")})},on:{click:e.toggleDark}},[i("i",{staticClass:"fas fa-adjust"})])],2)])]],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"text-xs mr-1 text-success"},[t("i",{staticClass:"fas fa-circle"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"text-xs mr-1 text-danger"},[t("i",{staticClass:"fas fa-circle"})])}],!1,null,null,null);t.default=v.exports},KtBA:function(e,t,i){var n=i("a/W8");"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(n,o);n.locals&&(e.exports=n.locals)},"a/W8":function(e,t,i){(t=e.exports=i("I1BE")(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Muli:300,400,600,700,800,900);",""]),t.push([e.i,".call-page{width:100vw;height:100vh;max-height:100vh;padding:0;margin:0;display:flex;flex-direction:column;align-items:stretch}.call-page .video-list{display:flex;flex-grow:1;justify-content:space-around;align-items:center;flex-wrap:wrap;padding-bottom:3rem}.call-page .call-footer{width:100%;display:flex;justify-content:space-around;height:60px;align-items:stretch}.call-page .call-footer .logo-wrapper{display:flex;align-items:center;padding-left:15px}.call-page .call-footer .call-actions{text-align:right;display:none}.call-page .call-footer .call-actions>.separator{width:2px;border-left:2px solid rgba(0,0,0,.1);background:rgba(0,0,0,.05)}.call-page .call-footer .call-actions>.btn{box-shadow:none;font-size:1rem;margin-right:0}.call-page .call-footer .call-actions>.btn:hover{box-shadow:none;background:rgba(0,0,0,.3)}.call-page .call-footer .call-actions>.btn:active{background:rgba(0,0,0,.6);box-shadow:inset 0 0 10px 0 rgba(0,0,0,.1)}.call-page .call-footer .call-actions>.btn.disabled-text,.call-page .call-footer .call-actions>.btn.disabled-text:hover{color:#f5365c}.call-page .call-footer .call-actions>.btn.enabled-text,.call-page .call-footer .call-actions>.btn.enabled-text:hover{color:#2dce89}[data-footer-background-color=primary] .call-footer,[data-page-background-color=primary]{background-color:#581b98;color:#dee2e9}[data-footer-background-color=light-primary] .call-footer,[data-page-background-color=light-primary]{background-color:#7e27d9;color:#dee2e9}[data-footer-background-color=dark-primary] .call-footer,[data-page-background-color=dark-primary]{background-color:#320f57;color:#dee2e9}[data-footer-background-color=secondary] .call-footer,[data-page-background-color=secondary]{background-color:#e00c51;color:#6c7580}[data-footer-background-color=dark-secondary] .call-footer,[data-page-background-color=dark-secondary]{background-color:#970837;color:#6c7580}[data-footer-background-color=success] .call-footer,[data-page-background-color=success]{background-color:#2dce89;color:#dee2e9}[data-footer-background-color=info] .call-footer,[data-page-background-color=info]{background-color:#11cdef;color:#dee2e9}[data-footer-background-color=warning] .call-footer,[data-page-background-color=warning]{background-color:#fb6340;color:#dee2e9}[data-footer-background-color=danger] .call-footer,[data-page-background-color=danger]{background-color:#f5365c;color:#dee2e9}[data-footer-background-color=white] .call-footer,[data-page-background-color=white]{background-color:#fff;color:#6c7580}[data-footer-background-color=whitish] .call-footer,[data-page-background-color=whitish]{background-color:#fafbfd;color:#6c7580}[data-footer-background-color=light] .call-footer,[data-page-background-color=light]{background-color:#dee2e9;color:#6c7580}[data-footer-background-color=dark] .call-footer,[data-page-background-color=dark]{background-color:#6c7580;color:#dee2e9}[data-footer-background-color=gray-darker] .call-footer,[data-page-background-color=gray-darker]{background-color:#495060;color:#dee2e9}[data-footer-background-color=gray-darkest] .call-footer,[data-page-background-color=gray-darkest]{background-color:#212532;color:#dee2e9}[data-footer-background-color=black] .call-footer,[data-page-background-color=black]{background-color:#000;color:#dee2e9}[data-footer-background-color=default-color] .call-footer,[data-page-background-color=default-color]{background-color:#0a346d;color:#dee2e9}",""])},adPT:function(e,t,i){"use strict";var n={name:"animated-number",props:{number:{type:Number,default:0},delay:{type:Number,default:20}},data:function(){return{displayNumber:0,interval:!1,initialInterval:!1}},methods:{changeNumberFn:function(){if(this.displayNumber!=this.number){var e=(this.number-this.displayNumber)/10;e=e>=0?Math.ceil(e):Math.floor(e),this.displayNumber=this.displayNumber+e}}},watch:{number:function(){clearInterval(this.interval),this.number!=this.displayNumber&&(this.interval=window.setInterval(this.changeNumberFn,this.delay))}},mounted:function(){this.displayNumber=0,clearInterval(this.initialInterval),this.number!=this.displayNumber&&(this.initialInterval=window.setInterval(this.changeNumberFn,this.delay))}},o=i("KHd+"),a=Object(o.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v(this._s(this.displayNumber))])}),[],!1,null,null,null);t.a=a.exports},akQX:function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"e",(function(){return l})),i.d(t,"c",(function(){return h})),i.d(t,"b",(function(){return g})),i.d(t,"d",(function(){return f}));var n=i("V0LQ");navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||alert($t("misc.get_user_media_not_supported")),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=function(e){navigator.mediaDevices.enumerateDevices().then(e)});var o="https:"===location.protocol,a=[],s=!1;("undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack||navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)&&(s=!0);var r={hasMicrophone:!1,hasWebcam:!1,isMicrophoneAlreadyCaptured:!1,isWebcamAlreadyCaptured:!1,permissionError:!0},c=function(e){s&&(!navigator.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(navigator.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!navigator.enumerateDevices&&navigator.enumerateDevices&&(navigator.enumerateDevices=navigator.enumerateDevices.bind(navigator)),navigator.enumerateDevices?(a=[],navigator.enumerateDevices((function(t){t.forEach((function(e){var t,i={};for(var n in e)i[n]=e[n];"audio"===i.kind&&(i.kind="audioinput"),"video"===i.kind&&(i.kind="videoinput"),a.forEach((function(e){e.id===i.id&&e.kind===i.kind&&(t=!0)})),t||(i.deviceId||(i.deviceId=i.id),i.id||(i.id=i.deviceId),i.label?("videoinput"!==i.kind||r.isWebcamAlreadyCaptured||(r.isWebcamAlreadyCaptured=!0),"audioinput"!==i.kind||r.isMicrophoneAlreadyCaptured||(r.isMicrophoneAlreadyCaptured=!0)):(i.label="Please invoke getUserMedia once.",o||(i.label="HTTPs is required to get label of this "+i.kind+" device.")),"audioinput"===i.kind&&(r.hasMicrophone=!0),"videoinput"===i.kind&&(r.hasWebcam=!0),a.push(i))})),e&&e(r)}))):e&&e(r))},d=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c((function(i){if(i){var n=!1;e&&!i.hasMicrophone&&(n=!0),t&&!i.hasWebcam&&(n=!0),n&&u(i)}}))},l=function(e){var t={icon:"error",footer:$t("misc.solve_and_refresh")};if(e)return"NotAllowedError"===e.name||"PermissionDeniedError"===e.name?(t.title=$t("misc.media.permission_denied"),t.text=$t("misc.media.permission_denied_text")):"NotFoundError"===e.name?(t.title=$t("misc.media.not_found"),t.text=$t("misc.media.not_found_text")):"NotReadableError"===e.name||"OverconstrainedError"===e.name?(t.title=$t("misc.media.unreadable"),t.text=$t("misc.media.unreadable_text")):"SecurityError"!==e.name&&"TypeError"!==e.name||(t.title=$t("misc.media.security"),t.text=$t("misc.media.security_text")),{msg:t,alert:swtAlert.fire(t)}},u=function(e){var t=[];e.hasMicrophone||t.push("Microphone"),e.hasWebcam||t.push("WebCam");var i={icon:"error",title:$t("misc.media.missing"),text:$t("misc.media.missing_text",{attribute:t.join(", ")}),footer:$t("misc.solve_and_refresh")};swtAlert.fire(i)},m=function(e){if((e=Object.assign({},{type:null,loop:!1,duration:1e3},e)).type){var t=new Audio;return t.preload="auto",t.autoplay=!0,t.loop=e.loop,t.src="/sound/".concat(e.type,".mp3"),t.play().then((function(){setTimeout((function(){t&&t.pause()}),e.duration)})).catch((function(e){console.error(e)})),t}},h=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!document.hasFocus()||e)return m({type:"calling",loop:!0,duration:3e4})},g=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!document.hasFocus()||e)return m({type:"message",duration:3e3})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=document.querySelector("link[rel=canonical]")?document.querySelector("link[rel=canonical]").href:document.location.href,o=e.url?e.url:i;if(navigator.share)navigator.share({title:e.title?e.title:document.title,url:o}).then((function(){console.log("Thanks for sharing!")})).catch(console.error);else{var a={showCancelButton:!0,confirmButtonText:$t("misc.share_alert.confirm_btn"),cancelButtonText:$t("misc.share_alert.cancel_btn")};e.alertTitle&&(a.title=e.alertTitle),e.alertHtml?a.html=e.alertHtml:a.text=$t("misc.share_alert.text"),swtAlert.fire(a).then((function(e){e.value&&(Object(n.c)(o),setTimeout((function(){t()}),500))}))}}},bdEB:function(e,t,i){"use strict";var n=i("L2JU");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var r={props:{tag:{type:String,default:"a"},place:{type:String,default:"normal"},size:{type:String,default:"normal"},appLogo:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},link:{type:String,default:""},assets:{type:Object}},data:function(){return{appLogoText:window.kmenv.name}},computed:a(a({},Object(n.c)("config",["configs","uiConfigs"])),{},{computedUrl:function(){return"a"===this.tag&&(""!==this.link?this.link:"/")},orgLogo:function(){if(this.appLogo||!this.configs.assets&&!this.assets)return"navbar"===this.place||"sidebar"===this.place||"dark"===this.place?"/images/logo-light.png":"/images/logo.png";var e=this.assets&&this.assets.logo?this.assets.logo:this.configs.assets.logo?this.configs.assets.logo:"/images/logo.png";return(this.assets&&this.assets.logoLight||this.configs.assets.logoLight)&&("navbar"===this.place&&this.uiConfigs.topNavbarLogoLight||"sidebar"===this.place&&this.uiConfigs.leftSidebarLogoLight||"dark"===this.place)&&(e=this.assets&&this.assets.logoLight?this.assets.logoLight:this.configs.assets.logoLight),e},appTitle:function(){return this.configs.basic?this.configs.basic.orgName:window.kmenv.name}})},c=i("KHd+"),d=Object(c.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.tag,{tag:"component",class:["logo",e.place+"-logo",e.size+"-logo",e.orgLogo?"org-logo":"app-logo",e.inline?"inline-logo":""],attrs:{href:e.computedUrl}},[e.orgLogo?i("img",{staticClass:"logo-icon",attrs:{src:e.orgLogo,alt:e.appTitle}}):[i("span",{staticClass:"logo-text",attrs:{title:e.appTitle}},[e._v(e._s(e.appLogoText))])]],2)}),[],!1,null,null,null);t.a=d.exports}}]);
//# sourceMappingURL=live.js.map?id=a2722d04bdc9b0c461f4