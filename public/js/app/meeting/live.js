(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{"/MoV":function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"g",(function(){return c})),i.d(t,"d",(function(){return l})),i.d(t,"a",(function(){return u})),i.d(t,"f",(function(){return d})),i.d(t,"h",(function(){return m})),i.d(t,"e",(function(){return h})),i.d(t,"b",(function(){return g}));var s=i("g6NE"),n=s.a.getters["config/configs"],o=s.a.getters["config/vars"],a=function(){return{timezone:n.system.timezone,defaultDateFormat:o.defaultDateFormat,defaultDateTimeFormat:o.defaultDateTimeFormat,serverDateFormat:o.serverDateFormat,serverDateTimeFormat:o.serverDateTimeFormat,calendarLocale:{sameDay:o.defaultTimeFormat,lastWeek:o.defaultDateFormat,sameElse:o.defaultDateFormat}}},r=function(e,t){var i=a(),s=moment(e,i.serverDateFormat);return e?(Array.isArray(e)&&(s=moment(e[0],e[1])),s.format(t||i.defaultDateFormat)):"INVALID DATE STRING"},c=function(e,t){var i=a(),s=moment(e,i.serverTimeFormat);return e?(Array.isArray(e)&&(s=moment(e[0],e[1])),s.format(t||i.defaultTimeFormat)):"INVALID TIME STRING"},l=function(e,t){var i=a(),s=moment(e,i.serverDateTimeFormat);return e?(Array.isArray(e)&&(s=moment(e[0],e[1])),s.format(t||i.defaultDateTimeFormat)):"INVALID DATE TIME STRING"},u=function(e,t){var i=a(),s=moment(e,i.serverDateTimeFormat);return e?(Array.isArray(e)&&(s=moment(e[0],e[1])),s.calendar(t||i.calendarLocale)):"INVALID DATE TIME STRING"},d=function(e,t,i){var s=a();if(!e)return"INVALID DATE STRING";var n=moment.utc(e,s.serverDateFormat);return"NOW"===e&&(n=moment.utc()),Array.isArray(e)&&(n=moment.utc(e[0],e[1])),n.tz(i||s.timezone).format(t||s.defaultDateFormat)},m=function(e,t,i){var s=a(),n=moment.utc("".concat(moment().format(s.serverDateFormat)," ").concat(e),s.serverTimeFormat);return e?(Array.isArray(e)&&(n=moment.utc(e[0],e[1])),n.tz(i||s.timezone).format(t||s.defaultTimeFormat)):"INVALID TIME STRING"},h=function(e,t,i){var s=a();if(!e)return"INVALID DATE TIME STRING";var n=moment.utc(e,s.serverDateTimeFormat);return"NOW"===e&&(n=moment.utc()),Array.isArray(e)&&(n=moment.utc(e[0],e[1])),n.tz(i||s.timezone).format(t||s.defaultDateTimeFormat)},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=a(),n=moment.utc(e,s.serverDateTimeFormat);if(!e)return"INVALID DATE TIME STRING";Array.isArray(e)&&(n=moment.utc(e[0],e[1]));var o=n.tz(i||s.timezone);return o=o.calendar(t||s.calendarLocale)}},0:function(e,t){},"0D4p":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i("Vjiq"),n=i("vDqi"),o=i.n(n),a=i("eC5B"),r=i.n(a),c=i("g6NE"),l=function(){var e=c.a.getters["config/configs"],t=e.hasOwnProperty("pusher")?e.pusher:null;!window.Echo&&t&&t.pusherAppKey&&(t.debugMode?r.a.logToConsole=!0:r.a.logToConsole=!1,window.Echo=new s.a({broadcaster:"pusher",cluster:t.pusherAppCluster,encrypted:!0,key:t.pusherAppKey,authorizer:function(e,t){return{authorize:function(t,i){o.a.post("/api/broadcasting/auth",{socket_id:t,channel_name:e.name}).then((function(e){e&&e.data?i(!1,e.data):console.error("Invalid Data!")})).catch((function(e){i(!0,e)}))}}}}),window.EchoOpts={subscriptions:{}})}},"0xtn":function(e,t,i){"use strict";var s=i("L2JU"),n=i("SokU"),o=i.n(n);function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.a={components:{Avatar:o.a},computed:r(r({},Object(s.c)("config",["configs","uiConfigs","vars"])),Object(s.c)("user",{getUserDetails:"get",hasRole:"hasRole",hasPermission:"hasPermission",loggedInUser:"loggedInUser",userUuid:"uuid",profile:"profile",username:"username",locked:"locked"})),methods:r(r({},Object(s.b)("user",["Logout","Lock"])),{},{lock:function(){this.$gaEvent("engagement","lockScreen","Navbar"),this.Lock()},logout:function(){var e=this;this.$gaEvent("engagement","logout","Navbar"),this.Logout().then((function(t){e.$gaEvent("activity","loggedout"),e.$router.push({name:"login",query:{logout:"true"}})}))}})}},"1TzJ":function(e,t,i){"use strict";var s=i("p46w"),n=i.n(s),o=i("7Cbv");!function(){var e=1,t=2;function i(i){var s="";switch(i){case e:s=window.name;break;case t:null!=(s=decodeURIComponent(n.a.get("my-application-browser-tab")))&&"undefined"!=s||(s="")}return s}function s(i,s){switch(i){case e:window.name=s;break;case t:n.a.set("my-application-browser-tab",s||"")}}function a(){var n=i(e)||Object(o.a)();s(e,n);var a=i(t),r=(""==a?null:JSON.parse(a))||null;if(null===r||r.timestamp<(new Date).getTime()-5e3||r.guid===n){var c=function(){var e={guid:n,timestamp:(new Date).getTime()};s(t,JSON.stringify(e))};return c(),setInterval(c,500),!1}return!0}window.isDuplicate=function(){return a()},window.addEventListener("beforeunload",(function(){0==a()&&s(t,"")}))}()},"3HR4":function(e,t,i){"use strict";var s=i("o0o1"),n=i.n(s),o=i("L2JU"),a=i("8BOd");i("i8R7");function r(e,t,i,s,n,o,a){try{var r=e[o](a),c=r.value}catch(e){return void i(e)}r.done?t(c):Promise.resolve(c).then(s,n)}function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){u(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.a={components:{},data:function(){return{formData:{},formErrors:{},initialFormData:null,initianLength:0,emptyFormData:null,entity:null,preRequisite:{},isLoading:!0,useUserPreference:!1,dataType:null,configType:""}},computed:l({},Object(o.c)("config",{configsWithPreference:"configs",configs:"configsOriginal",vars:"vars"})),methods:l(l(l(l(l({},Object(o.b)("config",["GetConfig"])),Object(o.b)("user",["GetUser"])),Object(o.b)("navigation",["Generate"])),Object(o.b)("common",["Custom"])),{},{findActualValue:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"uuid";return t.find((function(t){return t[i]===e}))||null},submit:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(formUtil.isUnchanged(this.initialFormData,this.formData))return this.$toasted.info(this.$t("general.nothing_changed"),this.$toastConfig.info),!1;this.isLoading=!0,this.formData.hasOwnProperty("type")&&(this.formData.type=this.formData.type.snakeCase());var i=!0===t||this.useUserPreference?a.e:"module"===this.configType?a.d:a.c;"function"==typeof this.beforeSubmit&&this.beforeSubmit(),i(this.formData).then((function(i){(!0===t||e.useUserPreference?e.GetUser:e.GetConfig)().then((function(){e.$toasted.success(i.message,e.$toastConfig),e.initialFormData=_.cloneDeep(e.formData),e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.formErrors=formUtil.handleErrors(t)})),"function"==typeof e.afterSubmit&&e.afterSubmit(),"function"==typeof e.afterSubmitSuccess&&e.afterSubmitSuccess()})).catch((function(t){e.isLoading=!1,e.formErrors=formUtil.handleErrors(t),"function"==typeof e.afterSubmit&&e.afterSubmit(),"function"==typeof e.afterSubmitError&&e.afterSubmitError()}))},reset:function(){var e=this;formUtil.confirmAction().then((function(t){t.value&&(e.formData=Object.assign({},e.formData,_.cloneDeep(e.initialFormData)))}))},unsavedCheck:function(e){formUtil.unsavedCheckAlert(this.initialFormData,this.formData,e)},fillPreRequisite:function(e){var t=this;this.preRequisite.objForEach((function(i,s){t.preRequisite[s]=e.hasOwnProperty(s)?e[s]:i})),this.isLoading=!1},fillFormData:function(){var e=this;this.isLoading=!0;var t=this.useUserPreference?this.configsWithPreference:this.configs;this.formData.type&&t[this.formData.type]&&(this.formData=formUtil.assignValues(this.formData,t[this.formData.type])),this.formData.types&&Array.isArray(this.formData.types)&&this.formData.types.forEach((function(i){e.formData=formUtil.assignValues(e.formData,t[i])})),this.formData.override&&this.formData.objForEach((function(i,s){i&&_.isObject(i)?e.formData[s]=formUtil.assignValues(e.formData[s],t[s]):e.formData[s]=t[s]?t[s]:i})),"function"==typeof this.addNewRow&&"function"==typeof this.addNewRowIfNone&&this.addNewRowIfNone(),this.isLoading=!1},getInitialData:function(e){var t,i=this;return(t=n.a.mark((function t(){var s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.isLoading=!0,t.prev=1,t.next=4,a.b(Object.keys(i.preRequisite).join(","));case 4:return s=t.sent,i.fillPreRequisite(s),e&&i.$nextTick((function(){e()})),t.abrupt("return",s);case 10:throw t.prev=10,t.t0=t.catch(1),i.isLoading=!1,i.formErrors=formUtil.handleErrors(t.t0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,10]])})),function(){var e=this,i=arguments;return new Promise((function(s,n){var o=t.apply(e,i);function a(e){r(o,s,n,a,c,"next",e)}function c(e){r(o,s,n,a,c,"throw",e)}a(void 0)}))})()}}),mounted:function(){this.fillFormData(),this.initialFormData=_.cloneDeep(this.formData)},beforeDestroy:function(){delete this.formData,delete this.formErrors,delete this.preRequisite},beforeRouteLeave:function(e,t,i){this.unsavedCheck(i)}}},"3ugI":function(e,t,i){var s=i("susR");"string"==typeof s&&(s=[[e.i,s,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(s,n);s.locals&&(e.exports=s.locals)},"4eoG":function(e,t,i){"use strict";i("yufk")},"8Cr2":function(e,t,i){(t=e.exports=i("I1BE")(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Muli:300,400,600,700,800,900);",""]),t.push([e.i,".chatgroup-wrapper{flex-direction:column}.chatgroup-wrapper,.chatgroup-wrapper .chatgroup{display:flex;height:100%;max-height:100%;overflow:hidden}.chatgroup-wrapper .chatgroup{flex-grow:1;justify-content:stretch;align-items:stretch;position:relative;flex-direction:row}.chatgroup-wrapper .chatgroup .chatgroup-form .chatgroup-name{display:flex;flex-direction:row;justify-content:space-between;padding:0 .85rem}.chatgroup-wrapper .chatgroup .chatgroup-form .chatgroup-name h6{line-height:2rem;color:hsla(0,0%,100%,.8);margin-bottom:0;flex-grow:1;display:flex;justify-content:flex-start;align-items:center}.chatgroup-wrapper .chatgroup .chatgroup-form .chatgroup-name input.form-control{background:rgba(0,0,0,.1);border-color:rgba(0,0,0,.05) transparent;border-style:solid;border-width:1px;width:100%;height:100%;color:#fff}.chatgroup-wrapper .chatgroup .chatgroup-form .chatgroup-name input.form-control:hover{background:rgba(0,0,0,.15)}.chatgroup-wrapper .chatgroup .chatgroup-form .chatgroup-name input.form-control:active,.chatgroup-wrapper .chatgroup .chatgroup-form .chatgroup-name input.form-control:focus{background:rgba(0,0,0,.35)}.chatgroup-wrapper .chatgroup .chatgroup-form .chatgroup-name input.form-control::-moz-placeholder{color:#6c7580}.chatgroup-wrapper .chatgroup .chatgroup-form .chatgroup-name input.form-control:-ms-input-placeholder{color:#6c7580}.chatgroup-wrapper .chatgroup .chatgroup-form .chatgroup-name input.form-control::placeholder{color:#6c7580}.chatgroup-wrapper .chatgroup .chatgroup-form .chatgroup-name .chatgroup-actions{display:flex;flex-direction:row;justify-content:flex-end}.chatgroup-wrapper .chatgroup .chatgroup-form .chatgroup-name .chatgroup-actions>button{flex-grow:1;background:transparent;border:none;color:#fff;white-space:nowrap;width:40px;height:40px;border-radius:30px}.chatgroup-wrapper .chatgroup .chatgroup-form .chatgroup-name .chatgroup-actions>button:hover{background:rgba(0,0,0,.2);padding-bottom:2px}.chatgroup-wrapper .chatgroup .chatgroup-form .chatgroup-members-header{border-bottom:1px solid rgba(0,0,0,.4)}.chatgroup-wrapper .chatgroup-footer{box-shadow:0 -2px 6px 0 rgba(0,0,0,.4);z-index:1;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:center}.chatgroup-wrapper .chatgroup-footer button{flex:1 0 auto;margin:0}",""])},BcCH:function(e,t,i){"use strict";var s=i("XuX8"),n=new(i.n(s).a);t.a=n},ICll:function(e,t,i){"use strict";i.d(t,"d",(function(){return n})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return r}));var s=i("5TL6");function n(e,t){return Object(s.a)({url:e.url,method:"post",data:e.data,upload:!0,config:{headers:{"Content-Type":"multipart/form-data"}},headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2)},onUploadProgress:t})}function o(e){return Object(s.a)({url:e.url,method:"delete",data:e.data})}function a(e,t,i){return Object(s.a)({url:e.url,method:"post",data:e.data,upload:!0,config:{headers:{"Content-Type":"multipart/form-data"}},headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2)},onUploadProgress:t,cancelToken:i})}function r(e){return Object(s.a)({url:e.url,method:"delete",data:e.data})}},OjY7:function(e,t,i){"use strict";var s=i("vDqi"),n=i.n(s),o=i("ICll"),a=i("L2JU"),r=i("7Cbv"),c=i("BcCH"),l=i("nFxi");function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){m(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var h={name:"file-uploader",components:{},props:{data:{type:Array,default:function(){return[]}},additionalFormData:{type:Object,default:function(){return{}}},requestIdentifier:{type:String,default:Object(r.a)()},url:{type:String,default:"/uploads"},heading:{type:String,default:null},actionLabel:{type:String,default:"global.choose"},nameLabel:{type:String,default:"upload.file"},namesLabel:{type:String,default:"upload.files"},buttonWrapperClasses:{type:String,default:"justify-content-start"},headingClasses:{type:String,default:"mb-0"},buttonClasses:{type:String,default:""},buttonIcon:{type:String,default:"fas fa-upload"},buttonDesign:{type:String,default:"primary"},options:{type:Object,required:!0},autoUpload:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},hideButtonLabel:{type:Boolean,default:!1},hideFileList:{type:Boolean,default:!1},hideResetButton:{type:Boolean,default:!1},hideAfterUpload:{type:Boolean,default:!1},showSelectedFilesCount:{type:Boolean,default:!1}},data:function(){return{isLoading:!1,fileRemoved:!1,actionLabelUpdated:"",files:[],uploadedFiles:[],existingFiles:[],icons:l.b,mimeTypes:l.c}},computed:d(d({},Object(a.c)("config",["configs","vars"])),{},{computedActionLabel:function(){return this.existingFile?"global.change":this.actionLabel}}),watch:{data:function(e){this.existingFiles=e.map((function(e){return d(d({},e),{},{status:null})}))},"options.uuid":{deep:!0,handler:function(e,t){e&&e!==t&&this.reset()}}},methods:{getFileIcon:function(e){return this.icons[e]||"fa-file-alt"},getFileNameIcon:function(e){return this.icons[e]||"fa-file-alt"},generateFilesList:function(e){this.isLoading=!0;var t=null,i=this.$refs.filesInput.files;if(this.options.allowedExtensions&&(t=new RegExp("(."+this.options.allowedExtensions.join("|.")+")$")),this.options.maxNoOfFiles&&i.length+this.existingFiles.length>this.options.maxNoOfFiles)this.$toasted.error(this.$t("upload.max_file_limit_crossed",{number:this.options.maxNoOfFiles}),this.$toastConfig.error);else{for(var s=0;s<i.length;s++)t&&!t.test(i[s].name)?(this.isLoading=!1,this.$toasted.error(this.$t("global.file_not_supported",{attribute:i[s].name.split(".").pop()}),this.$toastConfig.error)):i[s].size>this.configs.system.postMaxSize?(this.isLoading=!1,this.$toasted.error(this.$t("global.file_too_large",{attribute:i[s].name}),this.$toastConfig.error)):this.files.push({uuid:Object(r.a)(),file:i[s],status:"waiting",progress:0});this.isLoading=!1,this.$emit("selected",this.files.length),this.autoUpload&&this.startUploading()}},startUploading:function(){var e=this;if(this.files.filter((function(e){return"waiting"===e.status})).length){var t=[],i=n.a.CancelToken;this.$emit("uploading",this.files.length);for(var s=function(s){var n=e.files[s];if(t[s]=function(e){n.progress=Math.round(100*e.loaded/e.total)},"waiting"===n.status){var a=new FormData;a.append("file",n.file),a.append("mime",n.file.type),a.append("token",e.options.token),a.append("module",e.options.module),a.append("request_uuid",e.requestIdentifier),a.append("first_attachment",0===s),a.append("last_attachment",s===e.files.length-1),e.additionalFormData.objForEach((function(e,t){e&&(_.isObject(e)?a.append(t.snakeCase(),JSON.stringify(e)):a.append(t.snakeCase(),e))})),n.status="uploading";var r=new i((function(e){n.cancel=e}));o.c({url:e.url,data:a},t[s],r).then((function(t){t.upload?e.uploadedFiles.push(t.upload):t.attachments&&e.uploadedFiles.push(t.attachments),n.uuid=t.upload?t.upload.uuid:t.uuid,n.status="justUploaded",delete n.cancel,setTimeout((function(){n.status="uploaded",e.hideAfterUpload&&e.files.splice(e.files.findIndex((function(e){return e.uuid===n.uuid})),1)}),2e3),e.$emit("updated",t),e.checkUploadStatus(t)})).catch((function(t){if(e.$emit("error",t),t.response&&t.response.data){var i=t.response.data||{},s=i.errors?formUtil.assignErrors(i.errors):{};n.error=s.message,e.$toasted.error(s.message,e.$toastConfig.error),n.status="error",setTimeout((function(){e.files.splice(e.files.findIndex((function(e){return e.uuid===n.uuid})),1)}),3e3),e.$emit("updated",t),e.checkUploadStatus()}else n.status="cancelled",setTimeout((function(){e.files.splice(e.files.findIndex((function(e){return e.uuid===n.uuid})),1)}),3e3)}))}},a=0;a<this.files.length;a++)s(a)}},removeFile:function(e,t){var i=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];formUtil.confirmAction().then((function(t){t.value&&(i.isLoading=!0,o.a({url:i.url+"/"+e.uuid,data:{token:i.options.token,module:i.options.module}}).then((function(t){e.status="removed",setTimeout((function(){s?i.existingFiles.splice(i.existingFiles.findIndex((function(t){return t.uuid===e.uuid})),1):i.files.splice(i.files.findIndex((function(t){return t.uuid===e.uuid})),1)}),3e3),i.isLoading=!1,i.$toasted.success(t.message,i.$toastConfig.success),i.$emit("selected",i.files.length),i.$emit("updated",t),i.checkUploadStatus()})).catch((function(t){var s=t.response.data||{},n=s.errors?formUtil.assignErrors(s.errors):{};i.$toasted.error(n.message,i.$toastConfig.error),e.error=n.message,e.status="removeError"})))}))},checkUploadStatus:function(e){for(var t=!0,i=0;i<this.files.length;i++)"justUploaded"!==this.files[i].status&&"uploaded"!==this.files[i].status&&(t=!1);t?this.$emit("uploaded",this.uploadedFiles):this.$emit("error")},reset:function(){this.isLoading=!1,this.fileRemoved=!1,this.actionLabelUpdated="",this.files=[],this.uploadedFiles=[];var e=this.$refs.filesInput;e.type="text",e.type="file",this.$emit("selected",this.files.length)},startUpload:function(){this.files.length?this.startUploading():this.$emit("noNeed")}},mounted:function(){c.a.$off("START_UPLOAD",this.startUpload),c.a.$on("START_UPLOAD",this.startUpload),c.a.$off("RESET_UPLOAD",this.reset),c.a.$on("RESET_UPLOAD",this.reset),this.existingFiles=this.data.map((function(e){return d(d({},e),{},{status:null})}))},filters:{decimal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(e).toFixed(t)}},destroyed:function(){c.a.$off("START_UPLOAD",this.startUpload),c.a.$off("RESET_UPLOAD",this.reset)}},g=i("KHd+"),f=Object(g.a)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sm-uploader file-uploader"},[i("div",{staticClass:"file-uploader-form"},[i("div",{class:["file-selector d-flex",e.buttonWrapperClasses]},[e.heading?i("h5",{class:["title-desc",e.headingClasses]},[e._v("\n                "+e._s(e.heading)+"\n            ")]):e._e(),e._v(" "),i("label",{class:["btn","btn-"+e.buttonDesign,e.buttonClasses]},[i("input",{ref:"filesInput",staticClass:"selector-input",attrs:{name:"filesInput",type:"file",id:"filesInput",multiple:e.multiple},on:{change:e.generateFilesList}}),e._v(" "),i("span",{staticClass:"button-icon"},[i("i",{class:e.buttonIcon})]),e._v(" "),e.hideButtonLabel?e._e():i("span",{staticClass:"button-label"},[e._v(e._s(e.$t(e.computedActionLabel,{attribute:e.$t(e.namesLabel)})))]),e._v(" "),e.showSelectedFilesCount&&e.files.length?i("span",{staticClass:"button-label bracketed"},[e._v(e._s(e.files.length))]):e._e()]),e._v(" "),e.hideFileList&&!e.hideResetButton&&e.files.length?i("button",{class:["btn","btn-"+e.buttonDesign,e.buttonClasses],attrs:{type:"button"},on:{click:e.reset}},[e._m(0)]):e._e()])]),e._v(" "),e.existingFiles.length||e.files.length?i("div",{class:["files-list-wrapper",{"d-none":e.hideFileList}]},[i("ul",{staticClass:"files-list"},[e._l(e.existingFiles,(function(t,s){return i("li",{staticClass:"file-details-row"},[i("div",{staticClass:"file-icon"},[i("span",[i("i",{class:["far",e.getFileIcon(t.mime)]})])]),e._v(" "),i("div",{staticClass:"file-details"},[i("h6",[e._v(e._s(t.filename))]),e._v(" "),t.error?i("p",{staticClass:"text-danger"},[e._v("\n                        "+e._s(t.error)+"\n                    ")]):i("p",[i("span",[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.type")))]),e._v(": "+e._s(e.mimeTypes[t.mime]||t.mime||"Unknown"))]),e._v(" "),i("span",{staticClass:"ml-1"},[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.size")))]),e._v(": "+e._s(e._f("decimal")(t.size/1024,0))+" KB")])])]),e._v(" "),i("div",{class:["status-wrapper",{"actions-wrapper":!t.status||"removeError"===t.status}]},[i("transition",{staticClass:"transition-wrapper",attrs:{appear:"",tag:"div",name:"actions",mode:"out-in"}},["removed"===t.status?i("div",{staticClass:"status-removed-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v("Removed!")]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-trash"})])]):t.status&&"removeError"!==t.status?e._e():i("div",{staticClass:"actions-buttons"},["removeError"===t.status?i("label",{staticClass:"status-text text-danger"},[e._v("Error!")]):e._e(),e._v(" "),"removeError"===t.status?i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-exclamation-triangle"})]):e._e(),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"remove-btn",attrs:{type:"button",title:e.$t("global.remove",{attribute:e.$t(e.nameLabel)})},on:{click:function(i){return e.removeFile(t,s,!0)}}},[i("i",{staticClass:"fas fa-trash"})])])])],1)])})),e._v(" "),e._l(e.files,(function(t,s){return i("li",{staticClass:"file-details-row"},[i("div",{staticClass:"file-icon"},[i("span",[i("i",{class:["far",e.getFileIcon(t.file.type)]})])]),e._v(" "),i("div",{staticClass:"file-details"},[i("h6",[e._v(e._s(t.file.name))]),e._v(" "),t.error?i("p",{staticClass:"text-danger"},[e._v("\n                        "+e._s(t.error)+"\n                    ")]):i("p",[i("span",[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.type")))]),e._v(": "+e._s(e.mimeTypes[t.file.type]||"Unknown"))]),e._v(" "),i("span",{staticClass:"ml-1"},[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.size")))]),e._v(": "+e._s(e._f("decimal")(t.file.size/1024,0))+" KB")])])]),e._v(" "),i("div",{class:["status-wrapper",{"actions-wrapper":"uploaded"===t.status||"removeError"===t.status}]},[i("transition",{staticClass:"transition-wrapper",attrs:{appear:"",tag:"div",name:"actions",mode:"out-in"}},["uploading"===t.status?i("div",{staticClass:"status-uploading-wrapper"},[i("label",{staticClass:"status-action",on:{click:t.cancel}},[e._v(e._s(e.$t("general.cancel")))]),e._v(" "),i("progress-ring",{attrs:{value:t.progress,"stroke-color":e.vars.loaderColor}})],1):"justUploaded"===t.status?i("div",{staticClass:"status-uploaded-wrapper"},[i("label",{staticClass:"status-text text-success"},[e._v("Uploaded!")]),e._v(" "),i("span",{staticClass:"status-icon text-success"},[i("i",{staticClass:"fas fa-check"})])]):"cancelled"===t.status?i("div",{staticClass:"status-cancelled-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v("Cancelled!")]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-times"})])]):"removed"===t.status?i("div",{staticClass:"status-removed-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v("Removed!")]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-trash"})])]):"error"===t.status?i("div",{staticClass:"status-error-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v("Error!")]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-exclamation-triangle"})])]):"uploaded"===t.status||"removeError"===t.status?i("div",{staticClass:"actions-buttons"},["removeError"===t.status?i("label",{staticClass:"status-text text-danger"},[e._v("Error!")]):e._e(),e._v(" "),"removeError"===t.status?i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-exclamation-triangle"})]):"uploaded"===t.status?i("label",{staticClass:"status-text text-success"},[e._v("Uploaded!")]):e._e(),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"remove-btn",attrs:{type:"button",title:e.$t("global.remove",{attribute:e.$t(e.nameLabel)})},on:{click:function(i){return e.removeFile(t,s)}}},[i("i",{staticClass:"fas fa-trash"})])]):e._e()])],1)])}))],2)]):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"button-icon"},[t("i",{staticClass:"fas fa-times"})])}],!1,null,null,null);t.a=f.exports},PLx1:function(e,t,i){(e.exports=i("I1BE")(!1)).push([e.i,".settings-wrapper{flex-direction:column}.settings-wrapper,.settings-wrapper .settings{display:flex;height:100%;max-height:100%;overflow:hidden}.settings-wrapper .settings{flex-grow:1;justify-content:stretch;align-items:stretch;position:relative;padding:.85rem;flex-direction:row}.settings-wrapper .settings .switch-wrapper>.input-group-material-label{padding-left:0}.settings-wrapper .settings-footer{box-shadow:0 -2px 6px 0 rgba(0,0,0,.4);z-index:1}",""])},aWil:function(e,t,i){"use strict";i("nibG")},adPT:function(e,t,i){"use strict";var s={name:"animated-number",props:{number:{type:Number,default:0},delay:{type:Number,default:20}},data:function(){return{displayNumber:0,interval:!1,initialInterval:!1}},methods:{changeNumberFn:function(){if(this.displayNumber!=this.number){var e=(this.number-this.displayNumber)/10;e=e>=0?Math.ceil(e):Math.floor(e),this.displayNumber=this.displayNumber+e}}},watch:{number:function(){clearInterval(this.interval),this.number!=this.displayNumber&&(this.interval=window.setInterval(this.changeNumberFn,this.delay))}},mounted:function(){this.displayNumber=0,clearInterval(this.initialInterval),this.number!=this.displayNumber&&(this.initialInterval=window.setInterval(this.changeNumberFn,this.delay))}},n=i("KHd+"),o=Object(n.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v(this._s(this.displayNumber))])}),[],!1,null,null,null);t.a=o.exports},akQX:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"e",(function(){return u})),i.d(t,"c",(function(){return h})),i.d(t,"b",(function(){return g})),i.d(t,"d",(function(){return f}));var s=i("V0LQ");navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||alert($t("misc.get_user_media_not_supported")),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=function(e){navigator.mediaDevices.enumerateDevices().then(e)});var n="https:"===location.protocol,o=[],a=!1;("undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack||navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)&&(a=!0);var r={hasMicrophone:!1,hasWebcam:!1,isMicrophoneAlreadyCaptured:!1,isWebcamAlreadyCaptured:!1,permissionError:!0},c=function(e){a&&(!navigator.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(navigator.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!navigator.enumerateDevices&&navigator.enumerateDevices&&(navigator.enumerateDevices=navigator.enumerateDevices.bind(navigator)),navigator.enumerateDevices?(o=[],navigator.enumerateDevices((function(t){t.forEach((function(e){var t,i={};for(var s in e)i[s]=e[s];"audio"===i.kind&&(i.kind="audioinput"),"video"===i.kind&&(i.kind="videoinput"),o.forEach((function(e){e.id===i.id&&e.kind===i.kind&&(t=!0)})),t||(i.deviceId||(i.deviceId=i.id),i.id||(i.id=i.deviceId),i.label?("videoinput"!==i.kind||r.isWebcamAlreadyCaptured||(r.isWebcamAlreadyCaptured=!0),"audioinput"!==i.kind||r.isMicrophoneAlreadyCaptured||(r.isMicrophoneAlreadyCaptured=!0)):(i.label="Please invoke getUserMedia once.",n||(i.label="HTTPs is required to get label of this "+i.kind+" device.")),"audioinput"===i.kind&&(r.hasMicrophone=!0),"videoinput"===i.kind&&(r.hasWebcam=!0),o.push(i))})),e&&e(r)}))):e&&e(r))},l=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c((function(i){if(i){var s=!1;e&&!i.hasMicrophone&&(s=!0),t&&!i.hasWebcam&&(s=!0),s&&d(i)}}))},u=function(e){var t={icon:"error",footer:$t("misc.solve_and_refresh")};if(e)return"NotAllowedError"===e.name||"PermissionDeniedError"===e.name?(t.title=$t("misc.media.permission_denied"),t.text=$t("misc.media.permission_denied_text")):"NotFoundError"===e.name?(t.title=$t("misc.media.not_found"),t.text=$t("misc.media.not_found_text")):"NotReadableError"===e.name||"OverconstrainedError"===e.name?(t.title=$t("misc.media.unreadable"),t.text=$t("misc.media.unreadable_text")):"SecurityError"!==e.name&&"TypeError"!==e.name||(t.title=$t("misc.media.security"),t.text=$t("misc.media.security_text")),{msg:t,alert:swtAlert.fire(t)}},d=function(e){var t=[];e.hasMicrophone||t.push("Microphone"),e.hasWebcam||t.push("WebCam");var i={icon:"error",title:$t("misc.media.missing"),text:$t("misc.media.missing_text",{attribute:t.join(", ")}),footer:$t("misc.solve_and_refresh")};swtAlert.fire(i)},m=function(e){if((e=Object.assign({},{type:null,loop:!1,duration:1e3},e)).type){var t=new Audio;return t.preload="auto",t.autoplay=!0,t.loop=e.loop,t.src="/sound/".concat(e.type,".mp3"),t.play().then((function(){setTimeout((function(){t&&t.pause()}),e.duration)})).catch((function(e){console.error(e)})),t}},h=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!document.hasFocus()||e)return m({type:"calling",loop:!0,duration:3e4})},g=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!document.hasFocus()||e)return m({type:"message",duration:3e3})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=document.querySelector("link[rel=canonical]")?document.querySelector("link[rel=canonical]").href:document.location.href,n=e.url?e.url:i;if(navigator.share)navigator.share({title:e.title?e.title:document.title,url:n}).then((function(){console.log("Thanks for sharing!")})).catch(console.error);else{var o={showCancelButton:!0,confirmButtonText:$t("misc.share_alert.confirm_btn"),cancelButtonText:$t("misc.share_alert.cancel_btn")};e.alertTitle&&(o.title=e.alertTitle),e.alertHtml?o.html=e.alertHtml:o.text=$t("misc.share_alert.text"),swtAlert.fire(o).then((function(e){e.value&&(Object(s.c)(n),setTimeout((function(){t()}),500))}))}}},bdEB:function(e,t,i){"use strict";var s=i("L2JU");function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var r={props:{place:{type:String,default:"normal"},size:{type:String,default:"normal"},appLogo:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},assets:{type:Object}},data:function(){return{appLogoText:window.kmenv.name}},computed:o(o({},Object(s.c)("config",["configs","uiConfigs"])),{},{orgLogo:function(){if(this.appLogo||!this.configs.assets&&!this.assets)return"navbar"===this.place||"sidebar"===this.place||"dark"===this.place?"/images/logo-light.png":"/images/logo.png";var e=this.assets&&this.assets.logo?this.assets.logo:this.configs.assets.logo?this.configs.assets.logo:"/images/logo.png";return(this.assets&&this.assets.logoLight||this.configs.assets.logoLight)&&("navbar"===this.place&&this.uiConfigs.topNavbarLogoLight||"sidebar"===this.place&&this.uiConfigs.leftSidebarLogoLight||"dark"===this.place)&&(e=this.assets&&this.assets.logoLight?this.assets.logoLight:this.configs.assets.logoLight),e},appTitle:function(){return this.configs.basic?this.configs.basic.orgName:window.kmenv.name}})},c=i("KHd+"),l=Object(c.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a",{class:["logo",e.place+"-logo",e.size+"-logo",e.orgLogo?"org-logo":"app-logo",e.inline?"inline-logo":""],attrs:{href:"/"}},[e.orgLogo?i("img",{staticClass:"logo-icon",attrs:{src:e.orgLogo,alt:e.appTitle}}):[i("span",{staticClass:"logo-text",attrs:{title:e.appTitle}},[e._v(e._s(e.appLogoText))])]],2)}),[],!1,null,null,null);t.a=l.exports},"eC/g":function(e,t,i){"use strict";i("3ugI")},nibG:function(e,t,i){var s=i("8Cr2");"string"==typeof s&&(s=[[e.i,s,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(s,n);s.locals&&(e.exports=s.locals)},susR:function(e,t,i){(t=e.exports=i("I1BE")(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Muli:300,400,600,700,800,900);",""]),t.push([e.i,".files-sharing-box{position:relative;width:100vw;min-height:30vh}.files-sharing-box .files-container{width:100%;height:100%;background-color:#fff}.files-sharing-box .files-container .files-wrapper{display:flex;flex-direction:column;justify-content:space-between;padding:.5rem}@media (min-width:576px){.files-sharing-box{position:fixed;top:0;left:0;width:35vw;height:100vh;z-index:1}.files-sharing-box .files-container{width:100%;height:100%;background-color:hsla(0,0%,100%,.85);padding-bottom:60px;opacity:.85}.files-sharing-box .files-container .files-wrapper{display:flex;flex-direction:column;justify-content:space-between;padding:1.5rem}.files-sharing-box:hover .files-container{opacity:1}}",""])},t0ug:function(e,t,i){"use strict";i.r(t);var s=i("0xtn"),n=i("L2JU"),o=i("gFX4"),a=i.n(o),r=i("zWga"),c=i.n(r),l=i("qe5e"),u=(i("vwBX"),i("l4sq"),i("k7+O")),d=i.n(u),m=(i("0D4p"),i("akQX")),h=i("V0LQ"),g=(i("lUM2"),i("PCDP")),f=i("/MoV"),p=(i("1TzJ"),i("kogc"));function v(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function C(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function w(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?C(Object(i),!0).forEach((function(t){y(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):C(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var O=document.createElement("script");O.setAttribute("src","/js/EBML.js"),document.head.appendChild(O),window.io=a.a;var S={components:{RTCMultiConnection:c.a},data:function(){return{uuid:null,entity:null,isLoading:!1,prevRoute:null,fullScreenItemId:null,meetingRoomId:null,initUrl:"meetings",fallBackRoute:"appMeetingList",newMessages:!1,roomIdAlive:!1,showFlipClock:!0,duplicateTab:!1,fullScreenInOn:!1,permissionRejected:!1,needStreamAddOrReplace:!1,membersLive:[],videoList:[],mediaConfigFormData:{},mediaConfigurations:{selectedAudioInput:null,selectedAudioOutput:null,selectedVideoInput:null,activeAudioInput:null,activeVideoInput:null,activeFacingMode:null,selectedResolution:"Auto",facingMode:"Auto",frameRate:"Auto",bandwidth:{audio:256,video:512,screen:300},recording:{type:"video",mimeType:"video/webm",timeSlice:1e3,disableLogs:!1}},mediaDevices:{audioInput:[],audioOutput:[],videoInput:[],resolutions:[{label:"Auto",constraints:{}},{label:"240p",constraints:{width:{max:426,ideal:426},height:{max:240,ideal:240}}},{label:"360p",constraints:{width:{max:640,ideal:640},height:{max:360,ideal:360}}},{label:"720p",constraints:{width:{max:1280,ideal:1280},height:{max:720,ideal:720}}},{label:"1080p",constraints:{width:{max:1920,ideal:1920},height:{max:1080,ideal:1080}}},{label:"4K",constraints:{width:{max:4096,ideal:4096},height:{max:2160,ideal:2160}}}],facingModes:[{uuid:"Auto",label:"Auto"},{uuid:"user",label:"User"},{uuid:"environment",label:"Environment"}],frameRates:[{uuid:"Auto",label:"Auto"},{uuid:30,label:"30 fps"},{uuid:60,label:"60 fps"}]},socketURL:"aHR0cHM6Ly9zaWduYWwua29kZW1pbnQuaW46OTAwMS8=",rtcmConnection:null,localVideo:null,localScreenStreamid:null,audioConstraints:{},videoConstraints:{},pageConfigs:{hasAgenda:!0,enableChat:!0,enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!0,showDeviceConfig:!0,enableScreenSharing:!0,enableRecording:!0,enableHandGesture:!0,footerAutoHide:!1,disableScroll:!1,muteParticipantsOnStart:!1,enableFileSharing:!0,layout:"fullpage"},meetingRulesHost:{session:{audio:!1,video:!1,screen:!1,data:!1,oneway:!1},mediaConstraints:{audio:!1,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},autoCloseEntireSession:!1},meetingRulesGuest:{session:{audio:!1,video:!1,screen:!1,data:!1,oneway:!1},mediaConstraints:{audio:!1,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},autoCloseEntireSession:!1},snoozeOpts:[{uuid:5,name:5,type:"m"},{uuid:10,name:10,type:"m"},{uuid:15,name:15,type:"m"},{uuid:30,name:30,type:"m"},{uuid:60,name:1,type:"h"}],isHandUp:!1,recording:!1,recorded:!1,recordingPaused:!1,recordingDuration:null,showDevicesModal:!1,showFileSharing:!1,showAgenda:!0,fileSharingConnection:null}},computed:w(w({},Object(n.c)("config",["configs","uiConfigs","vars"])),{},{user:function(){return{uuid:this.userUuid,username:this.username,name:this.profile.name}},hasVideos:function(){return this.videoList&&this.videoList.length>0?this.videoList.length:0},hasVideosClasses:function(){if(!this.hasVideos)return"has-no-video";var e="has-videos "+(this.pageConfigs.disableScroll?"disable-scroll ":"")+"has-".concat(this.hasVideos,"-videos "),t=this.hasVideos>15?4:this.hasVideos>8?3:this.hasVideos>3?2:1,i=this.hasVideos>20?6:16===this.hasVideos?4:this.hasVideos>12?5:this.hasVideos>9?4:9===this.hasVideos?3:this.hasVideos>6?4:this.hasVideos>4?3:4===this.hasVideos?2:this.hasVideos;return e+(this.hasVideos>20?"has-gt-20-videos":this.hasVideos>12?"has-gt-12-videos":this.hasVideos>4?"has-gt-4-videos":this.hasVideos>1?"has-2-3-videos":"has-1-video")+" has-".concat(t,"-rows has-").concat(i,"-per-row")},liveMembersCount:function(){return this.membersLive.length-1},startDateTimeIsFuture:function(){var e=this.entity&&this.showFlipClock&&this.isStartDateTimeInFuture();return e?this.startCountDown():window.countdownInterval&&clearInterval(window.countdownInterval),e}}),watch:{liveMembersCount:function(e,t){window.isLiveMeetingDestroyed||e===t||this.meetingRoomCreated(this.entity)}},methods:w(w(w({},Object(n.b)("config",["SetUiConfig"])),Object(n.b)("common",["Init","Get","Custom","GetPreRequisite"])),{},{shareURL:function(){var e=this;if(this.entity){this.$gaEvent("engagement","shareURL","Shown");var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");t+=this.entity.identifier?"/m/".concat(this.entity.identifier):"/app/live/meetings/".concat(this.entity.uuid);var i=this.entity.identifier?"".concat($t("meeting.meeting_code"),': <strong class="ml-2"> ').concat(this.entity.identifier,"</strong>"):null;Object(m.d)({title:$t("meeting.user_inviting_msg",{attribute:this.user.name}),alertTitle:i,alertHtml:"".concat($t("misc.share_alert.text"),"<br>")+"<small class='text-muted'>".concat(t,"</small><br>"),url:t},(function(){e.$gaEvent("engagement","shareURL","Copied"),e.$toasted.success($t("meeting.url_has_been_copied"),e.$toastConfig)}))}},isStartDateTimeInFuture:function(){return this.entity&&this.entity.startDateTime&&moment(this.entity.startDateTime,this.vars.serverDateTimeFormat).isAfter(moment())},startCountDown:function(){var e=this;window.countdownInterval&&clearInterval(window.countdownInterval),window.countdownInterval=window.setInterval((function(){e.isStartDateTimeInFuture()?e.showFlipClock=!0:(e.showFlipClock&&!document.hasFocus()&&Object(m.b)(),e.showFlipClock=!1)}),1e3)},stopKeepAlivePolling:function(){window.meetingKeepAliveTimer&&clearInterval(window.meetingKeepAliveTimer)},startKeepAlivePolling:function(){var e=this;window.meetingKeepAliveTimer&&clearInterval(window.meetingKeepAliveTimer),"live"===this.entity.status&&(window.meetingKeepAliveTimer=setInterval((function(){e.Custom({url:"/".concat(e.initUrl,"/").concat(e.uuid,"/keep-alive"),method:"post"}).then((function(e){})).catch((function(e){}))}),6e5))},startRecording:function(){var e=this;this.$gaEvent("engagement","startRecording"),this.recording=!0,this.recorded=!1;var t=this.rtcmConnection.recorder;t.startRecording();var i=(new Date).getTime();window.recordingDurationInterval&&(this.recordingDuration=null,clearInterval(window.recordingDurationInterval)),window.recordingDurationInterval=window.setInterval((function(){e.recordingDuration=Object(h.b)(((new Date).getTime()-i)/1e3)}),1e3);var s=t.getInternalRecorder();this.rtcmConnection.streamEvents.selectAll().forEach((function(e){"local"!==e.type&&s.addStreams(e.stream)})),t=null},pauseRecording:function(){this.$gaEvent("engagement","pauseRecording"),this.recordingPaused=!0;var e=this.rtcmConnection.recorder;if(!e)return alert("No recorder found!");e.pauseRecording(),window.recordingDurationInterval&&clearInterval(window.recordingDurationInterval),e=null},resumeRecording:function(){var e=this;this.$gaEvent("engagement","resumeRecording"),this.recordingPaused=!1;var t=this.rtcmConnection.recorder;if(!t)return alert("No recorder found!");t.resumeRecording();var i=(new Date).getTime(),s=Object(h.f)(this.recordingDuration);window.recordingDurationInterval&&clearInterval(window.recordingDurationInterval),window.recordingDurationInterval=window.setInterval((function(){e.recordingDuration=Object(h.b)(s+((new Date).getTime()-i)/1e3)}),1e3),t=null},stopRecording:function(){var e=this;this.$gaEvent("engagement","stopRecording"),this.recording=!1,this.recorded=!0;var t=this.rtcmConnection.recorder;if(!t)return alert("No recorder found!");t.stopRecording((function(){window.recordingDurationInterval&&(e.recordingDuration=null,clearInterval(window.recordingDurationInterval)),l.getSeekableBlob(t.getBlob(),(function(i){var s=URL.createObjectURL(i),n=document.createElement("a");l.invokeSaveAsDialog(i,"meeting_record_"+moment().format(e.vars.serverDateTimeFormat)+".webm"),n.style.display="none",n.href=s,n.download="meeting_record_"+moment().format(e.vars.serverDateTimeFormat)+".webm",document.body.appendChild(n),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(n),e.recorded=!1}),100),t.reset(),t=null}))}))},toggleHandUp:function(){var e=this;this.$gaEvent("engagement","toggleHandUp"),window.lowerHandTimer&&clearTimeout(window.lowerHandTimer);var t=this.$refs.videos.find((function(t){return t.id===e.localVideo.id})),i=this.videoList.findIndex((function(t){return t.id===e.localVideo.id}));if(t&&t.srcObject){var s=t.srcObject;this.isHandUp=!this.isHandUp,this.videoList[i].isHandUp=this.isHandUp,window.meetingChannel.whisper("RemoteHandToggled",{isHandUp:this.isHandUp,streamid:s.streamid}),this.isHandUp&&(window.lowerHandTimer=setTimeout((function(){e.toggleHandUp()}),3e4)),this.rtcmConnection.extra.isHandUp=this.isHandUp,this.rtcmConnection.updateExtraData()}else this.localVideo=null},toggleAudio:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.$refs.videos.find((function(e){return e.id===t.localVideo.id})),n=this.videoList.findIndex((function(e){return e.id===t.localVideo.id}));if(s&&s.srcObject){var o=s.srcObject,a=o.getAudioTracks();a.forEach((function(e){t.pageConfigs.enableAudio||i?(t.pageConfigs.enableAudio=!1,e.enabled=!1,t.videoList[n].audioMuted=!0):(t.pageConfigs.enableAudio=!0,e.enabled=!0,t.videoList[n].audioMuted=!0)})),window.meetingChannel.whisper("RemoteMutedUnmuted",{audioEnabled:this.pageConfigs.enableAudio,streamid:o.streamid}),this.rtcmConnection.extra.audioMuted=!this.pageConfigs.enableAudio,this.rtcmConnection.updateExtraData()}else this.localVideo=null},toggleVideo:function(){var e=this,t=this.$refs.videos.find((function(t){return t.id===e.localVideo.id})),i=this.videoList.findIndex((function(t){return t.id===e.localVideo.id}));if(t&&t.srcObject){var s=t.srcObject;s.getVideoTracks().forEach((function(t){e.pageConfigs.enableVideo?(e.pageConfigs.enableVideo=!1,t.enabled=!1,e.videoList[i].videoMuted=!0):(e.pageConfigs.enableVideo=!0,t.enabled=!0,e.videoList[i].videoMuted=!1)})),window.meetingChannel.whisper("RemoteMutedUnmuted",{videoEnabled:this.pageConfigs.enableVideo,streamid:s.streamid}),this.rtcmConnection.extra.videoMuted=!this.pageConfigs.enableVideo,this.rtcmConnection.updateExtraData()}else this.localVideo=null},toggleRemoteAudio:function(e,t){e.muted?(this.videoList[t].muted=!1,this.$refs.videos[t].muted=!1):(this.videoList[t].muted=!0,this.$refs.videos[t].muted=!0)},toggleRemoteAudioSource:function(e,t){window.meetingChannel.whisper("MuteUnmuteRemote",e)},toggleEleFullScreen:function(e,t){var i=this,s=this.$refs.videoListEle;this.fullScreenItemId=e.id,this.$fullscreen.toggle(s,{wrap:!1,callback:function(e){i.fullScreenInOn=e}})},toggleFullScreen:function(e){d.a.isEnabled&&(e?d.a.request():d.a.exit())},toggleFooterAutoHide:function(){this.pageConfigs.footerAutoHide=!this.pageConfigs.footerAutoHide,this.$gaEvent("engagement","toggleFooterAutoHide")},toggleLayout:function(e){this.pageConfigs.layout=e||this.pageConfigs.layout,this.pageConfigs.disableScroll="grid"===this.pageConfigs.layout||(this.entity.config&&this.entity.config.hasOwnProperty("disableScroll")?this.entity.config.disableScroll:this.pageConfigs.disableScroll),this.$gaEvent("engagement","toggleLayout",e)},toggleFileSharing:function(){this.showFileSharing=!this.showFileSharing,this.$gaEvent("engagement","toggleFileSharing")},toggleAgenda:function(){this.showAgenda=!this.showAgenda,this.$gaEvent("engagement","toggleAgenda")},changeFocus:function(e){e.local||this.videoList.forEach((function(t){t.maximized=t.id===e.id}))},kickRemoteUser:function(e,t){var i=this;formUtil.confirmAction().then((function(t){if(t.value){var s=i.$refs.videos.find((function(t){return t.id===e.id}));if(s&&s.srcObject){var n=s.srcObject;i.rtcmConnection.removeStream(n.streamid),window.meetingChannel.whisper("BanAttendee",e),i.Custom({url:"/".concat(i.initUrl,"/").concat(i.uuid,"/invitees/").concat(e.extra.uuid,"/block"),method:"post"}).then((function(e){i.$toasted.success(e.message,i.$toastConfig)})).catch((function(e){formUtil.handleErrors(e)}))}}else t.dismiss,p.c.DismissReason.cancel}))},switchCamera:function(){this.mediaConfigurations.facingMode="user"===this.mediaConfigurations.facingMode?"environment":"user",this.applyMediaConstraints()},stopStream:function(e){var t=this.$refs.videos.find((function(t){return t.id===e.id}));t&&t.srcObject&&t.srcObject.getTracks().forEach((function(e){return e.stop()}))},afterJoiningChannel:function(e){this.membersLive=e},newMemberJoining:function(e){this.membersLive.push(e)},memberLeaving:function(e){this.membersLive=this.membersLive.filter((function(t){return t.uuid!==e.uuid}))},meetingStatusChanged:function(e){if(e.uuid===this.entity.uuid){if(this.entity.status===e.status&&!e.delayed)return;this.entity.status=e.status,this.entity.startDateTime=e.startDateTime;var t=e.status;"scheduled"===t&&e.delayed&&(t="delayed");this.$toasted.success($t({live:"meeting.is_live_now",delayed:"meeting.meeting_delayed",cancelled:"meeting.meeting_cancelled",ended:"meeting.meeting_ended"}[t]),this.$toastConfig)}},gotNewMessage:function(){this.configs.chat&&this.configs.chat.enabled&&(this.pageConfigs.showChat&&!this.fullScreenInOn||(this.newMessages=!0,Object(m.b)()))},meetingRoomCreated:function(e){var t=this;this.entity.roomId=e.roomId,this.initMediaAndRtcmConnection(),this.rtcmConnection.checkPresence(this.entity.roomId,(function(e,i){t.roomIdAlive=!!e}))},banAttendee:function(e){this.rtcmConnection.enableLogs&&console.log(e);var t=this.$refs.videos.find((function(t){return t.id===e.id}));if(t&&t.srcObject){var i=t.srcObject;this.rtcmConnection.removeStream(i.streamid)}e.uuid===this.userUuid&&(this.closeConnectionAndStream(),this.getInitialData()),this.$toasted.info($t("meeting.ban_notification"),this.$toastConfig.info)},streamRemoved:function(e){this.rtcmConnection&&e.id&&this.rtcmConnection.removeStream(e.id),this.rtcmOnStreamEnded(e)},meetingEnded:function(e){this.closeConnectionAndStream(),this.getInitialData()},joinChannel:function(){window.meetingChannel=window.Echo.join("Meeting.".concat(this.uuid)),window.meetingChannel.here(this.afterJoiningChannel).joining(this.newMemberJoining).leaving(this.memberLeaving).listen("MeetingStatusChanged",this.meetingStatusChanged).listen("NewMessage",this.gotNewMessage).listenForWhisper("MeetingRoomCreated",this.meetingRoomCreated).listenForWhisper("RemovedStream",this.streamRemoved).listenForWhisper("BanAttendee",this.banAttendee).listenForWhisper("MuteUnmuteRemote",this.rtcmOnMuteUnmuteRemote).listenForWhisper("RemoteMutedUnmuted",this.rtcmOnRemoteMuteUnmuted).listenForWhisper("RemoteHandToggled",this.rtcmOnRemoteHandToggled).listenForWhisper("MeetingEnded",this.meetingEnded)},rtcmOnStream:function(e){var t=this;if(this.rtcmConnection.enableLogs&&this.logEvent("On Stream: ",e),this.rtcmConnection.isInitiator||this.entity.canModerate||"local"===e.type||"live_class"!==this.entity.type.uuid||e.extra.isInitiator){var i=e.streamid,s=this.videoList.find((function(t){return t.id===e.streamid})),n=e.stream.idInstance?JSON.parse(e.stream.idInstance):e.stream;if(n.isScreen&&"local"===e.type)this.localScreenStreamid=e.streamid,e.stream.getTracks().forEach((function(e){e.addEventListener("ended",t.stopSharingScreen)}));if(this.videoList.length>1&&this.recheckLiveParticipants(null),void 0===s){var o=w(w({id:i,streamUserId:e.userid,muted:"local"===e.type},e.extra),{},{extra:e.extra,maximized:"local"===e.type&&!n.isScreen,local:"local"===e.type,screen:this.localScreenStreamid===i,status:!0,hasAudio:n.isAudio||n.audio,hasVideo:n.isVideo||n.video||n.isScreen||n.screen});n.isScreen&&(o.videoMuted=!1),"local"===e.type&&this.localScreenStreamid!==o.id?this.localVideo&&this.needStreamAddOrReplace?o.id=i=this.localVideo.id:(this.localVideo=o,this.videoList.push(o)):this.videoList.push(o)}if(this.autoSetVideoMaximized(),this.pageConfigs.enableRecording){var a=this.rtcmConnection.recorder;if(a){var r=a.getInternalRecorder();this.recording&&r&&r.addStreams(e.stream)}else this.configs.meeting.debugMode?this.mediaConfigurations.recording.disableLogs=!1:this.mediaConfigurations.recording.disableLogs=!0,a=l([e.stream],this.mediaConfigurations.recording),this.rtcmConnection.recorder=a}setTimeout((function(){for(var s=0,n=t.$refs.videos.length;s<n;s++)if(t.$refs.videos[s].id===i){t.$refs.videos[s].srcObject=e.stream;break}"local"===e.type&&t.applyOnStartConfigs()}),500),this.isLoading=!1}},rtcmOnStreamEnded:function(e){this.recheckLiveParticipants(e),this.autoSetVideoMaximized()},rtcmOnMediaError:function(e){var t=this;this.isLoading=!1,window.currentUserMediaRequest&&(window.currentUserMediaRequest.mutex=!1),Object(m.e)(e).alert.then((function(i){"NotFoundError"===e.name||"NotReadableError"===e.name||"OverconstrainedError"===e.name?(t.applyMediaConstraints(!0),t.$toasted.info($t("meeting.media_devices.setup_reset_try_again"),t.$toastConfig.info)):"NotAllowedError"!==e.name&&"PermissionDeniedError"!==e.name||(t.permissionRejected=!0),i.value||(t.isLoading=!1,i.dismiss,p.c.DismissReason.cancel)}))},rtcmOnMute:function(e){this.rtcmConnection.enableLogs&&console.log(e);var t=this.videoList.findIndex((function(t){return t.id===e.streamid})),i=this.$refs.videos.find((function(t){return t.id===e.streamid}));"video"===e.muteType?this.videoList[t].videoMuted=!0:"audio"===e.muteType?this.videoList[t].muted=!0:(this.videoList[t].videoMuted=!0,this.videoList[t].muted=!0,i.srcObject=null)},rtcmOnUnmute:function(e){this.rtcmConnection.enableLogs&&console.log(e);var t=this.videoList.findIndex((function(t){return t.id===e.streamid})),i=this.$refs.videos.find((function(t){return t.id===e.streamid}));"video"===e.unmuteType?this.videoList[t].videoMuted=!1:"audio"===e.unmuteType?this.videoList[t].muted=!1:(this.videoList[t].videoMuted=!1,this.videoList[t].muted=!1,i.srcObject=e)},rtcmOnRemoteMuteUnmuted:function(e){this.rtcmConnection.enableLogs&&console.log(e);var t=this.videoList.findIndex((function(t){return t.id===e.streamid}));this.rtcmConnection.streamEvents[e.streamid].stream;e.hasOwnProperty("audioEnabled")?e.audioEnabled?this.videoList[t].audioMuted=!1:this.videoList[t].audioMuted=!0:e.hasOwnProperty("videoEnabled")&&(e.videoEnabled?this.videoList[t].videoMuted=!1:this.videoList[t].videoMuted=!0)},rtcmOnRemoteHandToggled:function(e){if(this.rtcmConnection.enableLogs&&console.log(e),e&&e.streamid&&this.rtcmConnection.streamEvents[e.streamid]){var t=this.videoList.findIndex((function(t){return t.id===e.streamid}));this.rtcmConnection.streamEvents[e.streamid].stream;e.hasOwnProperty("isHandUp")&&(e.isHandUp?(this.videoList[t].isHandUp=!0,this.$toasted.info($t("meeting.handup_notification",{attribute:this.videoList[t].name}),this.$toastConfig.info)):this.videoList[t].isHandUp=!1)}},rtcmOnMuteUnmuteRemote:function(e){this.rtcmConnection.enableLogs&&console.log(e);var t=this.$refs.videos.find((function(t){return t.id===e.id}));t&&t.srcObject&&this.toggleAudio()},rtcmOnUserIdAlreadyTaken:function(e,t){this.rtcmConnection.userid=t},initMediaAndRtcmConnection:function(){this.rtcmConnection||(this.rtcmConnection=new c.a,this.rtcmConnection.socketURL=window.atob(this.socketURL),this.configs.signal&&this.configs.signal.url&&(this.rtcmConnection.socketURL=this.configs.signal.url),this.rtcmConnection.autoCreateMediaElement=!1,this.configs.meeting&&(this.configs.meeting.debugMode?this.rtcmConnection.enableLogs=!0:this.rtcmConnection.enableLogs=!1,this.configs.meeting.forceTurn&&(this.rtcmConnection.candidates={turn:!0,stun:!1,host:!1})),this.rtcmConnection.onstream=this.rtcmOnStream,this.rtcmConnection.onstreamended=this.rtcmOnStreamEnded,this.rtcmConnection.onmute=this.rtcmOnMute,this.rtcmConnection.onunmute=this.rtcmOnUnmute,this.rtcmConnection.onMediaError=this.rtcmOnMediaError,this.rtcmConnection.onUserIdAlreadyTaken=this.rtcmOnUserIdAlreadyTaken,this.rtcmConnection.setCustomSocketEvent("remoteMutedUnmuted"),this.rtcmConnection.setCustomSocketEvent("remoteHandToggled"),this.fileSharingConnection=this.rtcmConnection),this.getMediaConstraints(),this.rtcmConnection.bandwidth=w({},this.mediaConfigurations.bandwidth),this.rtcmConnection.iceServers=[{urls:["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302"]}],this.configs.iceServers.length&&(this.rtcmConnection.iceServers=v(this.configs.iceServers)),this.rtcmConnection.session=w({},this.meetingRulesHost.session),this.rtcmConnection.sdpConstraints.mandatory=w({},this.meetingRulesHost.mandatory),this.rtcmConnection.mediaConstraints={video:!!this.meetingRulesHost.mediaConstraints.video&&this.videoConstraints,audio:!!this.meetingRulesHost.mediaConstraints.audio&&this.audioConstraints,screen:this.meetingRulesHost.mediaConstraints.screen}},getMediaConstraints:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.needStreamAddOrReplace=!1,t)return this.audioConstraints={sampleSize:16,channelCount:2,echoCancellation:!1},void(this.videoConstraints={width:{min:426,ideal:1280,max:4096},height:{min:240,ideal:720,max:2160}});this.mediaConfigurations.selectedAudioInput&&this.mediaConfigurations.selectedAudioInput.uuid?(this.audioConstraints={deviceId:{ideal:this.mediaConfigurations.selectedAudioInput.uuid}},this.mediaConfigurations.activeAudioInput!==this.audioConstraints.deviceId.ideal&&(this.needStreamAddOrReplace=!0)):this.audioConstraints=!0,this.mediaConfigurations.selectedVideoInput&&this.mediaConfigurations.selectedVideoInput.uuid?(this.videoConstraints={deviceId:{ideal:this.mediaConfigurations.selectedVideoInput.uuid}},this.mediaConfigurations.activeVideoInput!==this.videoConstraints.deviceId.ideal&&(this.needStreamAddOrReplace=!0)):this.videoConstraints={},"Auto"!==this.mediaConfigurations.facingMode?(this.videoConstraints.facingMode=this.mediaConfigurations.facingMode,this.mediaConfigurations.activeFacingMode!==this.videoConstraints.facingMode&&(this.needStreamAddOrReplace=!0)):this.videoConstraints.hasOwnProperty("facingMode")&&(this.mediaConfigurations.activeFacingMode!==this.videoConstraints.facingMode&&(this.needStreamAddOrReplace=!0),delete this.videoConstraints.facingMode),"Auto"!==this.mediaConfigurations.frameRate?this.videoConstraints.frameRate=this.mediaConfigurations.frameRate:this.videoConstraints.hasOwnProperty("frameRate")&&delete this.videoConstraints.frameRate;var i=this.mediaDevices.resolutions.find((function(t){return t.label===e.mediaConfigurations.selectedResolution}));i&&"Auto"!==i.label?(this.videoConstraints.width=i.constraints.width,this.videoConstraints.height=i.constraints.height):(this.videoConstraints.hasOwnProperty("width")&&delete this.videoConstraints.width,this.videoConstraints.hasOwnProperty("height")&&delete this.videoConstraints.height)},applyMediaConstraints:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.rtcmConnection&&this.localVideo&&(this.getMediaConstraints(e),this.rtcmConnection.mediaConstraints={video:!!this.meetingRulesHost.mediaConstraints.video&&this.videoConstraints,audio:!!this.meetingRulesHost.mediaConstraints.audio&&this.audioConstraints,screen:this.meetingRulesHost.mediaConstraints.screen},this.mediaConfigurations.activeAudioInput=this.audioConstraints.deviceId.ideal,this.mediaConfigurations.activeVideoInput=this.videoConstraints.deviceId.ideal,this.mediaConfigurations.activeFacingMode=this.mediaConfigurations.facingMode,this.needStreamAddOrReplace?this.closeConnectionAndStream(!0):this.rtcmConnection.applyConstraints(this.rtcmConnection.mediaConstraints))},closeConnectionAndStream:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.rtcmConnection&&(this.rtcmConnection.attachStreams.forEach((function(e){e.stop()})),this.localVideo&&window.meetingChannel.whisper("RemovedStream",this.localVideo),this.rtcmConnection.getAllParticipants().forEach((function(t){e.rtcmConnection.disconnectWith(t)})),this.rtcmConnection.leave(),this.rtcmConnection.closeSocket(),window.setTimeout((function(){e.localVideo=null,e.localScreenStreamid=null,e.rtcmConnection.recorder=null,e.rtcmConnection=null,t&&e.getOnline()}),500),this.stopKeepAlivePolling()),this.videoList=[]},recheckLiveParticipants:function(e){var t=this,i=[],s=this.rtcmConnection?this.rtcmConnection.getAllParticipants():[];this.videoList.forEach((function(t,n){var o=s.findIndex((function(e){return e===t.streamUserId}));(!e||e&&t.id!==e.streamid)&&(t.local||!t.local&&-1!==o)||(t.status=!1),i.push(t)})),this.videoList=i,setTimeout((function(){t.videoList=t.videoList.filter((function(e){return e.status})),t.autoSetVideoMaximized()}),3e3)},autoSetVideoMaximized:function(){if(this.videoList.length>1){if(-1===this.videoList.findIndex((function(e){return!e.local&&e.maximized&&e.status}))){var e=this.videoList.findIndex((function(e){return!e.local}));-1!==e&&(this.videoList=this.videoList.map((function(t,i){return t.maximized=!1,i===e&&(t.maximized=!0),t})))}}else this.videoList.length&&(this.videoList[0].maximized=!0)},openRoom:function(e){var t=this;this.rtcmConnection.session=w({},this.meetingRulesHost.session),this.getMediaConstraints();var i=this.meetingRulesHost;this.rtcmConnection.mediaConstraints={video:!!i.mediaConstraints.video&&this.videoConstraints,audio:!!i.mediaConstraints.audio&&this.audioConstraints,screen:i.mediaConstraints.screen},this.rtcmConnection.sdpConstraints.mandatory=w({},i.mandatory),this.rtcmConnection.autoCloseEntireSession=i.autoCloseEntireSession,this.rtcmConnection.extra.isInitiator=!0,this.rtcmConnection.open(e,(function(i,s,n){t.logEvent("Room Opened: ",s),t.isLoading=!1,n?formUtil.handleErrors(n):!0===i&&(t.updatePageConfigs(!0),window.meetingChannel.whisper("MeetingRoomCreated",{roomId:e}),t.$toasted.success($t("meeting.meeting_created"),t.$toastConfig))}))},joinRoom:function(e){var t=this;this.rtcmConnection.session=w({},this.meetingRulesGuest.session),this.getMediaConstraints();var i=this.entity.canModerate?this.meetingRulesHost:this.meetingRulesGuest;this.rtcmConnection.mediaConstraints={video:!!i.mediaConstraints.video&&this.videoConstraints,audio:!!i.mediaConstraints.audio&&this.audioConstraints,screen:i.mediaConstraints.screen},this.rtcmConnection.sdpConstraints.mandatory=w({},i.mandatory),this.rtcmConnection.autoCloseEntireSession=i.autoCloseEntireSession,this.rtcmConnection.extra.isInitiator=this.entity.canModerate,this.rtcmConnection.join(e,(function(e,i,s){t.logEvent("Room Joined: ",i),t.isLoading=!1,!1===e||s?formUtil.handleErrors(s):(t.updatePageConfigs(t.entity.canModerate),t.$toasted.success($t("meeting.meeting_joined"),t.$toastConfig))}))},applyOnStartConfigs:function(){var e=this;!this.rtcmConnection.extra.isInitiator&&this.pageConfigs.muteParticipantsOnStart&&window.setTimeout((function(){e.toggleAudio(null,!0)}),1e3)},shareScreen:function(){try{this.rtcmConnection.addStream({screen:!0})}catch(e){}},stopSharingScreen:function(){var e=this;this.isLoading=!0;var t=this.$refs.videos.find((function(t){return t.id===e.localScreenStreamid}));t&&t.srcObject?(t.srcObject.getTracks().forEach((function(t){t.removeEventListener("ended",e.stopSharingScreen),t.enabled=!1,t.stop()})),this.rtcmConnection.removeStream(this.localScreenStreamid),window.meetingChannel.whisper("RemovedStream",t.srcObject),this.localScreenStreamid=null,this.isLoading=!1):(this.localScreenStreamid=null,this.isLoading=!1)},getOnline:function(){var e=this;this.isLoading=!0,this.showAgenda=!1;this.entity.status;this.$gaEvent("engagement","meeting_getOnline"),this.initMediaAndRtcmConnection(),this.Custom({url:"/".concat(this.initUrl,"/").concat(this.uuid,"/join"),method:"post"}).then((function(t){e.meetingRoomId=t.meeting.roomId,t.meeting=e.updateMeetingTimezone(t.meeting),e.entity=t.meeting,e.rtcmConnection.extra={username:e.user.username,name:e.user.name,uuid:e.user.uuid,image:e.profile.image,audioMuted:!e.pageConfigs.enableAudio,videoMuted:!e.pageConfigs.enableVideo,isHandUp:e.isHandUp,isInitiator:!1},e.rtcmConnection.enableLogs&&(console.log("rtcmConnection",e.rtcmConnection),console.log("mediaConfigurations",e.mediaConfigurations),console.log("mediaDevices",e.mediaDevices),console.log("pageConfigs",e.pageConfigs),console.log("videoConstraints",e.videoConstraints),console.log("audioConstraints",e.audioConstraints),console.log("meetingRulesHost",e.meetingRulesHost),console.log("meetingRulesGuest",e.meetingRulesGuest),console.log("rtcmConnection-ExtraData",e.rtcmConnection.extra)),e.rtcmConnection.checkPresence(e.meetingRoomId,(function(t,i){!0===t?e.joinRoom(e.meetingRoomId):e.entity.canModerate?e.openRoom(e.meetingRoomId):(e.isLoading=!1,e.$toasted.error($t("meeting.room_not_found"),e.$toastConfig.error)),e.startKeepAlivePolling()}))})).catch((function(t){e.isLoading=!1,formUtil.handleErrors(t)}))},getOffline:function(){var e=this;this.$gaEvent("engagement","meeting_getOffline"),this.isLoading=!0,this.meetingAction("leave",null,{alert:"confirm",callback:function(t){e.showAgenda=!0,e.closeConnectionAndStream()}})},meetingAction:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{alert:"confirm"},n={alert:"confirm"};s=Object.assign({},n,s);var o=function(n){t.isLoading=!0,i=n||i,t.Custom({url:"/".concat(t.initUrl,"/").concat(t.uuid,"/").concat(e),method:"post",data:i}).then((function(e){e.meeting=t.updateMeetingTimezone(e.meeting),t.entity=e.meeting,t.$toasted.success(e.message,t.$toastConfig),s.callback&&s.callback(e),t.isLoading=!1})).catch((function(e){t.isLoading=!1,formUtil.handleErrors(e)}))};e?"confirm"===s.alert||!0===s.alert?formUtil.confirmAction().then((function(e){e.value?o():(t.isLoading=!1,e.dismiss,p.c.DismissReason.cancel)})):"input"===s.alert?swtAlert.fire({title:s.title,input:"text",inputPlaceholder:s.inputPlaceholder,showCancelButton:!0,confirmButtonText:"Proceed!",cancelButtonText:"Go Back!"}).then((function(e){if(e.value){var i={};i[s.fieldName]=e.value,o(i)}else t.isLoading=!1,e.dismiss,p.c.DismissReason.cancel})):o():this.isLoading=!1},snoozeMeeting:function(e){this.meetingAction("snooze",{period:e})},leaveMeeting:function(){this.meetingAction("leave")},cancelMeeting:function(){this.meetingAction("cancel",null,{alert:"input",title:$t("meeting.reason_for_cancellation"),inputPlaceholder:$t("meeting.reason_for_cancellation"),fieldName:"cancellationReason"})},endMeeting:function(){var e=this;this.isLoading=!0,this.meetingAction("end",null,{callback:function(t){e.showAgenda=!0,e.closeConnectionAndStream(),window.meetingChannel.whisper("MeetingEnded",{status:t.meeting.status})}})},updateMeetingRules:function(){"video_conference"===this.entity.type.uuid?(this.meetingRulesHost={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!1},this.meetingRulesGuest={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!1}):"audio_conference"===this.entity.type.uuid?(this.meetingRulesHost={session:{audio:!0,video:!1,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1},autoCloseEntireSession:!1},this.meetingRulesGuest={session:{audio:!0,video:!1,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1},autoCloseEntireSession:!1}):"webinar"===this.entity.type.uuid?(this.meetingRulesHost={session:{audio:!0,video:!0,screen:!1,data:!1,oneway:!0},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},autoCloseEntireSession:!0},this.meetingRulesGuest={session:{audio:!0,video:!0,screen:!1,data:!1,oneway:!0},mediaConstraints:{audio:!1,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!0}):"live_class"===this.entity.type.uuid?(this.meetingRulesHost={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!0},this.meetingRulesGuest={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!0}):"podcast"===this.entity.type.uuid&&(this.meetingRulesHost={session:{audio:!0,video:!1,screen:!1,data:!1,oneway:!0},mediaConstraints:{audio:!0,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},autoCloseEntireSession:!0},this.meetingRulesGuest={session:{audio:!0,video:!1,screen:!1,data:!1,oneway:!0},mediaConstraints:{audio:!1,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1},autoCloseEntireSession:!0})},updateMeetingTimezone:function(e){var t=this,i=function(e){return f.e(e,t.vars.serverDateTimeFormat)};return e.startDateTime=i(e.startDateTime),e.plannedStartDateTime&&(e.plannedStartDateTime=i(e.plannedStartDateTime)),e},beforeUnload:function(e){this.localVideo&&window.meetingChannel.whisper("RemovedStream",this.localVideo)},logEvent:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"log";this.rtcmConnection.enableLogs&&("log"===i?console.log(e,t):"error"===i?console.error(e,t):"debug"===i&&console.debug(e,t))},toggleDevicesModal:function(){this.mediaConfigFormData=_.cloneDeep(this.mediaConfigurations),this.showDevicesModal=!0},onDevicesModalOK:function(e){var t=this;e.preventDefault(),Object(g.areEqual)(this.mediaConfigFormData,this.mediaConfigurations)||(this.mediaConfigurations=_.cloneDeep(this.mediaConfigFormData),this.applyMediaConstraints()),this.$nextTick((function(){t.$bvModal.hide("devicesModal")}))},onDevicesModalCancel:function(e){var t=this;e.preventDefault(),this.$nextTick((function(){t.$bvModal.hide("devicesModal")}))},updatePageConfigs:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.configs.meeting.recordingFormatAudio?this.configs.meeting.recordingFormatAudio:"audio/webm",s=this.configs.meeting.recordingFormatVideo?this.configs.meeting.recordingFormatVideo:"video/webm",n={},o=this.mediaConfigurations.recording.type,a=this.mediaConfigurations.recording.mimeType;"video_conference"===this.entity.type.uuid?(n={enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!0},o="video",a=s):"audio_conference"===this.entity.type.uuid?(n={enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!1,enableScreenSharing:!1},o="audio",a=i):"webinar"===this.entity.type.uuid?(n=t?{enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!0,enableHandGesture:!1}:{enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!1,showEnableVideoBtn:!1,enableScreenSharing:!1,enableFileSharing:!1,enableRecording:!1,enableHandGesture:!1},o="video",a=s):"live_class"===this.entity.type.uuid?(n=t?{enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!0}:{enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!1,showEnableVideoBtn:!1,enableScreenSharing:!1,enableFileSharing:!1,enableRecording:!1},o="video",a=s):"podcast"===this.entity.type.uuid&&(n=t?{enableAudio:!0,enableVideo:!1,showEnableAudioBtn:!0,showEnableVideoBtn:!1,enableScreenSharing:!1,enableHandGesture:!1}:{enableAudio:!0,enableVideo:!1,showEnableAudioBtn:!1,showEnableVideoBtn:!1,enableScreenSharing:!1,enableFileSharing:!1,enableRecording:!1,enableHandGesture:!1},o="audio",a=i),n.objForEach((function(t,i){return e.pageConfigs[i]=t})),this.mediaConfigurations.recording.type=o,this.mediaConfigurations.recording.mimeType=a,this.rtcmConnection.extra.audioMuted=!this.pageConfigs.enableAudio,this.rtcmConnection.extra.videoMuted=!this.pageConfigs.enableVideo,this.rtcmConnection.extra.isHandUp=this.isHandUp,this.rtcmConnection.updateExtraData()},destroyPage:function(){window.countdownInterval&&clearInterval(window.countdownInterval),this.SetUiConfig({pageHeaderShow:!0,pageFooterShow:!0}),this.closeConnectionAndStream(),window.Echo&&(window.meetingChannel&&(window.meetingChannel.stopListening("MeetingStatusChanged"),window.meetingChannel.stopListening("NewMessage")),window.Echo.leave("Meeting.".concat(this.uuid))),d.a.isEnabled&&(d.a.off("change"),d.a.off("error"))},getInitialData:function(){var e=this;return this.isLoading=!0,window.Echo?this.Get({uuid:this.uuid}).then((function(t){return t.isInstantMeeting&&(e.pageConfigs.hasAgenda=!1),t.config.objForEach((function(t,i){return e.pageConfigs[i]=t})),e.pageConfigs.disableScroll="grid"===e.pageConfigs.layout||(t.config&&t.config.hasOwnProperty("disableScroll")?t.config.disableScroll:e.pageConfigs.disableScroll),t=e.updateMeetingTimezone(t),e.entity=t,e.updateMeetingRules(),t.roomId&&"live"===t.status&&setTimeout((function(){e.initMediaAndRtcmConnection(),e.rtcmConnection.checkPresence(t.roomId,(function(t,i){e.roomIdAlive=!!t}))}),1e3),e.joinChannel(),t.isInstantMeeting&&!t.isBlocked&&"live"===t.status?e.getOnline():e.isLoading=!1,t})).catch((function(t){return e.isLoading=!1,formUtil.handleErrors(t),e.$router.push({name:e.fallBackRoute}),t})):(this.$toasted.error($t("config.pusher.credential_required"),this.$toastConfig.error),void this.$router.push({name:this.fallBackRoute}))},setupMediaDevices:function(){var e=this;this.isLoading=!0;this.mediaDevices.audioInput=[],this.mediaDevices.audioOutput=[],this.mediaDevices.videoInput=[],navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(e){return e.getTracks().forEach((function(e){return e.stop()})),navigator.mediaDevices.enumerateDevices()})).then((function(t){t.forEach((function(t){var i={uuid:t.deviceId};"audioinput"===t.kind?(i.name=t.label||"microphone ".concat(e.mediaDevices.audioInput.length+1),e.mediaDevices.audioInput.push(i)):"audiooutput"===t.kind?(i.name=t.label||"speaker ".concat(e.mediaDevices.audioOutput.length+1),e.mediaDevices.audioOutput.push(i)):"videoinput"===t.kind?(i.name=t.label||"camera ".concat(e.mediaDevices.videoInput.length+1),e.mediaDevices.videoInput.push(i)):console.log("Some other kind of source/device: ",t)})),e.mediaConfigurations.selectedAudioInput=e.mediaDevices.audioInput?e.mediaDevices.audioInput[0]:null,e.mediaConfigurations.selectedVideoInput=e.mediaDevices.videoInput?e.mediaDevices.videoInput[0]:null,e.getInitialData()})).catch((function(t){console.log("navigator.MediaDevices.getUserMedia error: ",t.message,t.name),"NotAllowedError"!==t.name&&"PermissionDeniedError"!==t.name||(e.permissionRejected=!0),e.getInitialData()}))},doInit:function(){this.Init({url:this.initUrl}),window.isDuplicate()&&(this.duplicateTab=!0),this.setupMediaDevices()}}),mounted:function(){var e=this;document.body.classList.add("meeting-page"),this.$route.params.uuid&&(this.uuid=this.$route.params.uuid),d.a.isEnabled&&(d.a.on("change",(function(){e.SetUiConfig({fullScreen:d.a.isFullscreen})})),d.a.on("error",(function(e){console.error("Failed to enable fullscreen",e)})),this.SetUiConfig({fullScreen:!1})),this.doInit(),window.addEventListener("beforeunload",this.beforeUnload),this.checkIfOffline()},created:function(){this.mediaConfigFormData=_.cloneDeep(this.mediaConfigurations),this.SetUiConfig({pageHeaderShow:!1,pageFooterShow:!1}),navigator.connection&&"cellular"===navigator.connection.type&&navigator.connection.downlinkMax<=.115&&alert("2G is not supported. Please use a better internet service.")},beforeRouteEnter:function(e,t,i){e.params.uuid?i((function(e){e.prevRoute=t})):i({name:"appMeetingView"===t?t:"AppMeetingList"})},beforeDestroy:function(){window.isMeetingPageDestroyed||(this.isLoading=!0,this.destroyPage(),this.entity&&"live"===this.entity.status&&this.Custom({url:"/".concat(this.initUrl,"/").concat(this.uuid,"/leave"),method:"post"}),window.isMeetingPageDestroyed=!0)},beforeRouteLeave:function(e,t,i){var s=this,n=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(s.isLoading=!0,s.destroyPage(),window.removeEventListener("beforeunload",s.beforeUnload),s.entity&&"live"===s.entity.status?s.Custom({url:"/".concat(s.initUrl,"/").concat(s.uuid,"/leave"),method:"post"}).then((function(e){window.isMeetingPageDestroyed=!0,i()})).catch((function(e){window.isMeetingPageDestroyed=!0,i()})):(window.isMeetingPageDestroyed=!0,i()))};this.hasVideos?formUtil.unsavedCheckAlert({},{unsaved:!0},n,{title:$t("meeting.is_live")}):n()},destroyed:function(){document.body.classList.remove("meeting-page")}},x=i("zfsR"),R=i("bdEB"),T=i("adPT"),M=i("K2Rr"),k=i.n(M),D=i("nFxi");function $(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function E(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var j={name:"file-sharer",components:{BProgress:i("SfWM").a},props:{connection:{default:null},allowSharing:{default:!0},actionLabel:{type:String,default:"global.choose"},nameLabel:{type:String,default:"upload.file"},namesLabel:{type:String,default:"upload.files"},closeButtonLabel:{type:String,default:"upload.close"},buttonWrapperClasses:{type:String,default:"justify-content-between"},buttonClasses:{type:String,default:""},closeButtonClasses:{type:String,default:"btn-light"},buttonIcon:{type:String,default:"fas fa-upload"},buttonDesign:{type:String,default:"primary"},options:{type:Object,default:function(){return{allowedExtensions:["jpg","png","jpeg","pdf","doc","docx","xls","xlsx","txt"],maxNoOfFiles:20,allowedMaxFileSize:null}}},multiple:{type:Boolean,default:!1},hideButtonLabel:{type:Boolean,default:!1},showCloseButton:{type:Boolean,default:!0},autoSend:{type:Boolean,default:!0}},data:function(){return{icons:D.b,mimeTypes:D.c,sharingFiles:[],lastSelectedFile:null,incomingRequest:{show:!1,sender:null,fileId:null}}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?$(Object(i),!0).forEach((function(t){E(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(n.c)("config",["configs","vars"])),watch:{connection:function(e,t){e&&null===t&&this.setupConnection()}},methods:{getFileIcon:function(e){return this.icons[e]||"fa-file-alt"},getFileNameIcon:function(e){return this.icons[e]||"fa-file-alt"},generateFilesList:function(e){var t=this,i=null,s=this.$refs.filesInput.files;if(this.options.allowedExtensions&&(i=new RegExp("(."+this.options.allowedExtensions.join("|.")+")$")),this.options.maxNoOfFiles&&s.length>this.options.maxNoOfFiles)this.$toasted.error(this.$t("upload.max_file_limit_crossed",{number:this.options.maxNoOfFiles}),this.$toastConfig.error);else{for(var n=function(e){var n="".concat(s[e].size,"-").concat(s[e].name),o=t.sharingFiles.findIndex((function(e){return e.fileId===n}));if(i&&!i.test(s[e].name))t.$toasted.error(t.$t("global.file_not_supported",{attribute:s[e].name.split(".").pop()}),t.$toastConfig.error);else if(t.options.allowedMaxFileSize&&s[e].size>t.options.allowedMaxFileSize)t.$toasted.error(t.$t("global.file_too_large",{attribute:s[e].name}),t.$toastConfig.error);else if(-1===o){var a={uuid:"",name:s[e].name,size:s[e].size,type:s[e].type,humanSize:Object(h.a)(s[e].size),fileId:n,url:"",sendingTo:[],progress:{value:0,max:0,percent:0,status:"starting"}};t.sharingFiles.unshift(a),t.lastSelectedFile=s[e]}},o=0;o<s.length;o++)n(o);this.autoSend&&this.connection&&this.connection.send({doYouWannaReceiveThisFile:!0,sender:this.connection.extra,fileId:"".concat(this.lastSelectedFile.size,"-").concat(this.lastSelectedFile.name)})}},rejectIncomingFile:function(){this.incomingRequest.show=!1,this.connection.send({noIDoNotWannaReceive:!0,sender:this.connection.extra,fileId:this.incomingRequest.fileId}),this.incomingRequest.sender=null,this.incomingRequest.fileId=null},acceptIncomingFile:function(){this.incomingRequest.show=!1,this.connection.send({yesIWannaReceive:!0,sender:this.connection.extra,fileId:this.incomingRequest.fileId}),this.incomingRequest.sender=null,this.incomingRequest.fileId=null},rtcmOnOpen:function(e){var t=this;try{chrome.power.requestKeepAwake("display")}catch(e){}this.connection.connectedWith[e.userid]||(this.connection.connectedWith[e.userid]=!0,this.lastSelectedFile&&window.setTimeout((function(){t.autoSend&&t.connection&&t.connection.send({doYouWannaReceiveThisFile:!0,sender:t.connection.extra,fileId:"".concat(t.lastSelectedFile.size,"-").concat(t.lastSelectedFile.name)})}),500))},rtcmOnClose:function(e){},rtcmOnLeave:function(e){},rtcmOnMessage:function(e){e.data.doYouWannaReceiveThisFile?this.connection.fileReceived[e.data.fileId]||(this.incomingRequest.fileId=e.data.fileId,this.incomingRequest.sender=e.data.sender,this.incomingRequest.show=!0,this.$emit("show")):e.data.yesIWannaReceive&&this.lastSelectedFile?this.connection.shareFile(this.lastSelectedFile,e.userid):e.data.noIDoNotWannaReceive&&this.lastSelectedFile},rtcmOnFileStart:function(e){var t="".concat(e.size,"-").concat(e.name);if(!this.connection.fileReceived[t]){e.userid!==this.connection.userid&&(this.sharingFiles.unshift({uuid:"",name:e.name,size:e.size,type:e.type,humanSize:Object(h.a)(e.size),fileId:t,url:"",receivingFrom:null,progress:{value:0,max:0,percent:0,status:"starting"}}),this.$emit("show"));var i=this.sharingFiles.findIndex((function(e){return e.fileId===t}));if(-1!==i){var s=this.sharingFiles[i];if(s.uuid=e.uuid,s.userid=e.userid,e.userid===this.connection.userid){if(s.sendingTo||(s.sendingTo=[]),s.sendingTo.length>0&&-1!==s.sendingTo.findIndex((function(t){return t.userid===e.remoteUserId})))return;s.sendingTo.unshift({userid:e.remoteUserId,progress:{value:0,percent:0,max:e.maxChunks,status:"starting"}})}else s.receiveAgain=!0,s.receivingFrom=e.userid,s.progress.max=e.maxChunks,s.progress.status="starting"}}},rtcmOnFileProgress:function(e){var t="".concat(e.size,"-").concat(e.name);if(!this.connection.fileReceived[t]){var i=this.sharingFiles.findIndex((function(t){return t.uuid===e.uuid}));if(-1!==i){var s=this.sharingFiles[i];if(e.remoteUserId&&s.sendingTo){var n=s.sendingTo.findIndex((function(t){return t.userid===e.remoteUserId})),o=s.sendingTo[n];if(!o)return;o.progress.value=e.currentPosition,o.progress=this.updateProgress(o.progress,!0)}else s.progress.value=e.currentPosition,s.progress=this.updateProgress(s.progress,!1)}}},rtcmOnFileEnd:function(e){var t="".concat(e.size,"-").concat(e.name);if(!this.connection.fileReceived[t]){e.remoteUserId===this.connection.userid&&(this.connection.fileReceived[t]=e);var i=this.sharingFiles.findIndex((function(e){return e.fileId===t}));if(-1!==i){var s=this.sharingFiles[i];if(s.url=e.url,e.remoteUserId&&s.sendingTo){var n=s.sendingTo.findIndex((function(t){return t.userid===e.remoteUserId}));s.sendingTo[n].progress.status="sent"}else s.progress.status="received"}}},rtcmOnError:function(e){},updateProgress:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.value||-1===e.value)return e.percent=0,e;var i=parseInt((e.value/e.max*100).toFixed(0));return e.status=t?i>100?"sent":"sending - "+i+"%":i>100?"received":"receiving - "+i+"%",e.percent=i>100?100:i,e},setupConnection:function(){this.connection.enableFileSharing=!0,this.connection.fileReceived={},this.connection.connectedWith={},this.connection.chunkSize=15e3,this.connection.onopen=this.rtcmOnOpen,this.connection.onclose=this.rtcmOnClose,this.connection.onleave=this.rtcmOnLeave,this.connection.onmessage=this.rtcmOnMessage,this.connection.onerror=this.rtcmOnError,this.connection.onFileStart=this.rtcmOnFileStart,this.connection.onFileProgress=this.rtcmOnFileProgress,this.connection.onFileEnd=this.rtcmOnFileEnd}},mounted:function(){this.connection&&this.setupConnection()},destroyed:function(){}},U=i("KHd+"),I=Object(U.a)(j,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sm-uploader file-uploader file-sharer"},[i("div",{class:["files-list-wrapper"]},[e.incomingRequest.show?i("div",{staticClass:"file-incoming-request"},[i("div",{staticClass:"alert fade show alert-white"},[i("div",{staticClass:"alert-content"},[i("h6",[i("strong",[e._v(e._s(e.incomingRequest.sender.name))]),i("span",{staticClass:"text-muted mx-1"},[e._v(e._s(e.$t("upload.wants_to_share_file")))]),i("strong",[e._v(e._s(e.incomingRequest.fileId))])])]),e._v(" "),i("div",{staticClass:"d-flex justify-content-start mt-3"},[i("button",{staticClass:"btn btn-sm btn-danger flex-grow",attrs:{type:"button"},on:{click:e.rejectIncomingFile}},[e._v(e._s(e.$t("upload.reject")))]),e._v(" "),i("button",{staticClass:"btn btn-sm btn-success flex-grow",attrs:{type:"button"},on:{click:e.acceptIncomingFile}},[e._v(e._s(e.$t("upload.accept")))])])])]):e._e(),e._v(" "),e.sharingFiles.length?i("ul",{staticClass:"files-list"},e._l(e.sharingFiles,(function(t,s){return i("li",{key:t.fileId,staticClass:"file-details-row"},[i("div",{staticClass:"file-details-wrapper"},[i("div",{staticClass:"file-icon"},[i("span",[i("i",{class:["far",e.getFileIcon(t.type)]})])]),e._v(" "),i("div",{staticClass:"file-details"},[i("h6",[e._v(e._s(t.name))]),e._v(" "),i("p",[i("span",[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.type")))]),e._v(": "+e._s(e.mimeTypes[t.type]||"Unknown"))]),e._v(" "),i("span",{staticClass:"ml-1"},[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.size")))]),e._v(": "+e._s(t.humanSize))])]),e._v(" "),t.sendingTo?i("div",{staticClass:"sharing-details-wrapper"},e._l(t.sendingTo,(function(t){return i("div",{key:t.userid,staticClass:"sharing-row mt-2"},[i("div",{staticClass:"sharing-details small"},[i("div",{staticClass:"flex-grow text-muted"},[e._v("\n                                        Sending to: "+e._s(t.userid)+"\n                                    ")]),e._v(" "),i("div",[i("span",{class:["badge badge-sm badge-pill",{"badge-success":"sent"===t.progress.status},{"badge-info":"sent"!==t.progress.status}]},[e._v(e._s(t.progress.status))])])]),e._v(" "),i("b-progress",{staticClass:"mt-2 mb-0",attrs:{value:t.progress.percent,max:100}})],1)})),0):t.receivingFrom?i("div",{staticClass:"sharing-row mt-2"},[i("div",{staticClass:"sharing-details small"},[i("div",{staticClass:"flex-grow text-muted"},[e._v("\n                                    Receiving From: "+e._s(t.receivingFrom)+"\n                                ")]),e._v(" "),i("div",[i("span",{class:["badge badge-sm badge-pill",{"badge-success":"received"===t.progress.status},{"badge-info":"received"!==t.progress.status}]},[e._v(e._s(t.progress.status))])])]),e._v(" "),i("b-progress",{staticClass:"mt-2 mb-0",attrs:{value:t.progress.percent,max:100}})],1):e._e()]),e._v(" "),i("div",{staticClass:"status-wrapper"},[t.receivingFrom&&"received"!==t.progress.status?e._e():i("a",{staticClass:"status-action",attrs:{href:t.url,target:"_blank",download:t.name}},[e._m(0,!0)])])])])})),0):e._e()]),e._v(" "),i("div",{staticClass:"file-uploader-form"},[i("div",{class:["file-selector d-flex",e.buttonWrapperClasses]},[e.showCloseButton?i("button",{class:["btn",e.closeButtonClasses],attrs:{type:"button"},on:{click:function(t){return e.$emit("hide")}}},[e._m(1),e._v(" "),i("span",{staticClass:"button-label"},[e._v(e._s(e.$t(e.closeButtonLabel)))])]):e._e(),e._v(" "),e.allowSharing?[i("label",{class:["btn","btn-"+e.buttonDesign,e.buttonClasses]},[i("input",{ref:"filesInput",staticClass:"selector-input",attrs:{name:"filesInput",type:"file",id:"filesInput",multiple:e.multiple},on:{change:e.generateFilesList}}),e._v(" "),i("span",{staticClass:"button-icon"},[i("i",{class:e.buttonIcon})]),e._v(" "),e.hideButtonLabel?e._e():i("span",{staticClass:"button-label"},[e._v(e._s(e.$t(e.actionLabel,{attribute:e.$t(e.namesLabel)})))])])]:e._e()],2)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("i",{staticClass:"fas fa-download"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"button-icon"},[t("i",{staticClass:"fas fa-times"})])}],!1,null,null,null).exports,A={mixins:[x.a,S,s.a],components:{AppLogo:R.a,AnimatedNumber:T.a,FlipCountdown:k.a,FileSharer:I},watch:{locked:function(e,t){if(e){var i=this.$route.fullPath;this.$router.push({name:"authLock",query:{ref:i}})}}},methods:{}},L=(i("eC/g"),Object(U.a)(A,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("base-container",{class:["meeting-page",{"auto-hide-footer":e.pageConfigs.footerAutoHide&&e.hasVideos},{pulse:e.recording}],attrs:{"with-loader":"","is-loading":e.isLoading,"loader-color":e.vars.loaderColor,"overlay-color":e.uiConfigs.pageColorSchemeType,"loader-size":"screen","data-page-background-color":e.uiConfigs.pageBackgroundColor,"data-card-background-color":e.uiConfigs.pageContainerBackgroundColor}},[e.duplicateTab?i("card",{staticClass:"duplicate-tab d-flex justify-content-center align-items-center min-height-90vh",attrs:{shadow:""}},[i("h2",[e._v(e._s(e.$t("meeting.duplicate_tab")))])]):[i("div",{class:["meeting-footer",{"has-videos":e.hasVideos}],attrs:{"data-footer-background-color":e.uiConfigs.leftSidebarColor}},[i("div",{staticClass:"logo-wrapper"},[i("app-logo",{attrs:{place:"sidebar",size:"sm"}})],1),e._v(" "),e.entity&&e.entity.status&&e.videoList.length?i("div",{staticClass:"meeting-actions meeting-actions-center"},[e.localVideo&&e.pageConfigs.showEnableAudioBtn?[e.pageConfigs.enableAudio?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("meeting.mute_audio")},on:{click:e.toggleAudio}},[i("i",{staticClass:"fas fa-microphone"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action disabled-text",attrs:{type:"button",title:e.$t("meeting.unmute_audio")},on:{click:e.toggleAudio}},[i("i",{staticClass:"fas fa-microphone-slash"})])]:e._e(),e._v(" "),e.localVideo&&e.pageConfigs.showEnableVideoBtn?[e.pageConfigs.enableVideo?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("meeting.mute_video")},on:{click:e.toggleVideo}},[i("i",{staticClass:"fas fa-video"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action disabled-text",attrs:{type:"button",title:e.$t("meeting.unmute_video")},on:{click:e.toggleVideo}},[i("i",{staticClass:"fas fa-video-slash"})])]:e._e(),e._v(" "),e.pageConfigs.showDeviceConfig?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("meeting.media_devices.setup")},on:{click:e.toggleDevicesModal}},[i("i",{staticClass:"fas fa-cogs"})]):e._e(),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action danger-text",attrs:{type:"button",title:e.$t("meeting.leave_meeting")},on:{click:e.getOffline}},[i("i",{staticClass:"fas fa-phone-slash"})]),e._v(" "),e.pageConfigs.enableRecording?[e.recording?[e.recordingPaused?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action success-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.resume_recording")},on:{click:e.resumeRecording}},[i("i",{staticClass:"fas fa-circle"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action danger-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.pause_recording")},on:{click:e.pauseRecording}},[i("i",{staticClass:"fas fa-pause"})]),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action danger-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.stop_recording")},on:{click:e.stopRecording}},[i("i",{staticClass:"fas fa-stop"}),e._v(" "),i("span",{staticClass:"recording_time"},[e._v(e._s(e.recordingDuration))])])]:i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.start_recording")},on:{click:e.startRecording}},[i("i",{staticClass:"fas fa-circle"})])]:e._e(),e._v(" "),e.pageConfigs.enableScreenSharing?[e.localScreenStreamid?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action disabled-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.stop_sharing_screen")},on:{click:e.stopSharingScreen}},[i("i",{staticClass:"fas fa-minus-square"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.share_screen")},on:{click:e.shareScreen}},[i("i",{staticClass:"fas fa-desktop"})])]:e._e(),e._v(" "),e.pageConfigs.enableHandGesture?[e.isHandUp?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action success-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.lower_hand")},on:{click:e.toggleHandUp}},[i("i",{staticClass:"far fa-hand-paper"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.raise_hand")},on:{click:e.toggleHandUp}},[i("i",{staticClass:"fas fa-hand-paper"})])]:e._e()],2):e._e(),e._v(" "),i("div",{staticClass:"meeting-actions meeting-actions-right"},[e.entity?[e.entity.status&&e.videoList.length?i("base-dropdown",{staticClass:"more-actions",attrs:{tag:"div",direction:"up","menu-classes":"show-dropdown-up",position:"right"}},[i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action grid-toggle-btn d-none d-md-inline-block",attrs:{slot:"title",type:"button",title:e.$t("meeting.change_layout")},slot:"title"},[i("i",{staticClass:"fas fa-th-large"})]),e._v(" "),i("button",{staticClass:"dropdown-item d-flex justify-content-between align-items-center",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("grid")}}},[e._v(e._s(e.$t("meeting.show_as_grid"))+" "),i("i",{staticClass:"fas fa-check min-width-auto text-light",class:{"text-dark":"grid"===e.pageConfigs.layout}})]),e._v(" "),i("button",{staticClass:"dropdown-item d-flex justify-content-between align-items-center",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("gallery")}}},[e._v(e._s(e.$t("meeting.show_as_gallery"))+" "),i("i",{staticClass:"fas fa-check min-width-auto text-light",class:{"text-dark":"gallery"===e.pageConfigs.layout}})]),e._v(" "),i("button",{staticClass:"dropdown-item d-flex justify-content-between align-items-center",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("fullpage")}}},[e._v(e._s(e.$t("meeting.show_fullpage"))+" "),"fullpage"===e.pageConfigs.layout?i("i",{staticClass:"fas fa-check min-width-auto text-light",class:{"text-dark":"fullpage"===e.pageConfigs.layout}}):e._e()])]):e._e(),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("general.share")},on:{click:e.shareURL}},[i("i",{staticClass:"fas fa-share-alt"})]),e._v(" "),e.pageConfigs.enableChat&&e.configs.chat&&e.configs.chat.enabled&&e.subscriptions&&e.subscriptions.userPrivate&&!e.entity.isBlocked?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],class:["btn action chats-toggle-btn",{pulse:e.totalUnreadMessages&&e.totalUnreadMessages>0&&!e.isChatBoxShown}],attrs:{type:"button",title:e.$t(e.isChatBoxShown?"global.hide":"global.show",{attribute:e.$t("chat.chats")})},on:{click:e.toggleChatBox}},[i("i",{class:[e.isChatBoxShown?"fas fa-comment-slash":"far fa-comment"]}),e._v(" "),e.totalUnreadMessages&&e.totalUnreadMessages>0?i("span",{staticClass:"text-success unread-count"},[e._v(e._s(e.totalUnreadMessages))]):e._e()]):e._e()]:e._e(),e._v(" "),i("base-dropdown",{staticClass:"more-actions",attrs:{tag:"div",direction:"up","menu-classes":"show-dropdown-up",position:"right"}},[i("button",{staticClass:"btn action more-actions-btn",attrs:{slot:"title",type:"button"},slot:"title"},[i("i",{staticClass:"fas fa-ellipsis-v"})]),e._v(" "),e.entity&&e.entity.status&&e.videoList.length?i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:e.getOffline}},[i("i",{staticClass:"fas fa-phone-slash"}),e._v(" "+e._s(e.$t("meeting.leave_meeting")))]):i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return e.$router.push({name:"appMeetingList"})}}},[i("i",{staticClass:"fas fa-chevron-left"}),e._v(" "+e._s(e.$t("general.back")))]),e._v(" "),e.entity&&e.entity.status&&e.entity.canModerate&&"live"===e.entity.status?i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:e.endMeeting}},[i("i",{staticClass:"fas fa-calendar-times"}),e._v(" "+e._s(e.$t("meeting.end_meeting")))]):e._e(),e._v(" "),e.pageConfigs.hasAgenda?i("button",{staticClass:"dropdown-item agenda-toggle-btn",attrs:{type:"button"},on:{click:e.toggleAgenda}},[i("i",{staticClass:"fas fa-quote-left"}),e._v(" "+e._s(e.$t(e.showAgenda?"global.hide":"global.show",{attribute:e.$t("general.agenda")})))]):e._e(),e._v(" "),e.pageConfigs.showDeviceConfig?i("button",{staticClass:"dropdown-item show-devices-btn",attrs:{type:"button"},on:{click:e.toggleDevicesModal}},[i("i",{staticClass:"fas fa-cogs"}),e._v(" "+e._s(e.$t("meeting.media_devices.setup")))]):e._e(),e._v(" "),e.pageConfigs.enableFileSharing&&e.entity&&e.entity.status&&e.videoList.length?i("button",{staticClass:"dropdown-item file-sharing-btn",attrs:{type:"button"},on:{click:e.toggleFileSharing}},[i("i",{staticClass:"fas fa-upload"}),e._v(" "+e._s(e.$t("upload.share_files")))]):e._e(),e._v(" "),i("button",{staticClass:"dropdown-item d-none d-md-block",attrs:{type:"button"},on:{click:e.toggleFooterAutoHide}},[i("i",{staticClass:"fas fa-hourglass-start"}),e._v(" "+e._s(e.$t(e.pageConfigs.footerAutoHide?"meeting.toggle_autohide_off":"meeting.toggle_autohide_on")))]),e._v(" "),e.uiConfigs.fullScreen?i("button",{staticClass:"dropdown-item d-none d-md-block",attrs:{type:"button"},on:{click:function(t){return e.toggleFullScreen(!1)}}},[i("i",{staticClass:"fas fa-compress"}),e._v(" "+e._s(e.$t("config.ui.toggle_fullscreen")))]):i("button",{staticClass:"dropdown-item d-none d-md-block",attrs:{type:"button"},on:{click:function(t){return e.toggleFullScreen(!0)}}},[i("i",{staticClass:"fas fa-expand"}),e._v(" "+e._s(e.$t("config.ui.toggle_fullscreen")))])]),e._v(" "),i("base-dropdown",{staticClass:"more-actions",attrs:{tag:"div",direction:"up","menu-classes":"show-dropdown-up",position:"right"}},[i("button",{staticClass:"btn action grid-toggle-btn d-none d-md-inline-block px-1",attrs:{slot:"title",type:"button"},slot:"title"},[e.loggedInUser?i("user-avatar",{attrs:{user:e.loggedInUser,size:40,color:e.vars.colors[e.uiConfigs.topNavbarColor]}}):e._e()],1),e._v(" "),i("h6",{staticClass:"dropdown-header"},[e._v(e._s(e.$t("general.greeting")+", "+e.loggedInUser.name))]),e._v(" "),e.loggedInUser?i("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"appProfileView"}}},[i("i",{staticClass:"fas fa-user"}),e._v(" "+e._s(e.$t("user.your_profile"))+"\n                    ")]):e._e(),e._v(" "),e.hasPermission("access-config")?e._e():i("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"appUserPreference"}}},[i("i",{staticClass:"fas fa-user-cog"}),e._v(" "+e._s(e.$t("user.user_preference"))+"\n                    ")]),e._v(" "),i("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"appUserChangePassword"}}},[i("i",{staticClass:"fas fa-key"}),e._v(" "+e._s(e.$t("auth.password.change_password"))+"\n                    ")])],1)],2)]),e._v(" "),i("div",{class:["agenda-streams-container",{"has-agenda":e.pageConfigs.hasAgenda},{"agenda-visible":e.showAgenda}]},[e.pageConfigs.hasAgenda&&e.entity&&!e.entity.isBlocked?[i("card",{staticClass:"agenda-container",attrs:{shadow:"","body-classes":"agenda-wrapper"}},[i("div",{staticClass:"meeting-agenda-container"},[i("vue-scroll",{ref:"vue-scroll-agenda",attrs:{id:"vue-scroll-agenda"}},[e.entity?[e._m(0),e._v(" "),i("div",{staticClass:"text-muted mt-3"},[e._m(1),e._v(" "),e._m(2)]),e._v(" "),i("view-paragraph",{staticClass:"mt-3",attrs:{label:e.$t("meeting.props.agenda"),value:e.entity.agenda}}),e._v(" "),e.entity.description?i("view-paragraph",{staticClass:"mt-3",attrs:{label:e.$t("meeting.props.description"),value:e.entity.description,html:""}}):e._e(),e._v(" "),e.entity.attachments?i("view-uploads",{class:["mt-3",e.uiConfigs.colorSchemeType],attrs:{label:e.$t("upload.attachments"),"name-label":e.$t("upload.attachment"),value:e.entity.attachments,"download-button-classes":"text-gray","url-prefix":"/meetings/"+e.uuid+"/downloads"}}):e._e()]:e._e()],2)],1)])]:e._e(),e._v(" "),i("div",{class:["streams-container",e.hasVideos?"stream-"+e.pageConfigs.layout+"-layout":""]},[i("div",{ref:"videoListEle",class:["video-list",e.hasVideosClasses]},[e.hasVideos?e._l(e.videoList,(function(t,s){return i("div",{key:""+t.uuid+t.id,class:["video-item video-card",{maximized:t.maximized},{local:t.local},{screen:t.screen},{"fullscreen-item":t.id===e.fullScreenItemId},{"hand-up":t.isHandUp},{"audio-muted":t.audioMuted},{"video-muted":t.videoMuted||!t.hasVideo},{"no-stream":!t.status}],on:{dblclick:function(i){return e.changeFocus(t)}}},[i("div",{staticClass:"video-wrapper"},[i("video",{ref:"videos",refInFor:!0,class:[{"no-poster":t.status&&!t.videoMuted}],attrs:{autoplay:"",playsinline:"",id:t.id,poster:t.status?null:"/images/video/no-stream.jpg"},domProps:{muted:t.muted}}),e._v(" "),i("div",{staticClass:"caption"},[i("h6",[i("span",{class:["text-xs mr-1",{"text-success":t.status},{"text-danger":!t.status}]},[i("i",{staticClass:"fas fa-circle"})]),e._v(" "),t.local?[e._v("\n                                            "+e._s(t.screen?e.$t("meeting.your_screen"):e.$t("meeting.you"))+"\n                                        ")]:[e._v("\n                                            "+e._s(t.screen?""+t.name+e.$t("meeting.screen"):t.name)+"\n                                        ")],e._v(" "),t.status?e._e():i("span",{staticClass:"bracketed text-danger"},[e._v(e._s(e.$t("meeting.left")))])],2)])]),e._v(" "),t.local?t.local&&t.isHandUp?i("div",{staticClass:"custom-controls-wrapper"},[i("div",{staticClass:"custom-controls"},[i("div",{staticClass:"status-icon"},[i("i",{staticClass:"fas fa-hand-paper enabled-text"})])])]):e._e():i("div",{staticClass:"custom-controls-wrapper"},[i("div",{staticClass:"custom-controls"},[t.isHandUp?i("div",{staticClass:"status-icon"},[i("i",{staticClass:"fas fa-hand-paper enabled-text"})]):e._e(),e._v(" "),e.entity.canModerate||!t.audioMuted||t.videoMuted?e._e():i("div",{staticClass:"status-icon"},[i("i",{staticClass:"fas fa-microphone-slash disabled-text"})]),e._v(" "),e.entity.canModerate?[i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],attrs:{title:e.$t("meeting.kick_ban_participant")},on:{click:function(i){return e.kickRemoteUser(t,s)}}},[i("i",{staticClass:"fas fa-ban enabled-text"})]),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],attrs:{title:e.$t("meeting.mute_participant_source")},on:{click:function(i){return e.toggleRemoteAudioSource(t,s)}}},[i("i",{class:["fas",{"fa-microphone enabled-text":!t.audioMuted},{"fa-microphone-slash disabled-text":t.audioMuted}]})])]:e._e(),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],attrs:{title:e.$t("meeting.mute_participant")},on:{click:function(i){return e.toggleRemoteAudio(t,s)}}},[i("i",{class:["fas",{"fa-volume-up enabled-text":!t.muted},{"fa-volume-off disabled-text":t.muted}]})])],2)])])})):i("card",{staticClass:"video-item wait-box maximized",attrs:{shadow:""}},[e.entity&&!e.entity.isBlocked?["scheduled"===e.entity.status?[e.startDateTimeIsFuture?i("flip-countdown",{staticClass:"my-3",attrs:{deadline:e.entity.startDateTime}}):[e.entity.canModerate?[i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                            "+e._s(e.$t("meeting.waiting_for_you_to_start"))+"\n                                        ")]),e._v(" "),i("div",{staticClass:"d-flex justify-content-center my-3"},[i("base-button",{attrs:{type:"button",design:"primary",size:"lg"},on:{click:e.getOnline}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("meeting.get_live")})))])],1)]:i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                        "+e._s(e.$t("meeting.starting_any_time_now"))+"\n                                    ")])],e._v(" "),i("div",{staticClass:"text-center my-3"},[i("span",{staticClass:"text-muted"},[e._v(e._s(e.$t("meeting.scheduled_for")))]),i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"text-muted-lg m-l-5",attrs:{title:e._f("momentDateTime")(e.entity.startDateTime)}},[e._v(e._s(e._f("momentCalendar")(e.entity.startDateTime,{sameElse:e.vars.defaultDateTimeFormat})))])]),e._v(" "),e.liveMembersCount>0?i("div",{staticClass:"text-muted text-center my-3"},[i("span",{staticClass:"text-xs text-success mr-1"},[i("i",{staticClass:"fas fa-circle"})]),e._v(" "),i("animated-number",{attrs:{number:e.liveMembersCount,delay:100}}),e._v(" "),e.liveMembersCount>1?i("span",[e._v(e._s(e.$t("meeting.members_online")))]):i("span",[e._v(e._s(e.$t("meeting.member_online")))])],1):e._e(),e._v(" "),e.entity.canModerate?[i("div",{staticClass:"d-flex justify-content-center my-3"},[i("base-button",{attrs:{type:"button",design:"gray-darker",size:"sm"},on:{click:e.cancelMeeting}},[i("i",{staticClass:"fas fa-times m-r-5"}),e._v(" "+e._s(e.$t("meeting.cancel")))]),e._v(" "),i("base-dropdown",{attrs:{tag:"div",size:"sm",direction:"up"}},[i("base-button",{attrs:{slot:"title",type:"button",design:"gray-darker",size:"sm","data-toggle":"dropdown",role:"button"},slot:"title"},[i("i",{staticClass:"far fa-clock m-r-5"}),e._v(" "),i("span",{staticClass:"nav-link-inner--text"},[e._v(e._s(e.$t("meeting.snooze")))]),e._v(" "),i("i",{staticClass:"fas fa-chevron-up m-l-5"})]),e._v(" "),e._l(e.snoozeOpts,(function(t){return i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(i){return e.snoozeMeeting(t.uuid)}}},[e._v(e._s(t.name)+" "+e._s(e.$t("list.general.durations."+t.type)))])}))],2)],1)]:e._e()]:"live"===e.entity.status?[e.roomIdAlive?[i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                        "+e._s(e.$t("meeting.is_live_now"))+"\n                                    ")]),e._v(" "),i("div",{staticClass:"d-flex justify-content-center my-3"},[i("base-button",{attrs:{type:"button",design:"primary",size:"lg"},on:{click:e.getOnline}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("meeting.get_live")})))])],1)]:[e.entity.canModerate?[i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                            "+e._s(e.$t("meeting.waiting_for_you_to_start"))+"\n                                        ")]),e._v(" "),i("div",{staticClass:"d-flex justify-content-center my-3"},[i("base-button",{attrs:{type:"button",design:"primary",size:"lg"},on:{click:e.getOnline}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("meeting.get_live")})))])],1)]:i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                        "+e._s(e.$t("meeting.starting_any_time_now"))+"\n                                    ")])],e._v(" "),e.liveMembersCount>0?i("div",{staticClass:"text-muted text-center my-3"},[i("span",{staticClass:"text-xs text-success mr-1"},[i("i",{staticClass:"fas fa-circle"})]),e._v(" "),i("animated-number",{attrs:{number:e.liveMembersCount,delay:100}}),e._v(" "),e.liveMembersCount>1?i("span",[e._v(e._s(e.$t("meeting.members_online")))]):i("span",[e._v(e._s(e.$t("meeting.member_online")))])],1):e._e()]:"cancelled"===e.entity.status?[i("h4",{staticClass:"text-muted text-center my-3"},[e._v("\n                                    "+e._s(e.$t("meeting.meeting_cancelled"))+"\n                                ")]),e._v(" "),i("div",{staticClass:"d-flex justify-content-center"},[i("base-button",{attrs:{type:"button",design:"light",size:"lg"},on:{click:function(t){return e.$router.push({name:"appMeetingList"})}}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("general.go_back")})))])],1)]:"ended"===e.entity.status?[i("h4",{staticClass:"text-muted text-center my-3"},[e._v("\n                                    "+e._s(e.$t("meeting.meeting_ended"))+"\n                                ")]),e._v(" "),i("div",{staticClass:"d-flex justify-content-center"},[i("base-button",{attrs:{type:"button",design:"light",size:"lg"},on:{click:function(t){return e.$router.push({name:"appMeetingList"})}}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("general.go_back")})))])],1)]:e._e()]:[e.entity?i("h3",{staticClass:"text-center text-danger my-3"},[e._v("\n                                "+e._s(e.$t("meeting.not_allowed"))+"\n                            ")]):e._e()]],2)],2)])],2),e._v(" "),e.pageConfigs.enableChat&&e.configs.chat&&e.configs.chat.enabled&&e.entity&&!e.entity.isBlocked?i("div",{staticClass:"chat-box-container"},[e.isChatBoxShown?i("chat-box",{attrs:{"box-visibility":e.isChatBoxShown,meeting:e.entity,channel:e.subscriptions.userPrivate},on:{boxHidden:function(t){e.isChatBoxShown=!1},boxShown:function(t){e.isChatBoxShown=!0}}}):e._e()],1):e._e(),e._v(" "),i("b-modal",{attrs:{size:"md",centered:"",lazy:"",busy:e.isLoading,id:"devicesModal","no-close-on-backdrop":"","no-close-on-esc":""},on:{ok:e.onDevicesModalOK,cancel:e.onDevicesModalCancel},model:{value:e.showDevicesModal,callback:function(t){e.showDevicesModal=t},expression:"showDevicesModal"}},[i("template",{slot:"modal-header"},[i("h5",{staticClass:"modal-title"},[e._v(e._s(e.$t("meeting.media_devices.video_and_audio_devices")))])]),e._v(" "),i("div",[i("base-select",{attrs:{options:e.mediaDevices.audioInput,label:e.$t("meeting.media_devices.audio_input"),"allow-empty":!1,"preselect-first":""},model:{value:e.mediaConfigFormData.selectedAudioInput,callback:function(t){e.$set(e.mediaConfigFormData,"selectedAudioInput",t)},expression:"mediaConfigFormData.selectedAudioInput"}}),e._v(" "),i("base-select",{attrs:{options:e.mediaDevices.videoInput,label:e.$t("meeting.media_devices.video_input"),"allow-empty":!1,"preselect-first":""},model:{value:e.mediaConfigFormData.selectedVideoInput,callback:function(t){e.$set(e.mediaConfigFormData,"selectedVideoInput",t)},expression:"mediaConfigFormData.selectedVideoInput"}}),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-4"},[i("base-select",{attrs:{options:e.mediaDevices.resolutions,label:e.$t("meeting.media_devices.video_resolution"),"allow-empty":!1,"preselect-first":"",simple:"","track-by":"label","show-by":"label"},model:{value:e.mediaConfigFormData.selectedResolution,callback:function(t){e.$set(e.mediaConfigFormData,"selectedResolution",t)},expression:"mediaConfigFormData.selectedResolution"}})],1),e._v(" "),i("div",{staticClass:"col-12 col-md-4"},[i("base-select",{attrs:{options:e.mediaDevices.frameRates,label:e.$t("meeting.media_devices.frame_rate"),"allow-empty":!1,"preselect-first":"",simple:"","track-by":"uuid","show-by":"label"},model:{value:e.mediaConfigFormData.frameRate,callback:function(t){e.$set(e.mediaConfigFormData,"frameRate",t)},expression:"mediaConfigFormData.frameRate"}})],1),e._v(" "),i("div",{staticClass:"col-12 col-md-4"},[i("base-select",{attrs:{options:e.mediaDevices.facingModes,label:e.$t("meeting.media_devices.facing_mode"),"allow-empty":!1,"preselect-first":"",simple:"","track-by":"uuid","show-by":"label"},model:{value:e.mediaConfigFormData.facingMode,callback:function(t){e.$set(e.mediaConfigFormData,"facingMode",t)},expression:"mediaConfigFormData.facingMode"}})],1),e._v(" "),i("div",{staticClass:"col-12"},[i("h6",{staticClass:"mt-2 pb-1"},[e._v(e._s(e.$t("meeting.media_devices.bitrates")))])]),e._v(" "),i("div",{staticClass:"col-12 col-sm-4"},[i("base-input",{attrs:{label:e.$t("meeting.media_devices.audio"),type:"number",min:6,max:510},model:{value:e.mediaConfigFormData.bandwidth.audio,callback:function(t){e.$set(e.mediaConfigFormData.bandwidth,"audio",t)},expression:"mediaConfigFormData.bandwidth.audio"}})],1),e._v(" "),i("div",{staticClass:"col-12 col-sm-4"},[i("base-input",{attrs:{label:e.$t("meeting.media_devices.video"),type:"number",min:100,max:14e3},model:{value:e.mediaConfigFormData.bandwidth.video,callback:function(t){e.$set(e.mediaConfigFormData.bandwidth,"video",t)},expression:"mediaConfigFormData.bandwidth.video"}})],1),e._v(" "),i("div",{staticClass:"col-12 col-sm-4"},[i("base-input",{attrs:{label:e.$t("meeting.media_devices.screen"),type:"number",min:300,max:14e3},model:{value:e.mediaConfigFormData.bandwidth.screen,callback:function(t){e.$set(e.mediaConfigFormData.bandwidth,"screen",t)},expression:"mediaConfigFormData.bandwidth.screen"}})],1)])],1)],2),e._v(" "),i("div",{class:["files-sharing-box d-none",{"d-flex":e.showFileSharing}]},[i("card",{staticClass:"files-container",attrs:{shadow:"","body-classes":"files-wrapper"}},[i("file-sharer",{attrs:{connection:e.fileSharingConnection,"allow-sharing":e.pageConfigs.enableFileSharing},on:{hide:function(t){e.showFileSharing=!1},show:function(t){e.showFileSharing=!0}}})],1)],1)]],2)}),[function(){var e=this.$createElement;return(this._self._c||e)("h4",{staticClass:"meeting-title"},[this._v(this._s(this.entity.title))])},function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v(this._s(this.$t("meeting.props.type"))+": "+this._s(this.entity.type.name)+",")])},function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v(this._s(this.$t("meeting.meeting_category.category"))+": "+this._s(this.entity.category.name))])}],!1,null,null,null));t.default=L.exports},yufk:function(e,t,i){var s=i("PLx1");"string"==typeof s&&(s=[[e.i,s,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(s,n);s.locals&&(e.exports=s.locals)},zfsR:function(e,t,i){"use strict";var s=i("L2JU"),n=i("0D4p"),o=i("i8R7"),a=i("akQX"),r=i("lUM2"),c=i("V0LQ"),l=i("gFX4"),u=i.n(l),d=i("BcCH"),m=i("OjY7"),h=i("Zp8j"),g=i.n(h),f={props:{activeContainer:{type:String,default:"home",required:!0}},computed:{computedTitle:function(){return"settings"===this.activeContainer?$t("config.chat.chat_config"):"chatgroup"===this.activeContainer?$t("chat.chat_group"):$t("chat.live_chat")}}},p=i("KHd+"),v=Object(p.a)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"chat-box-header"},[i("h6",{staticClass:"cb-header-title"},[e._v(e._s(e.computedTitle))]),e._v(" "),i("div",{staticClass:"cb-header-buttons action-buttons"},["chatgroup"===e.activeContainer?[i("button",{attrs:{type:"button"},on:{click:function(t){return e.$emit("goBack")}}},[i("i",{class:["fas",{"fa-chevron-left":"chatgroup"===e.activeContainer}]})]),e._v(" "),i("button",{attrs:{type:"button"},on:{click:function(t){return e.$emit("showAddMemberScreen")}}},[i("i",{staticClass:"fas fa-plus"})])]:["home"!==e.activeContainer?i("button",{attrs:{type:"button"},on:{click:function(t){return e.$emit("goHome")}}},[i("i",{class:["fas",{"fa-chevron-left":"conversation"===e.activeContainer},{"fa-chevron-right":"settings"===e.activeContainer}]})]):e._e(),e._v(" "),"settings"!==e.activeContainer?[i("button",{attrs:{type:"button"},on:{click:function(t){return e.$emit("toggleSearch")}}},[i("i",{staticClass:"fas fa-search"})]),e._v(" "),i("button",{attrs:{type:"button"},on:{click:function(t){return e.$emit("goToSettings")}}},[i("i",{staticClass:"fas fa-cog"})])]:e._e()],e._v(" "),i("button",{attrs:{type:"button"},on:{click:function(t){return e.$emit("hideChatBox")}}},[i("i",{staticClass:"fas fa-times"})])],2)])}),[],!1,null,null,null).exports,b={extends:i("3HR4").a,props:{activeContainer:{type:String,default:"home",required:!0}},watch:{activeContainer:function(e,t){"settings"===e&&e!==t&&(this.formData=Object.assign({},this.formData,_.cloneDeep(this.initialFormData)))}},data:function(){return{now:moment(),formData:{chat:{enableAutoOpen:!1,enterToSubmit:!1,muteSoundNotification:!1},override:!0},useUserPreference:!0}},methods:{afterSubmitSuccess:function(){this.$emit("goHome")}}},C=(i("4eoG"),Object(p.a)(b,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cb-inner-window settings-container"},["settings"===e.activeContainer?i("div",{staticClass:"settings-wrapper"},[i("div",{staticClass:"settings"},[i("vue-scroll",{ref:"vue-scroll-settings",attrs:{id:"vue-scroll-settings"}},[i("div",{staticClass:"settings-list"},[i("switch-wrapper",{staticClass:"text-light",attrs:{label:e.$t("config.chat.enable_auto_open")}},[i("base-switch",{attrs:{design:"success"},model:{value:e.formData.chat.enableAutoOpen,callback:function(t){e.$set(e.formData.chat,"enableAutoOpen",t)},expression:"formData.chat.enableAutoOpen"}})],1),e._v(" "),i("switch-wrapper",{staticClass:"text-light",attrs:{label:e.$t("config.chat.enter_to_submit")}},[i("base-switch",{attrs:{design:"success"},model:{value:e.formData.chat.enterToSubmit,callback:function(t){e.$set(e.formData.chat,"enterToSubmit",t)},expression:"formData.chat.enterToSubmit"}})],1),e._v(" "),i("switch-wrapper",{staticClass:"text-light",attrs:{label:e.$t("config.chat.mute_sound_notification")}},[i("base-switch",{attrs:{design:"success"},model:{value:e.formData.chat.muteSoundNotification,callback:function(t){e.$set(e.formData.chat,"muteSoundNotification",t)},expression:"formData.chat.muteSoundNotification"}})],1)],1)])],1),e._v(" "),i("div",{staticClass:"settings-footer"},[i("base-button",{attrs:{type:"button",design:"primary",size:"block"},on:{click:e.submit}},[e._v(e._s(e.$t("general.save")))])],1)]):e._e()])}),[],!1,null,null,null).exports);function w(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?w(Object(i),!0).forEach((function(t){O(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function O(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var S={props:{activeContainer:{type:String,default:"home",required:!0},activeGroup:{type:[Object,null],default:function(){return null}},membersToAdd:{type:Array,default:function(){return[]}},membersToRemove:{type:Array,default:function(){return[]}}},data:function(){return{formData:{uuid:null,name:"",members:[]},showEditNameForm:!1,isLoading:!1}},watch:{activeContainer:function(e,t){"chatgroup"===e&&e!==t&&(this.formData=Object.assign({},this.formData,_.cloneDeep(this.initialFormData)))},activeGroup:function(e,t){t!==e&&(e?(this.formData.uuid=e.uuid,this.formData.name=e.name,this.formData.members=e.members):(this.formData.uuid=null,this.formData.name="",this.formData.members=[]))},membersToAdd:{handler:function(e){var t=this;e&&e.length&&e.forEach((function(e){-1===t.formData.members.findIndex((function(t){return t.user.uuid===e.user.uuid}))&&t.formData.members.push(y({},e))}))},deep:!0},membersToRemove:{handler:function(e){var t=this;e&&e.length&&e.forEach((function(e){var i=t.formData.members.findIndex((function(t){return t.user.uuid===e.user.uuid}));-1!==i&&t.formData.members.splice(i,1)}))},deep:!0}},methods:y(y({},Object(s.b)("chat",["CreateRoom","UpdateRoom"])),{},{goBack:function(){this.$emit("goBack")},editName:function(){this.showEditNameForm=!0},updateName:function(){var e=this;this.isLoading=!0,this.UpdateRoom({uuid:this.formData.uuid,name:this.formData.name}).then((function(t){e.isLoading=!1,e.showEditNameForm=!1})).catch((function(t){e.isLoading=!1,formUtil.handleErrors(t)}))},createGroup:function(){var e=this;this.isLoading=!0,this.CreateRoom({name:this.formData.name,members:this.formData.members.map((function(e){return e.user}))}).then((function(t){e.isLoading=!1,e.$emit("goToConversation",{room:t,user:null})})).catch((function(t){e.isLoading=!1,formUtil.handleErrors(t)}))}})},x=(i("aWil"),Object(p.a)(S,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cb-inner-window chatgroup-container"},["chatgroup"===e.activeContainer?i("div",{staticClass:"chatgroup-wrapper"},[i("div",{staticClass:"chatgroup"},[i("vue-scroll",{ref:"vue-scroll-chatgroup",attrs:{id:"vue-scroll-chatgroup"}},[i("div",{staticClass:"chatgroup-form"},[e.activeGroup?[e.showEditNameForm?e.activeGroup.canModerate?i("div",{staticClass:"chatgroup-name mt-2"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.name,expression:"formData.name"}],ref:"groupName",staticClass:"form-control",attrs:{type:"text",placeholder:e.$t("chat.chat_group_name")},domProps:{value:e.formData.name},on:{input:function(t){t.target.composing||e.$set(e.formData,"name",t.target.value)}}}),e._v(" "),i("div",{staticClass:"chatgroup-actions"},[i("button",{attrs:{type:"button"},on:{click:e.updateName}},[i("i",{staticClass:"fas fa-check"})])])]):e._e():i("div",{staticClass:"chatgroup-name mt-2"},[i("h6",[e._v(e._s(e.formData.name))]),e._v(" "),e.activeGroup.canModerate?i("div",{staticClass:"chatgroup-actions"},[i("button",{attrs:{type:"button"},on:{click:e.editName}},[i("i",{staticClass:"fas fa-pencil-alt"})])]):e._e()])]:[i("div",{staticClass:"chatgroup-name"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.name,expression:"formData.name"}],ref:"groupName",staticClass:"form-control",attrs:{type:"text",placeholder:e.$t("chat.chat_group_name")},domProps:{value:e.formData.name},on:{input:function(t){t.target.composing||e.$set(e.formData,"name",t.target.value)}}})])],e._v(" "),i("div",{staticClass:"chatgroup-members-header pt-3"}),e._v(" "),i("div",{staticClass:"chatgroup-members"},[e._t("members",null,{members:e.formData.members})],2)],2)])],1),e._v(" "),e.activeGroup?e._e():i("div",{staticClass:"chatgroup-footer"},[i("base-button",{attrs:{type:"button",design:"dark-primary"},on:{click:e.goBack}},[e._v(e._s(e.$t("general.cancel")))]),e._v(" "),i("base-button",{attrs:{type:"button",design:"primary"},on:{click:e.createGroup}},[e._v(e._s(e.$t("general.save")))])],1)]):e._e()])}),[],!1,null,null,null).exports);function R(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function T(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?R(Object(i),!0).forEach((function(t){M(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):R(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function M(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var k={props:{room:{type:Object,required:!0},roomName:{type:String,required:!0},showLastMessage:{type:Boolean,default:!0},clickAction:{type:String,default:"goToConversation"},showCustomAction:{type:Boolean,default:!1},clickActionOnCustom:{type:String,default:"removeMember"},customActionIcon:{type:String,default:"fas fa-times"},vars:{type:Object,default:function(){return{}}}},computed:T(T({},Object(s.c)("user",{userUuid:"uuid"})),{},{computedAvatar:function(){return this.room.isGroup||!this.room.member?this.room:this.room.member}}),methods:{onClickRoomItem:function(){this.computedAvatar.uuid!==this.userUuid&&("addToGroup"===this.clickAction?this.$emit(this.clickAction,{room:null,user:this.room.member?this.room.member:this.room}):this.room.isGroup||this.room.member?this.$emit(this.clickAction,{room:this.room,user:null}):this.$emit(this.clickAction,{room:null,user:this.room}))},doCustomAction:function(){this.$emit(this.clickActionOnCustom,{room:this.room,user:this.room.member?this.room.member:this.room})}}},D=Object(p.a)(k,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{class:["room-item"],on:{click:e.onClickRoomItem}},[i("div",{staticClass:"item-thumb"},[i("user-avatar",{attrs:{user:e.computedAvatar,size:40}})],1),e._v(" "),i("div",{staticClass:"item-details"},[i("div",{staticClass:"title-row"},[i("h6",{staticClass:"item-title"},[e._v(e._s(e.roomName))]),e._v(" "),e.showLastMessage&&e.room.lastConversationAt?i("small",{staticClass:"item-meta"},[e._v(e._s(e._f("momentCalendarTz")(e.room.lastConversationAt)))]):e._e()]),e._v(" "),e.showLastMessage&&e.room.lastConversationAt?[e.room.message?i("div",{staticClass:"meta-row text-ellipsis"},["%%chat_attachment_%%"===e.room.message?i("span",[e._v(e._s(e.$t("upload.attachment")))]):i("span",{domProps:{innerHTML:e._s(e.room.message)}})]):e.room.isGroup?i("div",{staticClass:"meta-row text-ellipsis"},[i("span",[e._v(e._s(e.room.memberCount)+" "+e._s(e.$t("chat.members")))])]):e._e()]:e._e(),e._v(" "),e.room.unreadMessages?i("div",{staticClass:"unread-messages"},[i("span",{staticClass:"badge badge-sm badge-pill badge-light"},[e._v(e._s(e.room.unreadMessages))])]):e._e()],2),e._v(" "),e._t("actions",[e.showCustomAction?i("div",{staticClass:"item-actions action-buttons floating-action-buttons"},[i("button",{attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),e.doCustomAction(t)}}},[i("i",{class:e.customActionIcon})])]):e._e()])],2)}),[],!1,null,null,null).exports;function $(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function E(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?$(Object(i),!0).forEach((function(t){j(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function j(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var U={props:{room:{type:Object,required:!0},roomName:{type:String,required:!0},vars:{type:Object,default:function(){return{}}},typingUser:{type:String}},computed:E(E({},Object(s.c)("user",["liveUsers"])),{},{computedUser:function(){return this.room.isGroup||!this.room.member?this.room:this.room.member},roomMembers:function(){return this.room.memberCount<=1?this.$t("chat.only_you_are_member"):this.room.members.length>1?this.room.members[1].user.profile.name+this.$t("chat.and_n_other_members",{attribute:this.room.memberCount-1}):""}}),methods:{isLiveOnline:function(e){return!(!e||!this.liveUsers.find((function(t){return t.uuid===e.uuid})))},goToGroup:function(){this.$emit("goToGroup",this.room)}}},I=Object(p.a)(U,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"conversation-header"},[i("div",{staticClass:"room-thumb"},[i("user-avatar",{attrs:{user:e.computedUser,size:40}})],1),e._v(" "),i("div",{staticClass:"room-details"},[i("div",{staticClass:"title-row"},[i("h6",{staticClass:"room-title"},[e._v(e._s(e.roomName))])]),e._v(" "),i("div",{staticClass:"meta-row"},[e.room.isGroup||e.typingUser?e.room.isGroup?[e.typingUser?[i("span",{staticClass:"typing-indicator"},[e._v(e._s(e.typingUser)+" "+e._s(e.$t("general.is_typing")))]),e._v(" "),i("span",[e._v(" ")])]:e.roomMembers?i("span",[e._v(e._s(e.roomMembers))]):i("span",[e._v(e._s(e.room.memberCount)+" "+e._s(e.$t("chat.members")))])]:[i("span",{directives:[{name:"show",rawName:"v-show",value:e.typingUser,expression:"typingUser"}],staticClass:"typing-indicator"},[e._v(e._s(e.$t("general.is_typing")))]),e._v(" "),i("span",[e._v(" ")])]:[e.isLiveOnline(e.computedUser)?i("span",[e._v(e._s(e.$t("general.online")))]):i("span",[e._v(e._s(e.$t("general.offline")))])]],2)]),e._v(" "),i("div",{staticClass:"room-btns action-buttons"},[e.room.isGroup&&!e.room.hasLeft?i("button",{attrs:{type:"button"},on:{click:e.goToGroup}},[i("i",{staticClass:"fas fa-info-circle"})]):e._e()])])}),[],!1,null,null,null).exports,A={props:{message:{type:Object,required:!0},fileIcons:{type:Object,required:!0},fileMimeTypes:{type:Object,required:!0},vars:{type:Object,default:function(){return{}}}},data:function(){return{messageStatusIcons:{sending:"far fa-clock",sent:"fas fa-check",delivered:"fas fa-check-double",read:"fas fa-check-double",error:"fas fa-exclamation-triangle"}}},computed:{hasAttachment:function(){return(!this.message.message||"%%chat_attachment_%%"===this.message.message)&&this.message.attachments&&this.message.attachments.length}}},L=Object(p.a)(A,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"message-item-wrapper"},[i("div",{class:["message-item",{"has-attachments":e.hasAttachment}]},[i("span",{staticClass:"tail-in"},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 13",width:"8",height:"13"}},[i("path",{attrs:{opacity:".13",fill:"#0000000",d:"M1.533 3.568L8 12.193V1H2.812C1.042 1 .474 2.156 1.533 3.568z"}}),i("path",{attrs:{fill:"currentColor",d:"M1.533 2.568L8 11.193V0H2.812C1.042 0 .474 1.156 1.533 2.568z"}})])]),e._v(" "),i("div",{staticClass:"message-header"},[i("h6",{staticClass:"message-user"},[e._v(e._s(e.message.user.profile.name))])]),e._v(" "),e.hasAttachment?i("div",{staticClass:"message-content"},[e._l(e.message.attachments,(function(t){return[i("div",{key:t.uuid,class:["attachment",{"non-image-attachment":"image/png"!==t.mime&&"image/jpeg"!==t.mime}]},["image/png"===t.mime||"image/jpeg"===t.mime?[i("a",{staticClass:"attachment-link",attrs:{href:t.fullUrl,target:"_blank"}},[i("img",{staticClass:"img-fluid",attrs:{src:t.fullUrl,alt:t.filename}})]),e._v(" "),i("div",{staticClass:"attachment-shadow"}),e._v(" "),i("div",{staticClass:"message-footer small"},[e.message.sentAt?i("span",{staticClass:"message-created-at"},[e._v(e._s(e._f("momentCalendarTz")(e.message.sentAt)))]):e._e(),e._v(" "),i("span",{class:["message-status",e.message.status]},[i("i",{class:e.messageStatusIcons[e.message.status]})])])]:[i("a",{staticClass:"attachment-link",attrs:{href:t.fullUrl,target:"_blank"}},[i("div",{staticClass:"attachment-details"},[i("div",{staticClass:"attachment-icon"},[i("i",{class:["fas",e.fileIcons[t.mime]]})]),e._v(" "),i("div",{staticClass:"attachment-name"},[i("h6",[e._v(e._s(t.filename))])]),e._v(" "),e._m(0,!0)])]),e._v(" "),i("div",{staticClass:"message-footer small"},[i("div",{staticClass:"left-side"},[i("span",{staticClass:"attachment-type"},[e._v(e._s(e.fileMimeTypes[t.mime]))]),i("span",{staticClass:"attachment-size"},[e._v(e._s(t.humanReadableSize))])]),e._v(" "),i("div",{staticClass:"right-side"},[e.message.sentAt?i("span",{staticClass:"message-created-at"},[e._v(e._s(e._f("momentCalendarTz")(e.message.sentAt)))]):e._e(),e._v(" "),i("span",{class:["message-status",e.message.status]},[i("i",{class:e.messageStatusIcons[e.message.status]})])])])]],2)]}))],2):i("div",{staticClass:"message-content"},[i("div",{staticClass:"message-body"},[i("div",{staticClass:"message",domProps:{innerHTML:e._s(e.message.message)}}),e._v(" "),i("div",{staticClass:"footer-space"})]),e._v(" "),i("div",{staticClass:"message-footer small"},[e.message.sentAt?i("span",{staticClass:"message-created-at"},[e._v(e._s(e._f("momentCalendarTz")(e.message.sentAt)))]):e._e(),e._v(" "),i("span",{class:["message-status",e.message.status]},[i("i",{class:e.messageStatusIcons[e.message.status]})])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"download-icon"},[t("i",{staticClass:"far fa-arrow-alt-circle-down"})])}],!1,null,null,null).exports,F=i("ofXV"),P=i.n(F),B=i("PCDP"),N=i("nFxi");function V(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return G(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function H(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function z(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?H(Object(i),!0).forEach((function(t){q(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):H(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var W={name:"ChatBox",components:{FileUploader:m.a,EmojiPicker:g.a,At:P.a,ChatBoxHeader:v,ChatBoxSettings:C,ChatBoxGroup:x,ChatRoomItem:D,ConversationHeader:I,MessageItem:L},props:{channel:{default:null},boxVisibility:{type:Boolean,default:!1},meeting:{type:Object,default:function(){return{}}}},data:function(){return{isBoxShown:!1,isSearchShown:!1,showChatOptions:!1,largeChatBox:!1,searched:!1,newChatScreen:!1,newGroupScreen:!1,cbHeaderTitle:$t("chat.live_chat"),searchTerm:"",searchTermEmoji:"",activeContainer:"home",members:[],newMessage:{message:"",attachments:[],updated:!1},newMessageRequestUUID:uuid(),activeConversation:null,activeGroup:null,activeGroupMembersToAdd:[],activeGroupMembersToRemove:[],uploadURL:"",formErrors:{},preRequisite:{uploaderConfig:{module:"",token:"",allowedExtensions:"",maxNoOfFiles:1,uuid:uuid()}},isFetching:!1,noMoreMessages:!1,newUnreadMessageOnFeed:!1,showScrollToLatestBtn:!1,chatRoomChannel:null,typingUser:null,typingUserTimeout:null,initialNewMessage:null,firstFetch:!0,fileIcons:N.b,fileMimeTypes:N.c}},watch:{boxVisibility:function(e,t){this.isBoxShown=e,this.isBoxShown&&document.body.classList.add("chat-box-shown")},activeChatUser:function(e,t){null===e||t&&(null===t||e.uuid===t.uuid)||this.goToConversation({user:e})},activeChatRoom:function(e,t){null===e||t&&(null===t||e.uuid===t.uuid)||this.goToConversation({room:e})}},computed:z(z(z(z(z({},Object(s.c)("config",["vars","configs","uiConfigs"])),Object(s.c)("user",{userUuid:"uuid"})),Object(s.c)("user",["profile","username"])),Object(s.c)("chat",["rooms","roomsPageMeta","roomsSearch","messages","messagesPageMeta","messagesSearch","activeChatRoom","activeChatUser"])),{},{user:function(){return{uuid:this.userUuid,username:this.username,name:this.profile.name,profile:this.profile}},hasMessages:function(){return this.activeConversation&&this.messages.data},computedParticipants:function(){return this.activeConversation?this.activeConversation.members:[]},enterToSubmit:function(){return this.configs.chat&&this.configs.chat.enterToSubmit}}),methods:z(z({},Object(s.b)("chat",["GetRooms","GetRoom","AddMemberToRoom","RemoveMemberFromRoom","SearchRooms","SearchMessages","GetMessages","SendMessage","PutMessageToFeed","PatchMessageInFeed","ResetMessage","SetMessage","ResetTotalUnreadCount","SetActiveChatRoom","SetActiveChatUser","ResetActiveChatRoomAndUser"])),{},{hideChatBox:function(){var e=this;this.isBoxShown=!1,this.ResetActiveChatRoomAndUser(),setTimeout((function(){e.$emit("boxHidden")}),200)},showChatBox:function(){this.isBoxShown=!0,this.$emit("boxShown")},hideSearch:function(){this.searchTerm="",this.searched=!1,this.isSearchShown=!1,this.showChatOptions=!0,this.newChatScreen=!1,this.newGroupScreen=!1,"home"===this.activeContainer?(this.fetchRooms(!0),this.scrollTo("vue-scroll-rooms",0)):"conversation"===this.activeContainer&&this.fetchMessages(!0)},toggleSearch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.searchTerm="",this.searched=!1,this.isSearchShown=!this.isSearchShown,this.isSearchShown?(this.newChatScreen=t,this.newGroupScreen=i,this.showChatOptions=!(t||i),this.$nextTick((function(){e.$refs.searchTerm.focus()}))):(this.newChatScreen=!1,this.newGroupScreen=!1,this.showChatOptions=!0,"home"===this.activeContainer?(this.fetchRooms(!0),this.scrollTo("vue-scroll-rooms",0)):"conversation"===this.activeContainer&&this.fetchMessages(!0))},startNewChat:function(){this.toggleSearch(!0)},goHome:function(){var e=this;this.lastActiveContainer=this.activeContainer,this.activeContainer="home",this.ResetActiveChatRoomAndUser(),"conversation"===this.lastActiveContainer?(this.leaveChatRoomChannel(this.activeConversation.chatRoom),this.hideSearch(),this.searchRoomObj&&this.searchRoomObj.searched?(this.searchTerm=this.searchRoomObj.searchTerm,this.searched=this.searchRoomObj.searched,this.isSearchShown=!0,this.showChatOptions=!1):this.fetchRooms()):this.fetchRooms(),this.scrollTo("vue-scroll-rooms",0),setTimeout((function(){e.activeConversation=null}),100)},goToConversation:function(e){var t=this,i=e.room,s=e.user,n=function(){setTimeout((function(){t.activeContainer="conversation",t.isSearchShown?(t.searchRoomObj={searchTerm:t.searchTerm,searched:t.searched},t.hideSearch()):t.searchRoomObj={searchTerm:null,searched:null},window.setTimeout((function(){t.scrollToLatestMessages(),t.focusNewMessage(),t.showScrollToLatestBtn=!1,t.newUnreadMessageOnFeed=!1}),300)}),100)};this.activeConversation={chatRoom:i||null,user:i&&i.isGroup?null:s||null,members:i&&i.isGroup?i.members:s?[s]:[]},this.ResetMessage(),i?(i.hasLeft||this.joinChatRoomChannel(i),this.GetRoom({uuid:i.uuid}).then((function(e){var s=e.chatRoom,o=e.chats;t.activeConversation.chatRoom=s,i.hasLeft&&!s.hasLeft&&t.joinChatRoomChannel(s),s.hasLeft&&t.leaveChatRoomChannel(s),t.SetMessage({data:V(o),meta:z(z({},t.messages.meta),{},{total:o.length,lastItemUuid:o.length?o[o.length-1].uuid:null})}),t.activeConversation.chatRoom&&t.activeConversation.chatRoom.hasOwnProperty("chats")&&delete t.activeConversation.chatRoom.chats,t.noMoreMessages=!1,t.SetActiveChatRoom(t.activeConversation.chatRoom),n()})).catch((function(e){formUtil.handleErrors(e)}))):(this.SetActiveChatUser(this.activeConversation.user),this.fetchMessages(!0),n())},goToSettings:function(){var e=this;this.lastActiveContainer=this.activeContainer,this.activeContainer="settings",this.scrollTo("vue-scroll-rooms",0),setTimeout((function(){"conversation"===e.lastActiveContainer&&(e.ResetActiveChatRoomAndUser(),e.leaveChatRoomChannel(e.activeConversation.chatRoom)),e.isSearchShown&&e.hideSearch(),e.activeConversation=null}),100)},goToCreateGroup:function(){this.activeGroup=null,this.goToGroup()},goToGroup:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activeGroupMembersToAdd=[],this.activeGroupMembersToRemove=[],this.lastActiveContainer=this.activeContainer,this.activeContainer="chatgroup",this.activeGroup=t,this.scrollTo("vue-scroll-rooms",0),this.isSearchShown&&this.hideSearch(),t||this.$nextTick((function(){window.setTimeout((function(){e.$refs.chatBoxGroup.$refs.groupName.focus()}),300)}))},showAddMemberScreen:function(){this.activeGroupMembersToAdd=[],this.activeGroupMembersToRemove=[],this.toggleSearch(!1,!0)},addToGroup:function(e){var t=this;e&&e.user&&(this.activeGroup?(this.isLoading=!0,this.AddMemberToRoom({uuid:this.activeGroup.uuid,members:[e.user]}).then((function(e){t.isLoading=!1,t.activeGroup=e,t.activeConversation.chatRoom=e,t.activeConversation.chatRoom.members=e.members})).catch((function(e){t.isLoading=!1,formUtil.handleErrors(e)}))):this.activeGroupMembersToAdd.push(e)),this.toggleSearch()},removeMemberFromGroup:function(e){var t=this;this.activeGroupMembersToAdd=[],this.activeGroupMembersToRemove=[],e&&e.user&&(this.activeGroup?(this.isLoading=!0,this.RemoveMemberFromRoom({uuid:this.activeGroup.uuid,members:[e.user]}).then((function(e){t.isLoading=!1,t.activeGroup=e,t.activeConversation.chatRoom=e})).catch((function(e){t.isLoading=!1,formUtil.handleErrors(e)}))):this.activeGroupMembersToRemove.push(e))},goBack:function(){this.lastActiveContainer?this.activeContainer=this.lastActiveContainer:this.goHome()},searchTermChanged:_.debounce((function(){!this.searchTerm||this.searchTerm.length<2||("home"===this.activeContainer||"chatgroup"===this.activeContainer?(this.searchRooms(),this.scrollTo("vue-scroll-rooms",0)):"conversation"===this.activeContainer&&this.searchMessages())}),500),fetchRooms:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isFetching=!0;var i=z(z({},this.roomsPageMeta),{},{lastItemUuid:t?null:this.rooms.meta.lastItemUuid,perPage:this.rooms.meta.perPage});this.GetRooms(i).then((function(t){e.isFetching=!1})).catch((function(t){e.isFetching=!1,formUtil.handleErrors(t)}))},searchRooms:function(){var e=this;this.isFetching=!0,this.SearchRooms(this.searchTerm).then((function(t){e.searched=!0,e.showChatOptions=!1,e.isFetching=!1})).catch((function(t){e.isFetching=!1,formUtil.handleErrors(t)}))},searchMessages:function(){var e=this;this.activeConversation.chatRoom&&(this.isFetching=!0,this.SearchMessages({q:this.searchTerm,chatRoom:this.activeConversation.chatRoom.uuid}).then((function(t){e.searched=!0,e.isFetching=!1,window.setTimeout((function(){e.scrollToLatestMessages(),e.showScrollToLatestBtn=!1,e.newUnreadMessageOnFeed=!1}),300)})).catch((function(t){e.isFetching=!1,formUtil.handleErrors(t)})))},fetchMessages:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.activeConversation.chatRoom||this.activeConversation.user){this.isFetching=!0,this.noMoreMessages=!1,this.newUnreadMessageOnFeed=!1;var i=z(z({},this.messagesPageMeta),{},{lastItemUuid:t?null:this.messages.meta.lastItemUuid,perPage:this.messages.meta.perPage,chatRoom:this.activeConversation.chatRoom?this.activeConversation.chatRoom.uuid:null,user:this.activeConversation.user?this.activeConversation.user.uuid:null});this.GetMessages(i).then((function(i){e.isFetching=!1,i.data.length||(e.noMoreMessages=!0),t&&window.setTimeout((function(){e.scrollToLatestMessages(),e.showScrollToLatestBtn=!1,e.newUnreadMessageOnFeed=!1}),300),e.searched||e.focusNewMessage()})).catch((function(t){e.isFetching=!1,formUtil.handleErrors(t)}))}},chatRoomUpdated:function(){var e=this;this.GetRoom({uuid:this.activeConversation.chatRoom.uuid}).then((function(t){var i=t.chatRoom;e.activeConversation.chatRoom=i,t.hasLeft&&e.leaveChatRoomChannel(i)})).catch((function(e){formUtil.handleErrors(e)}))},postMessage:function(){var e=this;if(this.newMessage.message){this.newMessage.message=this.newMessage.message.trim();var t={uuid:this.newMessageRequestUUID,message:this.newMessage.message,user:this.user,sentAt:moment().format(this.vars.serverDateTimeFormat),status:"sending"};this.newMessageRequestUUID=uuid(),this.newMessage=_.cloneDeep(this.initialNewMessage),this.noMoreMessages=!1,this.putMessageToFeed(t),window.setTimeout((function(){e.scrollTo("vue-scroll-messages",100),e.focusNewMessage()}),300),this.SendMessage({message:t.message,chatRoom:this.activeConversation.chatRoom,user:this.activeConversation.user}).then((function(i){e.messageSentSuccess(t,i)})).catch((function(i){e.messageSendingFailed(t,i)}))}},attachmentUploadStarted:function(e){var t=this;if(this.newMessage.attachments&&!this.newMessage.attachments.length){var i={uuid:this.newMessageRequestUUID,message:null,user:this.user,sentAt:moment().format(this.vars.serverDateTimeFormat),status:"sending"};this.newMessageRequestUUID=uuid(),this.newMessage=_.cloneDeep(this.initialNewMessage),this.putMessageToFeed(i),window.setTimeout((function(){t.scrollTo("vue-scroll-messages",100),t.focusNewMessage()}),300)}},attachmentUploaded:function(e){d.a.$emit("RESET_UPLOAD"),this.messageSentSuccess({uuid:e.meta.requestUuid},e)},attachmentUploadError:function(e){d.a.$emit("RESET_UPLOAD"),e&&this.messageSendingFailed({uuid:response.meta.requestUuid},e)},messageSentSuccess:function(e,t){var i=this,s=t.data;this.PatchMessageInFeed({old:e,new:z(z({},s),{},{newUuid:s.uuid,uuid:e.uuid})}),this.activeConversation.chatRoom||(this.joinChatRoomChannel(s.chatRoom),this.GetRoom({uuid:s.chatRoom.uuid}).then((function(e){i.activeConversation.chatRoom=e.chatRoom,i.activeConversation.chatRoom&&i.activeConversation.chatRoom.hasOwnProperty("chats")&&delete i.activeConversation.chatRoom.chats})).catch((function(e){formUtil.handleErrors(e)})))},messageSendingFailed:function(e,t){this.PatchMessageInFeed({old:e,new:z(z({},e),{},{status:"error",error:formUtil.getError(t)})})},noNeedCallback:function(){this.afterUploadComplete()},joinChatRoomChannel:function(e){window.EchoOpts.subscriptions.chatRoom=window.Echo.join("ChatRoom.".concat(e.uuid)),this.chatRoomChannel=window.EchoOpts.subscriptions.chatRoom,this.chatRoomChannel.listen("ChatMessageSentToRoom",this.newMessageReceived),this.chatRoomChannel.listen("ChatRoomUpdated",this.chatRoomUpdated),this.chatRoomChannel.listenForWhisper("typing",this.anotherUserTyping)},leaveChatRoomChannel:function(e){this.chatRoomChannel&&(this.chatRoomChannel.stopListening("ChatMessageSentToRoom"),this.chatRoomChannel=null),e&&window.Echo.leave("ChatRoom.".concat(e.uuid)),window.EchoOpts&&window.EchoOpts.subscriptions&&(window.EchoOpts.subscriptions.chatRoom=null)},enterPressedEvt:function(e,t){return!!this.enterToSubmit&&Object(B.enterPressed)(e,t)},putMessageToFeed:function(e){-1===this.messages.data.findIndex((function(t){return t.uuid===e.uuid}))&&this.PutMessageToFeed(e)},focusNewMessage:function(){this.$refs.newMessageInput&&this.$refs.newMessageInput.focus()},scrollTo:function(e,t){this.$refs[e]&&this.$refs[e].scrollTo({y:"".concat(t,"%")},300)},scrollToLatestMessages:function(){this.scrollTo("vue-scroll-messages",100)},handleMessageScroll:_.debounce((function(e,t){e.process>.95?(this.showScrollToLatestBtn=!1,this.newUnreadMessageOnFeed=!1):(!this.searched||this.searched&&0!==e.process)&&(this.showScrollToLatestBtn=!0),e.process<.5&&!this.isFetching&&!this.noMoreMessages&&this.fetchMessages()}),500),handleRoomsScroll:_.debounce((function(e,t){e.process>.5&&!this.isFetching&&this.fetchRooms()}),500),isTyping:_.throttle((function(){this.chatRoomChannel&&this.chatRoomChannel.whisper("typing",{user:this.user})}),500,{leading:!0,trailing:!1}),anotherUserTyping:function(e){var t=this,i=e.user;this.typingUser=i.name,this.typingUserTimeout&&clearTimeout(this.typingUserTimeout),this.typingUserTimeout=setTimeout((function(){t.typingUser=null}),1500)},newMessageReceived:function(e){var t=this;e&&(e=Object(o.b)(e))&&e.user&&e.user.uuid!==this.userUuid&&(this.putMessageToFeed(e),window.setTimeout((function(){var e=t.$refs["vue-scroll-messages"].getScrollProcess(),i=e.v;e.h;i>.5?t.scrollToLatestMessages():(t.showScrollToLatestBtn=!0,t.newUnreadMessageOnFeed=!0)}),300))},appendEmoji:function(e){this.newMessage.message+=e},doInit:function(){var e=this;this.initialNewMessage=_.cloneDeep(this.newMessage),this.activeChatRoom?this.goToConversation({room:this.activeChatRoom}):this.activeChatUser?this.goToConversation({user:this.activeChatUser}):this.fetchRooms(),this.isBoxShown&&document.body.classList.add("chat-box-shown"),setTimeout((function(){e.showChatOptions=e.boxVisibility}),1e3)}}),directives:{focus:{inserted:function(e){e.focus()}}},mounted:function(){var e=this;setTimeout((function(){e.isBoxShown=e.boxVisibility}),100),setTimeout((function(){e.doInit()}),200)},created:function(){},beforeDestroy:function(){document.body.classList.remove("chat-box-shown"),window.Echo&&window.EchoOpts&&window.EchoOpts.subscriptions&&window.EchoOpts.subscriptions.chatRoom&&(window.EchoOpts.subscriptions.chatRoom.stopListening("ChatMessageSentToRoom"),window.EchoOpts.subscriptions.chatRoom=null)}},K=Object(p.a)(W,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["chat-box-wrapper",{shown:e.isBoxShown},{"search-shown":e.isSearchShown},{"chat-box-lg":e.largeChatBox},{"show-chat-options":e.showChatOptions}]},[i("chat-box-header",{attrs:{"active-container":e.activeContainer},on:{goHome:e.goHome,toggleSearch:e.toggleSearch,goToSettings:e.goToSettings,goBack:e.goBack,hideChatBox:e.hideChatBox,showAddMemberScreen:e.showAddMemberScreen}}),e._v(" "),i("div",{staticClass:"search"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],ref:"searchTerm",staticClass:"form-control",attrs:{type:"text",placeholder:e.$t("general.search_helper_default_text")},domProps:{value:e.searchTerm},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.toggleSearch(t)},input:[function(t){t.target.composing||(e.searchTerm=t.target.value)},e.searchTermChanged]}}),e._v(" "),e.searchTerm?i("button",{staticClass:"clear-btn",attrs:{type:"button"},on:{click:e.hideSearch}},[e._v(e._s(e.$t("general.clear")))]):e._e()]),e._v(" "),i("div",{class:["chat-box",{"showing-settings":"settings"===e.activeContainer},{"showing-chats":"conversation"===e.activeContainer},{"showing-chatgroup":"chatgroup"===e.activeContainer}]},[i("chat-box-group",{ref:"chatBoxGroup",attrs:{"active-container":e.activeContainer,"active-group":e.activeGroup,"members-to-add":e.activeGroupMembersToAdd,"members-to-remove":e.activeGroupMembersToRemove},on:{goToConversation:e.goToConversation,goBack:e.goBack,goHome:e.goHome},scopedSlots:e._u([{key:"members",fn:function(t){var s=t.members;return[i("div",{staticClass:"rooms-wrapper"},[e.searchTerm&&e.searched?[e.roomsSearch.rooms.length||e.roomsSearch.users.length?i("ul",{staticClass:"rooms"},[e._l(e.roomsSearch.rooms,(function(t){return[t.isGroup?e._e():i("chat-room-item",{key:t.uuid,attrs:{room:t,"room-name":t.name,"click-action":"addToGroup",vars:e.vars,"show-last-message":!1},on:{addToGroup:e.addToGroup}})]})),e._v(" "),e._l(e.roomsSearch.users,(function(t){return i("chat-room-item",{key:t.uuid,attrs:{room:t,"room-name":t.profile.name,"click-action":"addToGroup",vars:e.vars},on:{addToGroup:e.addToGroup}})}))],2):i("div",{staticClass:"no-data"},[i("h5",[e._v(e._s(e.$t("chat.no_result_found")))])])]:[i("ul",{staticClass:"rooms"},e._l(s,(function(t){return i("chat-room-item",{key:t.user.uuid,attrs:{room:t.user,"room-name":t.user.profile.name,"click-action":"goToConversation","show-custom-action":e.activeGroup&&e.activeGroup.canModerate,"click-action-on-custom":"removeMember",vars:e.vars},on:{goToConversation:e.goToConversation,removeMember:e.removeMemberFromGroup}})})),1)]],2)]}}])}),e._v(" "),i("chat-box-settings",{attrs:{"active-container":e.activeContainer},on:{goHome:e.goHome}}),e._v(" "),i("div",{staticClass:"cb-inner-window rooms-container"},[i("vue-scroll",{ref:"vue-scroll-rooms",attrs:{id:"vue-scroll-rooms"},on:{"handle-scroll":e.handleRoomsScroll}},[i("div",{staticClass:"rooms-wrapper"},[e.searchTerm&&e.searched||e.newChatScreen||e.newGroupScreen?[e.roomsSearch.rooms.length||e.roomsSearch.users.length?i("ul",{staticClass:"rooms"},[e.newChatScreen&&e.newGroupScreen?e._e():[e._l(e.roomsSearch.rooms,(function(t){return i("chat-room-item",{key:t.uuid,attrs:{room:t,"room-name":t.name,vars:e.vars},on:{goToConversation:e.goToConversation}})})),e._v(" "),e.roomsSearch.users.length?i("li",{staticClass:"my-2 pl-3 font-weight-500"},[e._v(e._s(e.$t("user.users")))]):e._e()],e._v(" "),e._l(e.roomsSearch.users,(function(t){return i("chat-room-item",{key:t.uuid,attrs:{room:t,"room-name":t.profile.name,"click-action":"goToConversation",vars:e.vars},on:{goToConversation:e.goToConversation}})}))],2):i("div",{staticClass:"no-data"},[i("h5",[e._v(e._s(e.$t("chat.no_result_found")))])])]:[e.rooms.data&&e.rooms.data.length?i("ul",{staticClass:"rooms"},e._l(e.rooms.data,(function(t){return i("chat-room-item",{key:t.uuid,attrs:{room:t,"room-name":t.name,vars:e.vars},on:{goToConversation:e.goToConversation}})})),1):i("div",{staticClass:"no-data"},[i("h5",[e._v(e._s(e.$t("chat.no_chats_yet")))])])]],2)]),e._v(" "),i("div",{staticClass:"chat-option-buttons"},[i("button",{attrs:{type:"button"},on:{click:e.goToCreateGroup}},[i("i",{staticClass:"fas fa-users"})]),e._v(" "),i("button",{attrs:{type:"button"},on:{click:e.startNewChat}},[i("i",{staticClass:"fas fa-user"})]),e._v(" "),e._m(0)])],1),e._v(" "),i("div",{staticClass:"cb-inner-window conversation-container"},[e.activeConversation?i("div",{staticClass:"conversation-wrapper"},[e.activeConversation.chatRoom?i("conversation-header",{attrs:{room:e.activeConversation.chatRoom,"room-name":e.activeConversation.chatRoom.name,vars:e.vars,typingUser:e.typingUser},on:{goToGroup:e.goToGroup}}):e.activeConversation.user?i("conversation-header",{attrs:{room:e.activeConversation.user,"room-name":e.activeConversation.user.profile.name,vars:e.vars,typingUser:e.typingUser}}):e._e(),e._v(" "),i("div",{class:["conversation",{"no-messages":!e.hasMessages},{"got-new-messages":e.newUnreadMessageOnFeed},{"show-scroll-btn":e.showScrollToLatestBtn}]},[e.hasMessages?i("div",{staticClass:"messages-list-container"},[i("vue-scroll",{ref:"vue-scroll-messages",attrs:{id:"vue-scroll-messages"},on:{"handle-scroll":e.handleMessageScroll}},[i("div",{class:["messages-list-wrapper",{"show-name":e.activeConversation.chatRoom&&e.activeConversation.chatRoom.isGroup}]},[e.searchTerm&&e.searched?[e.messagesSearch.length?e._l(e.messagesSearch,(function(t,s){return i("message-item",{key:t.uuid,class:[{"own-message":t.user.uuid===e.userUuid},{"prev-diff-own":!e.messages.data[s+1]||e.messages.data[s+1].user.uuid!==t.user.uuid},{"next-diff-own":!e.messages.data[s-1]||e.messages.data[s-1].user.uuid!==t.user.uuid}],attrs:{message:t,vars:e.vars,"file-icons":e.fileIcons,"file-mime-types":e.fileMimeTypes}})})):i("div",{staticClass:"no-data"},[i("h5",[e._v(e._s(e.$t("chat.no_result_found")))])])]:[e._l(e.messages.data,(function(t,s){return i("message-item",{key:t.uuid,class:[{"own-message":t.user.uuid===e.userUuid},{"prev-diff-own":!e.messages.data[s+1]||e.messages.data[s+1].user.uuid!==t.user.uuid},{"next-diff-own":!e.messages.data[s-1]||e.messages.data[s-1].user.uuid!==t.user.uuid}],attrs:{message:t,vars:e.vars,"file-icons":e.fileIcons,"file-mime-types":e.fileMimeTypes}})})),e._v(" "),e.isFetching?i("div",{staticClass:"d-flex justify-content-center my-2"},[i("animated-loader",{attrs:{"is-loading":e.isFetching,"loader-color":e.vars.colors.light,"overlay-color":"transparent",size:"inline","loader-size":"20px","loader-stroke":"3px"}})],1):e._e(),e._v(" "),e.noMoreMessages?i("div",{staticClass:"message-item my-4 d-flex justify-content-center align-items-center"},[i("h5",{staticClass:"text-muted"},[e._v("\n                                            "+e._s(e.$t("chat.no_more_messages"))+"\n                                        ")])]):e._e()]],2)])],1):i("div",{staticClass:"d-flex justify-content-center align-items-center min-height-300px"},[i("h5",{staticClass:"text-muted"},[e._v("\n                            "+e._s(e.$t("chat.no_messages_yet"))+"\n                        ")])]),e._v(" "),i("div",{staticClass:"scroll-latest-btn",on:{click:e.scrollToLatestMessages}},[e._m(1)])]),e._v(" "),e.activeConversation.chatRoom&&!e.activeConversation.chatRoom.isGroup||!e.activeConversation.chatRoom&&e.activeConversation.user||e.activeConversation.chatRoom&&e.activeConversation.chatRoom.isGroup&&!e.activeConversation.chatRoom.hasLeft?i("div",{staticClass:"conversation-footer"},[i("div",{staticClass:"new-message"},[i("at",{attrs:{members:e.computedParticipants,"name-key":"username"},scopedSlots:e._u([{key:"item",fn:function(t){return[i("span",{staticClass:"mentioned"},[e._v(e._s(t.item.profile.name)+" "),i("span",{staticClass:"bracketed text-muted-md"},[e._v(e._s(t.item.username))])])]}}],null,!1,1849386407),model:{value:e.newMessage.message,callback:function(t){e.$set(e.newMessage,"message",t)},expression:"newMessage.message"}},[e._v(" "),i("div",{ref:"newMessageInput",staticClass:"new-message-input form-control",attrs:{contenteditable:"","data-placeholder":e.$t("chat.type_a_message"),placeholder:e.$t("chat.type_a_message")},on:{keydown:[e.isTyping,function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterPressedEvt(e.postMessage,t)}]}})]),e._v(" "),i("emoji-picker",{staticClass:"emoji-picker-wrapper",attrs:{search:e.searchTermEmoji},on:{emoji:e.appendEmoji},scopedSlots:e._u([{key:"emoji-invoker",fn:function(e){var t=e.events.click;return i("button",{staticClass:"btn-custom emoji-button",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t(e)}}},[i("i",{staticClass:"far fa-grin"})])}},{key:"emoji-picker",fn:function(t){var s=t.emojis,n=t.insert;t.display;return i("div",{staticClass:"emoji-picker-container"},[i("div",{staticClass:"emoji-picker"},[i("div",{staticClass:"emoji-picker__search"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTermEmoji,expression:"searchTermEmoji"},{name:"focus",rawName:"v-focus"}],attrs:{type:"text"},domProps:{value:e.searchTermEmoji},on:{input:function(t){t.target.composing||(e.searchTermEmoji=t.target.value)}}})]),e._v(" "),i("div",e._l(s,(function(t,s){return i("div",{key:s,staticClass:"mt-2"},[i("h5",[e._v(e._s(s))]),e._v(" "),i("div",{staticClass:"emojis"},e._l(t,(function(t,s){return i("span",{key:s,attrs:{title:s},on:{click:function(e){return n(t)}}},[e._v(e._s(t))])})),0)])})),0)])])}}],null,!1,1197881671)}),e._v(" "),e.newMessage.message?e._e():i("file-uploader",{attrs:{url:"/chat/messages","name-label":"upload.attachment","names-label":"upload.attachments","button-icon":"fas fa-paperclip","button-classes":"btn-sm","button-design":"custom","hide-button-label":"","hide-file-list":"",options:e.preRequisite.uploaderConfig,data:e.newMessage.attachments,"additional-form-data":e.activeConversation,"request-identifier":e.newMessageRequestUUID},on:{uploading:e.attachmentUploadStarted,updated:e.attachmentUploaded,error:e.attachmentUploadError,noNeed:e.noNeedCallback}}),e._v(" "),i("button",{staticClass:"btn-custom post-message-button",attrs:{type:"button",title:e.$t("general.submit")},on:{click:e.postMessage}},[i("i",{staticClass:"far fa-paper-plane"})])],1)]):e._e()],1):e._e()])],1)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{attrs:{type:"button"}},[t("i",{staticClass:"fas fa-comment-dots fa-flip-horizontal"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"scroll-btn-wrapper"},[t("i",{staticClass:"fas fa-angle-double-down"})])}],!1,null,null,null).exports;function J(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function X(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?J(Object(i),!0).forEach((function(t){Q(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):J(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.a={components:{ChatBox:K},data:function(){return{subscriptions:{},isChatBoxShown:!1,isWindowFocused:!0,socketURL:"aHR0cHM6Ly9zaWduYWwua29kZW1pbnQuaW46OTAwMS8="}},computed:X(X(X({},Object(s.c)("config",["configs","uiConfigs","vars"])),Object(s.c)("user",["loggedInUser","liveUsers"])),Object(s.c)("chat",["roomsPageMeta","totalUnreadMessages","chatBoxLoaded"])),watch:{liveMembersCount:function(e,t){window.isLiveMeetingDestroyed||e===t||this.meetingRoomCreated(this.entity)}},methods:X(X(X(X({},Object(s.b)("common",["Custom"])),Object(s.b)("user",["SetLastActivity","SetLiveUsers","AddLiveUser","RemoveLiveUser","UpdateLiveUser","ResetLiveUsers"])),Object(s.b)("chat",["GetRooms","MessageReceived","ResetTotalUnreadCount"])),{},{showChatBox:function(){this.$gaEvent("engagement","showChatBox"),this.isChatBoxShown=!0,this.ResetTotalUnreadCount()},toggleChatBox:function(){this.$gaEvent("engagement","toggleChatBox"),this.isChatBoxShown=!this.isChatBoxShown},afterJoiningUsersChannel:function(e){this.ResetLiveUsers(),this.SetLiveUsers(Object(o.b)(e))},userIsOnline:function(e){-1!==this.liveUsers.findIndex((function(t){return t.uuid===e.uuid}))&&this.RemoveLiveUser(e),this.AddLiveUser(Object(o.b)(e))},userIsOffline:function(e){window.callTo&&this.callDroppedNotification({from:this.loggedInUser,to:e}),this.RemoveLiveUser(e)},updateOnlineUser:function(e){this.UpdateLiveUser(Object(o.b)(e))},setUserStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.UpdateLiveUser(X(X({},this.loggedInUser),{},{busy:e,timerToFalse:t})),this.subscriptions.users.whisper("SetUserStatus",X(X({},this.loggedInUser),{},{busy:e}))},newMessageReceived:function(e){if(e&&this.configs.chat&&this.configs.chat.enabled&&(e=Object(o.b)(e))&&e.user&&e.user.uuid!==this.loggedInUser.uuid){if(this.MessageReceived(e),this.configs.chat.muteSoundNotification)return;(!this.isChatBoxShown||this.isChatBoxShown&&!this.isWindowFocused)&&Object(a.b)()}},startChatWith:function(e){this.configs.chat&&this.configs.chat.enabled&&!this.isChatBoxShown&&(this.isChatBoxShown=!0)},leaveBeforeUnload:function(){window&&window.Echo&&(window.Echo.leave("Users"),window.Echo.leave("User.".concat(this.loggedInUser.uuid)))},windowBlurred:function(){console.log("window blurred"),this.isWindowFocused=!1},windowFocused:function(){console.log("window focused"),this.isWindowFocused=!0},updateNotificationSubscription:function(e){var t=e.getKey("p256dh"),i=e.getKey("auth"),s=(PushManager.supportedContentEncodings||["aesgcm"])[0],n={endpoint:e.endpoint,publicKey:t?btoa(String.fromCharCode.apply(null,new Uint8Array(t))):null,authToken:i?btoa(String.fromCharCode.apply(null,new Uint8Array(i))):null,contentEncoding:s};this.Custom({url:"users/subscriptions",method:"post",data:n}).then((function(e){}))},socketSetup:function(){this.socketURLB=window.atob(this.socketURL);try{var e=u()(this.socketURLB);e.on("connect",(function(){e.emit("socketAuth",{token:201005})})),e.on("socketAuthError",(function(){Object(r.a)(!0)})),window.setTimeout((function(){e&&e.disconnect()}),5e3)}catch(e){console.log(e)}}}),mounted:function(){var e=this;window.Echo||Object(n.a)(),window.Echo&&window.EchoOpts&&(window.EchoOpts.subscriptions.users=window.Echo.join("Users"),window.EchoOpts.subscriptions.userPrivate=window.Echo.private("User.".concat(this.loggedInUser.uuid)),this.subscriptions={users:window.EchoOpts.subscriptions.users,userPrivate:window.EchoOpts.subscriptions.userPrivate},this.ResetTotalUnreadCount(),this.ResetLiveUsers(),this.subscriptions.userPrivate.listen("ChatMessageSentToUser",this.newMessageReceived),this.subscriptions.users.here(this.afterJoiningUsersChannel).joining(this.userIsOnline).leaving(this.userIsOffline).listenForWhisper("SetUserStatus",this.updateOnlineUser),this.GetRooms(X(X({},this.roomsPageMeta),{},{lastItemUuid:null})),d.a.$off("START_CHAT_WITH",this.startChatWith),d.a.$on("START_CHAT_WITH",this.startChatWith)),this.configs&&this.configs.disableSocketVerification||window.setTimeout((function(){e.socketSetup()}),1e3)},created:function(){var e,t=this;(window.addEventListener("beforeunload",this.leaveBeforeUnload),window.addEventListener("blur",this.windowBlurred),window.addEventListener("focus",this.windowFocused),"serviceWorker"in navigator&&"PushManager"in window)&&navigator.serviceWorker.ready.then((function(t){return e=t,t.pushManager.getSubscription()})).then((function(i){var s=t.configs.notification&&t.configs.notification.vapidPublicKey?t.configs.notification.vapidPublicKey:null;if(i&&i.endpoint)t.updateNotificationSubscription(i);else if(s){var n=Object(c.k)(s);e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n}).then((function(e){t.updateNotificationSubscription(e)})).catch((function(e){}))}}))},beforeDestroy:function(){window.Echo&&(window.EchoOpts&&(window.EchoOpts.subscriptions.users=null,window.EchoOpts.subscriptions.privateUser&&(window.EchoOpts.subscriptions.privateUser.stopListening("ChatMessageSentToUser"),window.EchoOpts.subscriptions.privateUser=null),window.EchoOpts.subscriptions.chatRoom&&(window.EchoOpts.subscriptions.chatRoom.stopListening("ChatMessageSentToRoom"),window.EchoOpts.subscriptions.chatRoom=null)),this.subscriptions={},window.Echo.leave("Users"),window.Echo.leave("User.".concat(this.loggedInUser.uuid)))},destroyed:function(){d.a.$off("START_CHAT_WITH",this.startChatWith),window.removeEventListener("beforeunload",this.leaveBeforeUnload),window.removeEventListener("blur",this.windowBlurred),window.removeEventListener("focus",this.windowFocused)}}}}]);
//# sourceMappingURL=live.js.map?id=e52fe0e0ce4596f503ea